cscope 15 /home/golearn/src/github.com/utkarshmani1997/jiva-operator               0000222324
	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/cmd/manager/main.go

1 
·ckage
 
maš


3 
impÜt
 (

11 
_
 "k8s.io/client-go/plugin/pkg/client/auth"

18 
kubem‘rics
 "github.com/operator-framework/operator-sdk/pkg/kube-metrics"

23 
sdkV”siÚ
 "github.com/operator-framework/operator-sdk/version"

25 
v1
 "k8s.io/api/core/v1"

29 
logf
 "sigs.k8s.io/controller-runtime/pkg/runtime/log"

34 
v¬
 (

35 
m‘ricsHo¡
 = "0.0.0.0"

36 
m‘ricsPÜt
 
št32
 = 8383

37 
İ”©ÜM‘ricsPÜt
 
št32
 = 8686

39 
v¬
 
log
 = 
logf
.
Log
.
W™hName
("cmd")

41 
func
 
	$´štV”siÚ
() {

42 
log
.
	`Info
(
fmt
.
	`S´štf
("GØV”siÚ: %s", 
ruÁime
.
	`V”siÚ
()))

43 
log
.
	`Info
(
fmt
.
	`S´štf
("GØOS/Arch: %s/%s", 
ruÁime
.
GOOS
,„uÁime.
GOARCH
))

44 
log
.
	`Info
(
fmt
.
	`S´štf
("V”siÚ oàİ”©Ü-sdk: %v", 
sdkV”siÚ
.
V”siÚ
))

45 
	}
}

47 
func
 
	$maš
() {

50 
pæag
.
CommªdLše
.
	`AddFÏgS‘
(
z­
.
	`FÏgS‘
())

54 
pæag
.
CommªdLše
.
	`AddGoFÏgS‘
(
æag
.CommandLine)

56 
pæag
.
	`P¬£
()

66 
logf
.
	`S‘Logg”
(
z­
.
	`Logg”
())

68 
	`´štV”siÚ
()

70 
Çme¥aû
, 
”r
 :ğ
k8sut
.
	`G‘W©chName¥aû
()

71 
”r
 !ğ
n
 {

72 
log
.
	`E¼Ü
(
”r
, "Failedo get watch‚amespace")

73 
os
.
	`Ex™
(1)

77 
cfg
, 
”r
 :ğ
cÚfig
.
	`G‘CÚfig
()

78 
”r
 !ğ
n
 {

79 
log
.
	`E¼Ü
(
”r
, "")

80 
os
.
	`Ex™
(1)

83 
ùx
 :ğ
cÚ‹xt
.
	`TODO
()

85 
”r
 = 
Ëad”
.
	`Become
(
ùx
, "jiva-operator-lock")

86 
”r
 !ğ
n
 {

87 
log
.
	`E¼Ü
(
”r
, "")

88 
os
.
	`Ex™
(1)

92 
mgr
, 
”r
 :ğ
mªag”
.
	`New
(
cfg
, mªag”.
O±iÚs
{

93 
Name¥aû
: 
Çme¥aû
,

94 
M­³rProvid”
: 
»¡m­³r
.
NewDyÇmicRESTM­³r
,

95 
M‘ricsBšdAdd»ss
: 
fmt
.
	`S´štf
("%s:%d", 
m‘ricsHo¡
, 
m‘ricsPÜt
),

97 
”r
 !ğ
n
 {

98 
log
.
	`E¼Ü
(
”r
, "")

99 
os
.
	`Ex™
(1)

102 
log
.
	`Info
("Registering Components.")

105 
”r
 :ğ
­is
.
	`AddToScheme
(
mgr
.
	`G‘Scheme
());ƒ¼ !ğ
n
 {

106 
log
.
	`E¼Ü
(
”r
, "")

107 
os
.
	`Ex™
(1)

111 
”r
 :ğ
cÚŒŞËr
.
	`AddToMªag”
(
mgr
);ƒ¼ !ğ
n
 {

112 
log
.
	`E¼Ü
(
”r
, "")

113 
os
.
	`Ex™
(1)

116 
”r
 = 
	`£rveCRM‘rics
(
cfg
);ƒ¼ !ğ
n
 {

117 
log
.
	`Info
("Could‚Ù g’”©ªd s”vcu¡om„esourû m‘rics", "”rÜ", 
”r
.
	`E¼Ü
())

121 
£rviûPÜts
 :ğ[]
v1
.
S”viûPÜt
{

122 {
PÜt
: 
m‘ricsPÜt
, 
Name
: 
m‘rics
.
O³¿tÜPÜtName
, 
PrÙocŞ
: 
v1
.
PrÙocŞTCP
, 
T¬g‘PÜt
: 
št¡r
.
IÁOrSŒšg
{
Ty³
: iÁ¡r.
IÁ
, 
IÁV®
: metricsPort}},

123 {
PÜt
: 
İ”©ÜM‘ricsPÜt
, 
Name
: 
m‘rics
.
CRPÜtName
, 
PrÙocŞ
: 
v1
.
PrÙocŞTCP
, 
T¬g‘PÜt
: 
št¡r
.
IÁOrSŒšg
{
Ty³
: iÁ¡r.
IÁ
, 
IÁV®
: operatorMetricsPort}},

126 
£rviû
, 
”r
 :ğ
m‘rics
.
	`C»©eM‘ricsS”viû
(
ùx
, 
cfg
, 
£rviûPÜts
)

127 
”r
 !ğ
n
 {

128 
log
.
	`Info
("Could‚Ù c»©m‘ric S”viû", "”rÜ", 
”r
.
	`E¼Ü
())

133 
£rviûs
 :ğ[]*
v1
.
S”viû
{
£rviû
}

134 
_
, 
”r
 = 
m‘rics
.
	`C»©eS”viûMÚ™Üs
(
cfg
, 
Çme¥aû
, 
£rviûs
)

135 
”r
 !ğ
n
 {

136 
log
.
	`Info
("Could‚Ù c»©S”viûMÚ™Ü objeù", "”rÜ", 
”r
.
	`E¼Ü
())

139 
”r
 =ğ
m‘rics
.
E¼S”viûMÚ™ÜNÙP»£Á
 {

140 
log
.
	`Info
("In¡®È´om‘heus-İ”©Ü iÀyou¸şu¡”Øü—‹ S”viûMÚ™Ü objeùs", "”rÜ", 
”r
.
	`E¼Ü
())

144 
log
.
	`Info
("Startinghe Cmd.")

147 
”r
 :ğ
mgr
.
	`S¹
(
sigÇls
.
	`S‘upSigÇlHªdËr
());ƒ¼ !ğ
n
 {

148 
log
.
	`E¼Ü
(
”r
, "Managerƒxited‚on-zero")

149 
os
.
	`Ex™
(1)

151 
	}
}

155 
func
 
	$£rveCRM‘rics
(
cfg
 *
»¡
.
CÚfig
è
”rÜ
 {

158 
f‹»dGVK
, 
”r
 :ğ
k8sut
.
	`G‘GVKsFromAddToScheme
(
­is
.
AddToScheme
)

159 
”r
 !ğ
n
 {

160  
”r


163 
İ”©ÜNs
, 
”r
 :ğ
k8sut
.
	`G‘O³¿tÜName¥aû
()

164 
”r
 !ğ
n
 {

165  
”r


168 
ns
 :ğ[]
¡ršg
{
İ”©ÜNs
}

170 
”r
 = 
kubem‘rics
.
	`G’”©eAndS”veCRM‘rics
(
cfg
, 
ns
, 
f‹»dGVK
, 
m‘ricsHo¡
, 
İ”©ÜM‘ricsPÜt
)

171 
”r
 !ğ
n
 {

172  
”r


174  
n


175 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/addtoscheme_openebs_v1alpha1.go

1 
·ckage
 
­is


3 
impÜt
 (

7 
func
 
	$š™
() {

9 
AddToSchemes
 = 
	`­³nd
(AddToSchemes, 
v1®pha1
.
SchemeBud”
.
AddToScheme
)

10 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/apis.go

1 
·ckage
 
­is


3 
impÜt
 (

8 
v¬
 
AddToSchemes
 
	gruÁime
.
SchemeBud”


11 
func
 
	$AddToScheme
(
s
 *
ruÁime
.
Scheme
è
”rÜ
 {

12  
AddToSchemes
.
	`AddToScheme
(
s
)

13 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/group.go

6 
·ckage
 
	gİ’ebs


	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1/doc.go

4 
·ckage
 
	gv1®pha1


	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1/jivavolume_types.go

1 
·ckage
 
v1®pha1


3 
impÜt
 (

4 
m‘av1
 "k8s.io/apimachinery/pkg/apis/meta/v1"

12 
ty³
 
JivaVŞumeS³c
 struct {

15 
PVC
 
	m¡ršg
 `
	mjsÚ
:"pvc,omitempty"`

16 
C­ac™y
 
št64
 `
jsÚ
:"capacity"`

19 
R•liÿtiÚFaùÜ
 
¡ršg
 `
jsÚ
:"replicationFactor"`

20 
T¬g‘IP
 
¡ršg
 `
jsÚ
:"targetIP"`

21 
T¬g‘PÜt
 
št32
 `
jsÚ
:"targetPort"`

22 
Iqn
 
¡ršg
 `
jsÚ
:"iqn"`

23 
T¬g‘PÜl
 
¡ršg
 `
jsÚ
:"targetPortal"`

28 
ty³
 
JivaVŞumeStus
 struct {

29 
Name
 
¡ršg
 `
jsÚ
:"name"`

30 
Stus
 
¡ršg
 `
jsÚ
:"status"`

31 
R•liÿCouÁ
 `
jsÚ
:"replicaCount"`

32 
R•liÿStu£s
 []
R•liÿStus
 `
jsÚ
:"replicaStatus"`

34 
Pha£
 
JivaVŞumePha£
 `
jsÚ
:"phase"`

42 
ty³
 
JivaVŞume
 struct {

43 
m‘av1
.
Ty³M‘a
 `
jsÚ
:",inline"`

44 
m‘av1
.
ObjeùM‘a
 `
jsÚ
:"metadata,omitempty"`

46 
S³c
 
JivaVŞumeS³c
 `
jsÚ
:"spec,omitempty"`

47 
Stus
 
JivaVŞumeStus
 `
jsÚ
:"status,omitempty"`

53 
ty³
 
JivaVŞumeLi¡
 struct {

54 
m‘av1
.
Ty³M‘a
 `
jsÚ
:",inline"`

55 
m‘av1
.
Li¡M‘a
 `
jsÚ
:"metadata,omitempty"`

56 
I‹ms
 []
JivaVŞume
 `
jsÚ
:"items"`

60 
ty³
 
R•liÿStus
 struct {

61 
Add»ss
 
¡ršg
 `
jsÚ
:"address"`

62 
Mode
 
¡ršg
 `
jsÚ
:"mode"`

66 
ty³
 
JivaVŞumePha£
 
¡ršg


71 
JivaVŞumePha£P’dšg
 
JivaVŞumePha£
 = "Pending"

75 
JivaVŞumePha£Syncšg
 
JivaVŞumePha£
 = "Syncing"

79 
JivaVŞumePha£Faed
 
JivaVŞumePha£
 = "Failed"

83 
JivaVŞumePha£C»©ed
 
JivaVŞumePha£
 = "Created"

86 
func
 
	$š™
() {

87 
SchemeBud”
.
	`Regi¡”
(&
JivaVŞume
{}, &
JivaVŞumeLi¡
{})

88 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1/register.go

6 
·ckage
 
v1®pha1


8 
impÜt
 (

13 
v¬
 (

15 
SchemeGroupV”siÚ
 = 
schema
.
GroupV”siÚ
{
Group
: "İ’ebs.io", 
V”siÚ
: "v1alpha1"}

18 
SchemeBud”
 = &
scheme
.
Bud”
{
GroupV”siÚ
: 
SchemeGroupV”siÚ
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1/zz_generated.deepcopy.go

5 
·ckage
 
v1®pha1


7 
impÜt
 (

8 
ruÁime
 "k8s.io/apimachinery/pkg/runtime"

12 
	$func
 (
š
 *
JivaVŞume
è
	$D“pCİyIÁo
(
out
 *
JivaVŞume
) {

13 *
out
 = *
š


14 
out
.
Ty³M‘a
 = 
š
.TypeMeta

15 
š
.
ObjeùM‘a
.
	`D“pCİyIÁo
(&
out
.ObjectMeta)

16 
out
.
S³c
 = 
š
.Spec

17 
š
.
Stus
.
	`D“pCİyIÁo
(&
out
.Status)

19 
	}
}

22 
	$func
 (
š
 *
JivaVŞume
è
	`D“pCİy
() *JivaVolume {

23 
š
 =ğ
n
 {

24  
n


26 
out
 :ğ
	`Ãw
(
JivaVŞume
)

27 
š
.
	`D“pCİyIÁo
(
out
)

28  
out


29 
	}
}

32 
	$func
 (
š
 *
JivaVŞume
è
	$D“pCİyObjeù
(è
ruÁime
.
Objeù
 {

33 
c
 :ğ
š
.
	`D“pCİy
(); c !ğ
n
 {

34  
c


36  
n


37 
	}
}

40 
	$func
 (
š
 *
JivaVŞumeLi¡
è
	$D“pCİyIÁo
(
out
 *
JivaVŞumeLi¡
) {

41 *
out
 = *
š


42 
out
.
Ty³M‘a
 = 
š
.TypeMeta

43 
out
.
Li¡M‘a
 = 
š
.ListMeta

44 
š
.
I‹ms
 !ğ
n
 {

45 
š
, 
out
 :ğ&š.
I‹ms
, &out.Items

46 *
out
 = 
	`make
([]
JivaVŞume
, 
	`Ën
(*
š
))

47 
i
 :ğ
¿nge
 *
š
 {

48 (*
š
)[
i
].
	`D“pCİyIÁo
(&(*
out
)[i])

52 
	}
}

55 
	$func
 (
š
 *
JivaVŞumeLi¡
è
	`D“pCİy
() *JivaVolumeList {

56 
š
 =ğ
n
 {

57  
n


59 
out
 :ğ
	`Ãw
(
JivaVŞumeLi¡
)

60 
š
.
	`D“pCİyIÁo
(
out
)

61  
out


62 
	}
}

65 
	$func
 (
š
 *
JivaVŞumeLi¡
è
	$D“pCİyObjeù
(è
ruÁime
.
Objeù
 {

66 
c
 :ğ
š
.
	`D“pCİy
(); c !ğ
n
 {

67  
c


69  
n


70 
	}
}

73 
	$func
 (
š
 *
JivaVŞumeS³c
è
	$D“pCİyIÁo
(
out
 *
JivaVŞumeS³c
) {

74 *
out
 = *
š


76 
	}
}

79 
	$func
 (
š
 *
JivaVŞumeS³c
è
	`D“pCİy
() *JivaVolumeSpec {

80 
š
 =ğ
n
 {

81  
n


83 
out
 :ğ
	`Ãw
(
JivaVŞumeS³c
)

84 
š
.
	`D“pCİyIÁo
(
out
)

85  
out


86 
	}
}

89 
	$func
 (
š
 *
JivaVŞumeStus
è
	$D“pCİyIÁo
(
out
 *
JivaVŞumeStus
) {

90 *
out
 = *
š


91 
š
.
R•liÿStu£s
 !ğ
n
 {

92 
š
, 
out
 :ğ&š.
R•liÿStu£s
, &out.ReplicaStatuses

93 *
out
 = 
	`make
([]
R•liÿStus
, 
	`Ën
(*
š
))

94 
	`cİy
(*
out
, *
š
)

97 
	}
}

100 
	$func
 (
š
 *
JivaVŞumeStus
è
	`D“pCİy
() *JivaVolumeStatus {

101 
š
 =ğ
n
 {

102  
n


104 
out
 :ğ
	`Ãw
(
JivaVŞumeStus
)

105 
š
.
	`D“pCİyIÁo
(
out
)

106  
out


107 
	}
}

110 
	$func
 (
š
 *
R•liÿStus
è
	$D“pCİyIÁo
(
out
 *
R•liÿStus
) {

111 *
out
 = *
š


113 
	}
}

116 
	$func
 (
š
 *
R•liÿStus
è
	`D“pCİy
() *ReplicaStatus {

117 
š
 =ğ
n
 {

118  
n


120 
out
 :ğ
	`Ãw
(
R•liÿStus
)

121 
š
.
	`D“pCİyIÁo
(
out
)

122  
out


123 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1/zz_generated.openapi.go

5 
·ckage
 
v1®pha1


7 
impÜt
 (

8 
¥ec
 "github.com/go-openapi/spec"

9 
commÚ
 "k8s.io/kube-openapi/pkg/common"

12 
func
 
	$G‘O³nAPIDefš™iÚs
(
»f
 
commÚ
.
Reã»nûC®lback
è
m­
[
¡ršg
]commÚ.
O³nAPIDefš™iÚ
 {

13  
m­
[
¡ršg
]
commÚ
.
O³nAPIDefš™iÚ
{

14 "g™hub.com/utk¬shmªi1997/jiva-İ”©Ü/pkg/­is/İ’ebs/v1®pha1.JivaVŞume": 
	`schema_pkg_­is_İ’ebs_v1®pha1_JivaVŞume
(
»f
),

15 "g™hub.com/utk¬shmªi1997/jiva-İ”©Ü/pkg/­is/İ’ebs/v1®pha1.JivaVŞumeS³c": 
	`schema_pkg_­is_İ’ebs_v1®pha1_JivaVŞumeS³c
(
»f
),

16 "g™hub.com/utk¬shmªi1997/jiva-İ”©Ü/pkg/­is/İ’ebs/v1®pha1.JivaVŞumeStus": 
	`schema_pkg_­is_İ’ebs_v1®pha1_JivaVŞumeStus
(
»f
),

18 
	}
}

20 
func
 
	$schema_pkg_­is_İ’ebs_v1®pha1_JivaVŞume
(
»f
 
commÚ
.
Reã»nûC®lback
ècommÚ.
O³nAPIDefš™iÚ
 {

21  
commÚ
.
O³nAPIDefš™iÚ
{

22 
Schema
: 
¥ec
.Schema{

23 
SchemaPrİs
: 
¥ec
.SchemaProps{

24 
DesütiÚ
: "JivaVolume ishe Schema forhe jivavolumes API",

25 
Prİ”t›s
: 
m­
[
¡ršg
]
¥ec
.
Schema
{

27 
SchemaPrİs
: 
¥ec
.SchemaProps{

28 
DesütiÚ
: "Kind is‡ string value„epresentinghe REST„esourcehis object„epresents. Servers may inferhis fromheƒndpointhe client submits„equestso. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds",

29 
Ty³
: []
¡ršg
{"string"},

30 
FÜm©
: "",

34 
SchemaPrİs
: 
¥ec
.SchemaProps{

35 
DesütiÚ
: "APIVersion defineshe versioned schema ofhis„epresentation of‡n object. Servers should convert„ecognized schemasohe†atest internal value,‡nd may„eject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#resources",

36 
Ty³
: []
¡ršg
{"string"},

37 
FÜm©
: "",

41 
SchemaPrİs
: 
¥ec
.SchemaProps{

42 
Ref
: 
	`»f
("k8s.io/apimachinery/pkg/apis/meta/v1.ObjectMeta"),

46 
SchemaPrİs
: 
¥ec
.SchemaProps{

47 
Ref
: 
	`»f
("github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1.JivaVolumeSpec"),

51 
SchemaPrİs
: 
¥ec
.SchemaProps{

52 
Ref
: 
	`»f
("github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1.JivaVolumeStatus"),

58 
D•’d’c›s
: []
¡ršg
{

61 
	}
}

63 
func
 
	$schema_pkg_­is_İ’ebs_v1®pha1_JivaVŞumeS³c
(
»f
 
commÚ
.
Reã»nûC®lback
ècommÚ.
O³nAPIDefš™iÚ
 {

64  
commÚ
.
O³nAPIDefš™iÚ
{

65 
Schema
: 
¥ec
.Schema{

66 
SchemaPrİs
: 
¥ec
.SchemaProps{

67 
DesütiÚ
: "JivaVolumeSpec defineshe desired state of JivaVolume",

68 
Prİ”t›s
: 
m­
[
¡ršg
]
¥ec
.
Schema
{},

71 
D•’d’c›s
: []
¡ršg
{},

73 
	}
}

75 
func
 
	$schema_pkg_­is_İ’ebs_v1®pha1_JivaVŞumeStus
(
»f
 
commÚ
.
Reã»nûC®lback
ècommÚ.
O³nAPIDefš™iÚ
 {

76  
commÚ
.
O³nAPIDefš™iÚ
{

77 
Schema
: 
¥ec
.Schema{

78 
SchemaPrİs
: 
¥ec
.SchemaProps{

79 
DesütiÚ
: "JivaVolumeStatus defineshe observed state of JivaVolume",

80 
Prİ”t›s
: 
m­
[
¡ršg
]
¥ec
.
Schema
{},

83 
D•’d’c›s
: []
¡ršg
{},

85 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/controller/add_jivavolume.go

1 
·ckage
 
cÚŒŞËr


3 
impÜt
 (

7 
func
 
	$š™
() {

9 
AddToMªag”Funcs
 = 
	`­³nd
(AddToMªag”Funcs, 
jivavŞume
.
Add
)

10 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/controller/controller.go

1 
·ckage
 
cÚŒŞËr


3 
impÜt
 (

8 
v¬
 
	gAddToMªag”Funcs
 []
	$func
(
mªag”
.
Mªag”
è
”rÜ


11 
func
 
	$AddToMªag”
(
m
 
mªag”
.
Mªag”
è
”rÜ
 {

12 
_
, 
f
 :ğ
¿nge
 
AddToMªag”Funcs
 {

13 
”r
 :ğ
	`f
(
m
);ƒ¼ !ğ
n
 {

14  
”r


17  
n


18 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/controller/jivavolume/jivavolume_controller.go

1 
·ckage
 
jivavŞume


3 
impÜt
 (

10 
jv
 "github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1"

11 
cÚš”
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/container/v1alpha1"

12 
±s
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/podtemplatespec/v1alpha1"

14 
İ”r
 "github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1"

15 
d•loy
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/deployment/appsv1/v1alpha1"

16 
pvc
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1"

17 
svc
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/service/v1alpha1"

18 
¡s
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/statefulset/appsv1/v1alpha1"

19 
­psv1
 "k8s.io/api/apps/v1"

20 
cÜev1
 "k8s.io/api/core/v1"

21 
v1
 "k8s.io/api/core/v1"

23 
m‘av1
 "k8s.io/apimachinery/pkg/apis/meta/v1"

32 
logf
 "sigs.k8s.io/controller-runtime/pkg/runtime/log"

36 
v¬
 
	glog
 = 
logf
.
Log
.
W™hName
("controller_jivavolume")

45 
func
 
	$Add
(
mgr
 
mªag”
.
Mªag”
è
”rÜ
 {

46  
	`add
(
mgr
, 
	`ÃwRecÚc”
(mgr))

47 
	}
}

50 
func
 
	$ÃwRecÚc”
(
mgr
 
mªag”
.
Mªag”
è
»cÚce
.
RecÚc”
 {

51  &
RecÚceJivaVŞume
{
ş›Á
: 
mgr
.
	`G‘Cl›Á
(), 
scheme
: mgr.
	`G‘Scheme
()}

52 
	}
}

55 
func
 
	$add
(
mgr
 
mªag”
.
Mªag”
, 
r
 
»cÚce
.
RecÚc”
è
”rÜ
 {

57 
c
, 
”r
 :ğ
cÚŒŞËr
.
	`New
("jivavŞume-cÚŒŞËr", 
mgr
, cÚŒŞËr.
O±iÚs
{
RecÚc”
: 
r
})

58 
”r
 !ğ
n
 {

59  
”r


63 
”r
 = 
c
.
	`W©ch
(&
sourû
.
Kšd
{
Ty³
: &
jv
.
JivaVŞume
{}}, &
hªdËr
.
EnqueueReque¡FÜObjeù
{})

64 
”r
 !ğ
n
 {

65  
”r


70 
”r
 = 
c
.
	`W©ch
(&
sourû
.
Kšd
{
Ty³
: &
cÜev1
.
Pod
{}}, &
hªdËr
.
EnqueueReque¡FÜOwÃr
{

71 
IsCÚŒŞËr
: 
Œue
,

72 
OwÃrTy³
: &
jv
.
JivaVŞume
{},

74 
”r
 !ğ
n
 {

75  
”r


78  
n


79 
	}
}

82 
v¬
 
_
 
	g»cÚce
.
	gRecÚc”
 = &
RecÚceJivaVŞume
{}

85 
ty³
 
RecÚceJivaVŞume
 struct {

88 
ş›Á
 cl›Á.
Cl›Á


89 
scheme
 *
ruÁime
.
Scheme


99 
	$func
 (
r
 *
RecÚceJivaVŞume
è
	$RecÚce
(
»que¡
 
»cÚce
.
Reque¡
èÔecÚce.
ResuÉ
, 
”rÜ
) {

100 
»qLogg”
 :ğ
log
.
	`W™hV®ues
("Reque¡.Name¥aû", 
»que¡
.
Name¥aû
, "Reque¡.Name",„eque¡.
Name
)

101 
»qLogg”
.
	`Info
("Reconciling JivaVolume")

104 
š¡ªû
 :ğ&
jv
.
JivaVŞume
{}

105 
”r
 :ğ
r
.
ş›Á
.
	`G‘
(
cÚ‹xt
.
	`TODO
(), 
»que¡
.
Name¥aûdName
, 
š¡ªû
)

106 
”r
 !ğ
n
 {

107 
”rÜs
.
	`IsNÙFound
(
”r
) {

111  
»cÚce
.
ResuÉ
{}, 
n


114  
»cÚce
.
ResuÉ
{}, 
”r


117 
š¡ªû
.
Stus
.
Pha£
 {

118 
jv
.
JivaVŞumePha£C»©ed
, jv.
JivaVŞumePha£Syncšg
:

119  
»cÚce
.
ResuÉ
{}, 
	`g‘VŞumeStus
(
š¡ªû
.
S³c
.
T¬g‘IP
 + 
fmt
.
	`S´št
(š¡ªû.S³c.
T¬g‘PÜt
))

120 
jv
.
JivaVŞumePha£Faed
:

121  
»cÚce
.
ResuÉ
{}, 
	`‹¬downJivaCompÚ’ts
(
š¡ªû
)

122 
jv
.
JivaVŞumePha£P’dšg
:

123 
»qLogg”
.
	`Info
("JivaVolume is in…ending state, start bootstraping jiva components")

124  
»cÚce
.
ResuÉ
{}, 
r
.
	`boÙ¡¿pJiva
(
š¡ªû
, 
»qLogg”
)

126 
»qLogg”
.
	`Info
("JivaVolume is in…ending state, start bootstraping jiva components")

127  
»cÚce
.
ResuÉ
{}, 
r
.
	`boÙ¡¿pJiva
(
š¡ªû
, 
»qLogg”
)

130  
»cÚce
.
ResuÉ
{}, 
n


131 
	}
}

136 
	$func
 (
r
 *
RecÚceJivaVŞume
è
	$boÙ¡¿pJiva
(
ü
 *
jv
.
JivaVŞume
, 
»qLog
 
logr
.
Logg”
è
”rÜ
 {

137 
”r
 :ğ
r
.
	`ü—‹CÚŒŞËrS”viû
(
ü
, 
»qLog
);ƒ¼ !ğ
n
 {

138  
”r


141 
”r
 :ğ
r
.
	`upd©eJivaVŞume
(
ü
);ƒ¼ !ğ
n
 {

142  
”r


145 
”r
 :ğ
r
.
	`ü—‹CÚŒŞËrD•loym’t
(
ü
, 
»qLog
);ƒ¼ !ğ
n
 {

146  
”r


149 
”r
 :ğ
r
.
	`ü—‹R•liÿS‹fulS‘
(
ü
, 
»qLog
);ƒ¼ !ğ
n
 {

150  
”r


152  
n


153 
	}
}

156 
func
 
ÃwPodFÜCR
(
ü
 *
jv
.
JivaVŞume
è*
	gcÜev1
.
	gPod
 {

157 
	gÏb–s
 :ğ
m­
[
¡ršg
]string{

158 "­p": 
ü
.
Name
,

160  &
cÜev1
.
Pod
{

161 
ObjeùM‘a
: 
m‘av1
.ObjectMeta{

162 
Name
: 
ü
.Name + "-pod",

163 
Name¥aû
: 
ü
.Namespace,

164 
Lab–s
: 
Ïb–s
,

166 
S³c
: 
cÜev1
.
PodS³c
{

167 
CÚš”s
: []
cÜev1
.
CÚš”
{

169 
Name
: "busybox",

170 
Image
: "busybox",

171 
Commªd
: []
¡ršg
{"sleep", "3600"},

179 
	$func
 (
r
 *
RecÚceJivaVŞume
è
	$ü—‹CÚŒŞËrD•loym’t
(
ü
 *
jv
.
JivaVŞume
,

180 
»qLog
 
logr
.
Logg”
è
”rÜ
 {

181 
Ïb–s
 :ğ
m­
[
¡ršg
]string{

184 "İ’ebs.io/³rsi¡’t-vŞume": 
ü
.
Name
,

185 "İ’ebs.io/³rsi¡’t-vŞume-şaim": 
ü
.
S³c
.
PVC
,

188 
»ps
 :ğ
	`št32
(1)

189 
d•
, 
”r
 :ğ
d•loy
.
	`NewBud”
().
	`W™hName
(
ü
.
Name
 + "-jiva-ctrl").

190 
	`W™hName¥aû
(
ü
.
Name¥aû
).

191 
	`W™hLab–s
(
Ïb–s
).

192 
	`W™hR•liÿs
(&
»ps
).

193 
	`W™hSŒ©egyTy³
(
­psv1
.
Reü—‹D•loym’tSŒ©egyTy³
).

194 
	`W™hS–eùÜM©chLab–sNew
(
m­
[
¡ršg
]string{

195 "İ’ebs.io/³rsi¡’t-vŞume": 
ü
.
Name
,

196 "İ’ebs.io/³rsi¡’t-vŞume-şaim": 
ü
.
S³c
.
PVC
,

198 
	`W™hPodTem¶©eS³cBud”
(

199 
±s
.
	`NewBud”
().

200 
	`W™hLab–s
(
Ïb–s
).

201 
	`W™hAÂÙ©iÚs
(
m­
[
¡ršg
]string{

206 
	`W™hCÚš”Bud”s
(

207 
cÚš”
.
	`NewBud”
().

208 
	`W™hName
("jiva-controller").

209 
	`W™hImage
(
	`g‘Image
("OPENEBS_IO_JIVA_CONTROLLER_IMAGE",

211 
	`W™hPÜtsNew
([]
cÜev1
.
CÚš”PÜt
{

213 
CÚš”PÜt
: 3260,

214 
PrÙocŞ
: "TCP",

217 
CÚš”PÜt
: 9501,

218 
PrÙocŞ
: "TCP",

221 
	`W™hCommªdNew
([]
¡ršg
{

224 
	`W™hArgum’tsNew
([]
¡ršg
{

229 
ü
.
Name
 + "-ù¾-svc." + cr.
Name¥aû
 + ".svc.cluster.local",

230 
ü
.
Name
,

232 
	`W™hEnvsNew
([]
cÜev1
.
EnvV¬
{

234 
Name
: "REPLICATION_FACTOR",

235 
V®ue
: 
ü
.
S³c
.
R•liÿtiÚFaùÜ
,

238 
	`W™hImagePuÎPŞicy
(
cÜev1
.
PuÎIfNÙP»£Á
),

239 
cÚš”
.
	`NewBud”
().

240 
	`W™hImage
(
	`g‘Image
("OPENEBS_IO_MAYA_EXPORTER_IMAGE",

242 
	`W™hName
("maya-volume-exporter").

243 
	`W™hCommªdNew
([]
¡ršg
{"maya-exporter"}).

244 
	`W™hPÜtsNew
([]
cÜev1
.
CÚš”PÜt
{

246 
CÚš”PÜt
: 9500,

247 
PrÙocŞ
: "TCP",

252 ).
	`Bud
()

254 
”r
 !ğ
n
 {

255  
İ”r
.
	`W¿pf
(
”r
, "failedo build deployment object")

258 
found
 :ğ&
­psv1
.
D•loym’t
{}

259 
”r
 = 
r
.
ş›Á
.
	`G‘
(
cÚ‹xt
.
	`TODO
(), 
ty³s
.
Name¥aûdName
{
Name
: 
d•
.Name, 
Name¥aû
: d•.Name¥aû}, 
found
)

260 
”r
 !ğ
n
 && 
”rÜs
.
	`IsNÙFound
(err) {

261 
»qLog
.
	`Info
("C»©šg‡‚ew d•loym’t", "D•loy.Name¥aû", 
d•
.
Name¥aû
, "D•loy.Name", d•.
Name
)

262 
”r
 = 
r
.
ş›Á
.
	`C»©e
(
cÚ‹xt
.
	`TODO
(), 
d•
)

263 
”r
 !ğ
n
 {

264  
İ”r
.
	`W¿pf
(
”r
, "çedØü—‹ d•loym’t: %v", 
d•
.
Name
)

268  
n


269 } 
”r
 !ğ
n
 {

270  
İ”r
.
	`W¿pf
(
”r
, "çedØg‘hd•loym’ˆd‘as: %v", 
d•
.
Name
)

273  
n


274 
	}
}

276 
func
 
	$g‘Image
(
key
, 
compÚ’t
 
¡ršg
) string {

277 
image
, 
´e£Á
 :ğ
os
.
	`LookupEnv
(
key
)

278 !
´e£Á
 {

279 
compÚ’t
 {

281 
image
 = "openebs/jiva:ci"

283 
image
 = "openebs/m-exporter:ci"

286  
image


287 
	}
}

289 
	$func
 (
r
 *
RecÚceJivaVŞume
è
	$ü—‹R•liÿS‹fulS‘
(
ü
 *
jv
.
JivaVŞume
,

290 
»qLog
 
logr
.
Logg”
è
”rÜ
 {

292 
	`v¬
 (

293 
”r
 
”rÜ


294 
»¶iÿCouÁ
 
št32


295 
¡sObj
 *
­psv1
.
S‹fulS‘


297 
Ïb–s
 :ğ
m­
[
¡ršg
]string{

300 "İ’ebs.io/³rsi¡’t-vŞume": 
ü
.
Name
,

301 "İ’ebs.io/³rsi¡’t-vŞume-şaim": 
ü
.
S³c
.
PVC
,

303 
rc
, 
”r
 :ğ
¡rcÚv
.
	`P¬£IÁ
(
ü
.
S³c
.
R•liÿtiÚFaùÜ
, 10, 32)

304 
”r
 !ğ
n
 {

305  
İ”r
.
	`W¿pf
(
”r
,

307 
ü
.
S³c
.
R•liÿtiÚFaùÜ
)

310 
»¶iÿCouÁ
 = 
	`št32
(
rc
)

311 
´ev
 :ğ
Œue


313 
¡sObj
, 
”r
 = 
¡s
.
	`NewBud”
().

314 
	`W™hName
(
ü
.
Name
 + "rep").

315 
	`W™hLab–sNew
(
Ïb–s
).

316 
	`W™hName¥aû
(
ü
.
Name¥aû
).

317 
	`W™hS”viûName
("jiva-replica-svc").

318 
	`W™hAÂÙ©iÚsNew
(
m­
[
¡ršg
]string{

319 "İ’ebs.io/ÿ·c™y": 
¡rcÚv
.
	`FÜm©IÁ
(
ü
.
S³c
.
C­ac™y
, 10),

321 
	`W™hSŒ©egyTy³
(
­psv1
.
RŞlšgUpd©eS‹fulS‘SŒ©egyTy³
).

322 
	`W™hR•liÿs
(&
»¶iÿCouÁ
).

323 
	`W™hS–eùÜM©chLab–s
(
m­
[
¡ršg
]string{

324 "İ’ebs.io/³rsi¡’t-vŞume": 
ü
.
Name
,

325 "İ’ebs.io/³rsi¡’t-vŞume-şaim": 
ü
.
S³c
.
PVC
,

328 
	`W™hPodTem¶©eS³cBud”
(

329 
±s
.
	`NewBud”
().

330 
	`W™hLab–s
(
Ïb–s
).

331 
	`W™hAÂÙ©iÚs
(
m­
[
¡ršg
]string{

332 "İ’ebs.io/ÿ·c™y": 
¡rcÚv
.
	`FÜm©IÁ
(
ü
.
S³c
.
C­ac™y
, 10),

334 
	`W™hAffš™y
(&
cÜev1
.
Affš™y
{

335 
PodAÁiAffš™y
: &
cÜev1
.PodAntiAffinity{

336 
RequœedDuršgSchedulšgIgnÜedDuršgExecutiÚ
: []
cÜev1
.
PodAffš™yT”m
{

338 
Lab–S–eùÜ
: &
m‘av1
.LabelSelector{

339 
M©chLab–s
: 
m­
[
¡ršg
]string{

341 "İ’ebs.io/³rsi¡’t-vŞume": 
ü
.
Name
,

344 
TİŞogyKey
: "kubernetes.io/hostname",

349 
	`W™hCÚš”Bud”s
(

350 
cÚš”
.
	`NewBud”
().

351 
	`W™hName
("jiva-replica").

352 
	`W™hImage
(
	`g‘Image
("OPENEBS_IO_JIVA_REPLICA_IMAGE",

354 
	`W™hPÜtsNew
([]
cÜev1
.
CÚš”PÜt
{

356 
CÚš”PÜt
: 9502,

357 
PrÙocŞ
: "TCP",

360 
CÚš”PÜt
: 9503,

361 
PrÙocŞ
: "TCP",

364 
CÚš”PÜt
: 9504,

365 
PrÙocŞ
: "TCP",

368 
	`W™hCommªdNew
([]
¡ršg
{

371 
	`W™hArgum’tsNew
([]
¡ršg
{

374 
ü
.
Name
 + "-ù¾-svc." + cr.
Name¥aû
 + ".svc.cluster.local",

376 
¡rcÚv
.
	`FÜm©IÁ
(
ü
.
S³c
.
C­ac™y
, 10),

379 
	`W™hImagePuÎPŞicy
(
cÜev1
.
PuÎIfNÙP»£Á
).

380 
	`W™hPrivegedSecur™yCÚ‹xt
(&
´ev
).

381 
	`W™hVŞumeMouÁsNew
([]
cÜev1
.
VŞumeMouÁ
{

383 
Name
: "openebs",

384 
MouÁP©h
: "/openebs",

389 
	`W™hPVC
(

390 
pvc
.
	`NewBud”
().

391 
	`W™hName
("openebs").

392 
	`W™hName¥aû
(
ü
.
Name¥aû
).

393 
	`W™hStÜageCÏss
("openebs-hostpath").

394 
	`W™hAcûssModes
([]
cÜev1
.
P”si¡’tVŞumeAcûssMode
{cÜev1.
R—dWr™eOnû
}).

395 
	`W™hC­ac™y
(
¡rcÚv
.
	`FÜm©IÁ
(
ü
.
S³c
.
C­ac™y
, 10)),

396 ).
	`Bud
()

398 
”r
 !ğ
n
 {

399  
İ”r
.
	`W¿pf
(
”r
, "failedo build statefulset object")

402 
found
 :ğ&
­psv1
.
S‹fulS‘
{}

403 
”r
 = 
r
.
ş›Á
.
	`G‘
(
cÚ‹xt
.
	`TODO
(), 
ty³s
.
Name¥aûdName
{
Name
: 
¡sObj
.Name, 
Name¥aû
: stsObj.Name¥aû}, 
found
)

404 
”r
 !ğ
n
 && 
”rÜs
.
	`IsNÙFound
(err) {

405 
»qLog
.
	`Info
("C»©šg‡‚ew S‹ful£t", "S‹ful£t.Name¥aû", 
¡sObj
.
Name¥aû
, "Sts.Name", stsObj.
Name
)

406 
”r
 = 
r
.
ş›Á
.
	`C»©e
(
cÚ‹xt
.
	`TODO
(), 
¡sObj
)

407 
”r
 !ğ
n
 {

408  
İ”r
.
	`W¿pf
(
”r
, "çedØü—‹ s‹ful£t: %v", 
¡sObj
.
Name
)

412  
n


413 } 
”r
 !ğ
n
 {

414  
İ”r
.
	`W¿pf
(
”r
, "çedØg‘h¡©eful£ˆd‘as: %v", 
¡sObj
.
Name
)

417  
n


418 
	}
}

420 
	$func
 (
r
 *
RecÚceJivaVŞume
è
	$upd©eJivaVŞume
(
ü
 *
jv
.
JivaVŞume
è
”rÜ
 {

421 
ù¾SVC
 :ğ&
v1
.
S”viû
{}

422 
”r
 :ğ
r
.
ş›Á
.
	`G‘
(
cÚ‹xt
.
	`TODO
(),

423 
ty³s
.
Name¥aûdName
{

424 
Name
: 
ü
.Name + "-ctrl-svc",

425 
Name¥aû
: 
ü
.Namespace,

426 }, 
ù¾SVC
); 
”r
 !ğ
n
 {

427  
İ”r
.
	`W¿pf
(
”r
, "çedØg‘ s”viû: {%v}", 
ü
.
Name
+"-ctrl-svc")

429 
ü
.
S³c
.
T¬g‘IP
 = 
ù¾SVC
.S³c.
Clu¡”IP


430 
ü
.
Stus
.
Pha£
 = 
jv
.
JivaVŞumePha£C»©ed


431 
”r
 :ğ
r
.
ş›Á
.
	`Upd©e
(
cÚ‹xt
.
	`TODO
(), 
ü
);ƒ¼ !ğ
n
 {

432  
İ”r
.
	`W¿pf
(
”r
, "çedØupd©JivaVŞumCR: {%v} w™h¬g‘IP", 
ü
)

434  
n


435 
	}
}

437 
	$func
 (
r
 *
RecÚceJivaVŞume
è
	$ü—‹CÚŒŞËrS”viû
(
ü
 *
jv
.
JivaVŞume
,

438 
»qLog
 
logr
.
Logg”
è
”rÜ
 {

439 
Ïb–s
 :ğ
m­
[
¡ršg
]string{

443 "İ’ebs.io/³rsi¡’t-vŞume": 
ü
.
Name
,

444 "İ’ebs.io/³rsi¡’t-vŞume-şaim": 
ü
.
S³c
.
PVC
,

447 
svcObj
, 
”r
 :ğ
svc
.
	`NewBud”
().

448 
	`W™hName
(
ü
.
Name
 + "-ctrl-svc").

449 
	`W™hLab–sNew
(
Ïb–s
).

450 
	`W™hName¥aû
(
ü
.
Name¥aû
).

451 
	`W™hS–eùÜsNew
(
m­
[
¡ršg
]string{

453 "İ’ebs.io/³rsi¡’t-vŞume": 
ü
.
Name
,

455 
	`W™hPÜts
([]
cÜev1
.
S”viûPÜt
{

457 
Name
: "iscsi",

458 
PÜt
: 3260,

459 
PrÙocŞ
: "TCP",

460 
T¬g‘PÜt
: 
št¡r
.
IÁOrSŒšg
{
IÁV®
: 3260},

463 
Name
: "api",

464 
PÜt
: 9501,

465 
PrÙocŞ
: "TCP",

466 
T¬g‘PÜt
: 
št¡r
.
IÁOrSŒšg
{
IÁV®
: 9501},

469 
Name
: "m-exporter",

470 
PÜt
: 9500,

471 
PrÙocŞ
: "TCP",

472 
T¬g‘PÜt
: 
št¡r
.
IÁOrSŒšg
{
IÁV®
: 9500},

475 
	`Bud
()

477 
”r
 !ğ
n
 {

478  
İ”r
.
	`W¿pf
(
”r
, "failedo build service object")

481 
found
 :ğ&
v1
.
S”viû
{}

482 
”r
 = 
r
.
ş›Á
.
	`G‘
(
cÚ‹xt
.
	`TODO
(), 
ty³s
.
Name¥aûdName
{
Name
: 
svcObj
.Name, 
Name¥aû
: svcObj.Name¥aû}, 
found
)

483 
”r
 !ğ
n
 && 
”rÜs
.
	`IsNÙFound
(err) {

484 
»qLog
.
	`Info
("C»©šg‡‚ew s”viû", "S”viû.Name¥aû", 
svcObj
.
Name¥aû
, "S”viû.Name", svcObj.
Name
)

485 
”r
 = 
r
.
ş›Á
.
	`C»©e
(
cÚ‹xt
.
	`TODO
(), 
svcObj
)

486 
”r
 !ğ
n
 {

487  
İ”r
.
	`W¿pf
(
”r
, "çedØü—‹ svc: %v", 
svcObj
.
Name
)

489  
n


490 } 
”r
 !ğ
n
 {

491  
İ”r
.
	`W¿pf
(
”r
, "çedØg‘h£rviû d‘as: %v", 
svcObj
.
Name
)

494  
n


495 
	}
}

497 
func
 
	$‹¬downJivaCompÚ’ts
(
ü
 *
jv
.
JivaVŞume
è
”rÜ
 {

498  
n


499 
	}
}

501 
func
 
	$g‘VŞumeStus
(
addr
 
¡ršg
è
”rÜ
 {

502  
n


503 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/env/v1alpha1/env.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

27 
ty³
 
ENVKey
 
¡ršg


31 
KubeCÚfig
 
	gENVKey
 = "OPENEBS_IO_KUBE_CONFIG"

34 
KubeMa¡”
 
ENVKey
 = "OPENEBS_IO_K8S_MASTER"

38 
O³nEBSEÇbËAÇlytics
 
ENVKey
 = "OPENEBS_IO_ENABLE_ANALYTICS"

41 
O³nEBSV”siÚ
 
ENVKey
 = "OPENEBS_IO_VERSION"

46 
O³nEBSName¥aû
 
ENVKey
 = "OPENEBS_NAMESPACE"

52 
O³nEBSMayaPodName
 
ENVKey
 = "OPENEBS_MAYA_POD_NAME"

58 
CSPCO³¿tÜPodName
 
ENVKey
 = "CSPC_OPERATOR_POD_NAME"

64 
O³nEBSS”viûAccouÁ
 
ENVKey
 = "OPENEBS_SERVICE_ACCOUNT"

85 
CASTem¶©eF—tu»G©eENVK
 
ENVKey
 = "OPENEBS_IO_CAS_TEMPLATE_FEATURE_GATE"

89 
CASTem¶©eToLi¡VŞumeENVK
 
ENVKey
 = "OPENEBS_IO_CAS_TEMPLATE_TO_LIST_VOLUME"

93 
CASTem¶©eToC»©eJivaVŞumeENVK
 
ENVKey
 = "OPENEBS_IO_JIVA_CAS_TEMPLATE_TO_CREATE_VOLUME"

97 
CASTem¶©eToR—dJivaVŞumeENVK
 
ENVKey
 = "OPENEBS_IO_JIVA_CAS_TEMPLATE_TO_READ_VOLUME"

101 
CASTem¶©eToD–‘eJivaVŞumeENVK
 
ENVKey
 = "OPENEBS_IO_JIVA_CAS_TEMPLATE_TO_DELETE_VOLUME"

105 
CASTem¶©eToC»©eCStÜVŞumeENVK
 
ENVKey
 = "OPENEBS_IO_CSTOR_CAS_TEMPLATE_TO_CREATE_VOLUME"

109 
CASTem¶©eToR—dCStÜVŞumeENVK
 
ENVKey
 = "OPENEBS_IO_CSTOR_CAS_TEMPLATE_TO_READ_VOLUME"

113 
CASTem¶©eToD–‘eCStÜVŞumeENVK
 
ENVKey
 = "OPENEBS_IO_CSTOR_CAS_TEMPLATE_TO_DELETE_VOLUME"

117 
CASTem¶©eToC»©ePoŞENVK
 
ENVKey
 = "OPENEBS_IO_CAS_TEMPLATE_TO_CREATE_POOL"

121 
CASTem¶©eToD–‘ePoŞENVK
 
ENVKey
 = "OPENEBS_IO_CAS_TEMPLATE_TO_DELETE_POOL"

125 
CASTem¶©eToLi¡CStÜSÇpshÙENVK
 
ENVKey
 = "OPENEBS_IO_CAS_TEMPLATE_TO_LIST_CSTOR_SNAPSHOT"

129 
CASTem¶©eToLi¡JivaSÇpshÙENVK
 
ENVKey
 = "OPENEBS_IO_CAS_TEMPLATE_TO_LIST_JIVA_SNAPSHOT"

133 
CASTem¶©eToC»©eJivaSÇpshÙENVK
 
ENVKey
 = "OPENEBS_IO_JIVA_CAS_TEMPLATE_TO_CREATE_SNAPSHOT"

137 
CASTem¶©eToR—dJivaSÇpshÙENVK
 
ENVKey
 = "OPENEBS_IO_JIVA_CAS_TEMPLATE_TO_READ_SNAPSHOT"

141 
CASTem¶©eToD–‘eJivaSÇpshÙENVK
 
ENVKey
 = "OPENEBS_IO_JIVA_CAS_TEMPLATE_TO_DELETE_SNAPSHOT"

145 
CASTem¶©eToC»©eCStÜSÇpshÙENVK
 
ENVKey
 = "OPENEBS_IO_CSTOR_CAS_TEMPLATE_TO_CREATE_SNAPSHOT"

149 
CASTem¶©eToR—dCStÜSÇpshÙENVK
 
ENVKey
 = "OPENEBS_IO_CSTOR_CAS_TEMPLATE_TO_READ_SNAPSHOT"

153 
CASTem¶©eToD–‘eCStÜSÇpshÙENVK
 
ENVKey
 = "OPENEBS_IO_CSTOR_CAS_TEMPLATE_TO_DELETE_SNAPSHOT"

157 
CASTem¶©eToR—dVŞumeStsENVK
 
ENVKey
 = "OPENEBS_IO_CAS_TEMPLATE_TO_READ_CAS_VOLUME_STATS"

161 
CASTem¶©eToLi¡StÜagePoŞENVK
 
ENVKey
 = "OPENEBS_IO_CAS_TEMPLATE_TO_LIST_STORAGE_POOL"

165 
CASTem¶©eToR—dStÜagePoŞENVK
 
ENVKey
 = "OPENEBS_IO_CAS_TEMPLATE_TO_READ_STORAGE_POOL"

169 
ty³
 
EnvœÚm’tS‘‹r
 
	$func
(
’vKey
 
ENVKey
, 
v®ue
 
¡ršg
è(
”r
 
”rÜ
)

172 
ty³
 
EnvœÚm’tG‘‹r
 
	$func
(
’vKey
 
ENVKey
è(
v®ue
 
¡ršg
)

175 
ty³
 
EnvœÚm’tLookup
 
	$func
(
’vKey
 
ENVKey
è(
v®ue
 
¡ršg
, 
´e£Á
 
boŞ
)

181 
func
 
	$S‘
(
’vKey
 
ENVKey
, 
v®ue
 
¡ršg
è(
”r
 
”rÜ
) {

182  
os
.
	`S‘’v
(
	`¡ršg
(
’vKey
), 
v®ue
)

183 
	}
}

189 
func
 
	$G‘
(
’vKey
 
ENVKey
è(
v®ue
 
¡ršg
) {

190  
	`g‘Env
(
	`¡ršg
(
’vKey
))

191 
	}
}

197 
func
 
	$G‘OrDeçuÉ
(
e
 
ENVKey
, 
deçuÉV®ue
 
¡ršg
è(
v®ue
 string) {

198 
’vV®ue
 :ğ
	`G‘
(
e
)

199 
	`Ën
(
’vV®ue
) == 0 {

201  
deçuÉV®ue


203  
’vV®ue


205 
	}
}

211 
func
 
	$Lookup
(
’vKey
 
ENVKey
è(
v®ue
 
¡ršg
, 
´e£Á
 
boŞ
) {

212  
	`lookupEnv
(
	`¡ršg
(
’vKey
))

213 
	}
}

219 
func
 
	$Truthy
(
’vKey
 
ENVKey
è(
Œuth
 
boŞ
) {

220 
v
, 
found
 :ğ
	`Lookup
(
’vKey
)

221 !
found
 {

224 
Œuth
, 
_
 = 
¡rcÚv
.
	`P¬£BoŞ
(
v
)

226 
	}
}

231 
func
 
	$LookupOrF®£
(
’vKey
 
ENVKey
è
¡ršg
 {

232 
v®
, 
´e£Á
 :ğ
	`Lookup
(
’vKey
)

233 !
´e£Á
 {

236  
¡ršgs
.
	`TrimS·û
(
v®
)

237 
	}
}

240 
func
 
	$g‘Env
(
’vKey
 
¡ršg
è(
v®ue
 string) {

241  
¡ršgs
.
	`TrimS·û
(
os
.
	`G‘’v
(
’vKey
))

242 
	}
}

245 
func
 
	$lookupEnv
(
’vKey
 
¡ršg
è(
v®ue
 sŒšg, 
´e£Á
 
boŞ
) {

246 
v®ue
, 
´e£Á
 = 
os
.
	`LookupEnv
(
’vKey
)

247 
v®ue
 = 
¡ršgs
.
	`TrimS·û
(value)

249 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/env/v1alpha1/env_test.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

25 
func
 
	$Te¡LookEnv
(
t
 *
‹¡šg
.
T
) {

26 
‹¡Ca£s
 :ğ
m­
[
¡ršg
]struct {

27 
key
 
ENVKey


28 
v®ue
 
¡ršg


29 
ex³ùV®ue
 
¡ršg


32 
key
: "",

33 
v®ue
: "",

34 
ex³ùV®ue
: "false",

37 
key
: "_MY_PRESENT_TEST_KEY_",

38 
v®ue
: "value1",

39 
ex³ùV®ue
: "value1",

42 
key
: "_MY_PRESENT_TEST_KEY_W_EMPTY_VALUE",

43 
v®ue
: "",

44 
ex³ùV®ue
: "",

48 
k
, 
v
 :ğ
¿nge
 
‹¡Ca£s
 {

49 
t
.
	`Run
(
k
, 
	`func
Ñ *
‹¡šg
.
T
) {

50 
os
.
	`S‘’v
(
	`¡ršg
(
v
.
key
), v.
v®ue
)

51 
aùu®V®ue
 :ğ
	`LookupOrF®£
(
v
.
key
)

52 !
»æeù
.
	`D“pEqu®
(
aùu®V®ue
, 
v
.
ex³ùV®ue
) {

53 
t
.
	`E¼Üf
("ex³ùed % gÙ %s", 
v
.
ex³ùV®ue
, 
aùu®V®ue
)

55 
os
.
	`Un£‹nv
(
	`¡ršg
(
v
.
key
))

58 
	}
}

60 
func
 
	$Te¡CASTem¶©eF—tu»G©e
(
t
 *
‹¡šg
.
T
) {

62 
ÿ£s
 :ğ
m­
[
¡ršg
]struct {

63 
key
, 
v®ue
 
¡ršg


64 
ex³ùV®ue
 
boŞ


67 
key
: 
	`¡ršg
(
CASTem¶©eF—tu»G©eENVK
),

68 
v®ue
: "on",

69 
ex³ùV®ue
: 
çl£
,

72 
key
: "",

73 
v®ue
: "",

74 
ex³ùV®ue
: 
çl£
,

77 
key
: 
	`¡ršg
(
CASTem¶©eF—tu»G©eENVK
),

78 
v®ue
: "",

79 
ex³ùV®ue
: 
çl£
,

82 
key
: 
	`¡ršg
(
CASTem¶©eF—tu»G©eENVK
),

83 
v®ue
: "true",

84 
ex³ùV®ue
: 
Œue
,

88 
Çme
, 
tc
 :ğ
¿nge
 
ÿ£s
 {

89 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

90 
os
.
	`S‘’v
(
tc
.
key
,c.
v®ue
)

91 
deãr
 
os
.
	`Un£‹nv
(
tc
.
key
)

93 
ã©u»
 :ğ
	`Truthy
(
CASTem¶©eF—tu»G©eENVK
)

94 !
»æeù
.
	`D“pEqu®
(
ã©u»
, 
tc
.
ex³ùV®ue
) {

95 
t
.
	`E¼Üf
("Ex³ùed %v, gÙ %v", 
tc
.
ex³ùV®ue
, 
ã©u»
)

99 
	}
}

101 
func
 
	$Te¡g‘Env
(
t
 *
‹¡šg
.
T
) {

102 
‹¡Ca£s
 :ğ
m­
[
¡ršg
]struct {

103 
key
 
¡ršg


104 
v®ue
 
¡ršg


105 
ex³ùV®ue
 
¡ršg


108 
key
: "",

109 
v®ue
: "",

110 
ex³ùV®ue
: "",

113 
key
: "_MY_PRESENT_TEST_KEY_",

114 
v®ue
: "value1",

115 
ex³ùV®ue
: "value1",

118 
key
: "_MY_PRESENT_TEST_KEY_W_EMPTY_VALUE",

119 
v®ue
: "",

120 
ex³ùV®ue
: "",

123 
k
, 
v
 :ğ
¿nge
 
‹¡Ca£s
 {

124 
t
.
	`Run
(
k
, 
	`func
Ñ *
‹¡šg
.
T
) {

125 
os
.
	`S‘’v
(
v
.
key
, v.
v®ue
)

126 
aùu®V®ue
 :ğ
	`G‘
(
	`ENVKey
(
v
.
key
))

127 !
»æeù
.
	`D“pEqu®
(
aùu®V®ue
, 
v
.
ex³ùV®ue
) {

128 
t
.
	`E¼Üf
("ex³ùed % gÙ %s", 
v
.
ex³ùV®ue
, 
aùu®V®ue
)

130 
os
.
	`Un£‹nv
(
v
.
key
)

133 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1/errors.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

25 
func
 
	$New
(
mes§ge
 
¡ršg
è
”rÜ
 {

26  &
”r
{

27 
´efix
: 
¡ackT¿ûMes§geP»fix
,

28 
msg
: 
mes§ge
,

29 
¡ack
: 
	`ÿÎ”s
(),

31 
	}
}

36 
func
 
E¼Üf
(
fÜm©
 
¡ršg
, 
¬gs
 ...
š‹rçû
{}è
	g”rÜ
 {

37  &
	g”r
{

38 
	g´efix
: 
¡ackT¿ûMes§geP»fix
,

39 
	gmsg
: 
fmt
.
S´štf
(
fÜm©
, 
¬gs
...),

40 
	g¡ack
: 
ÿÎ”s
(),

46 
func
 
	$W¿p
(
”r
 
”rÜ
, 
mes§ge
 
¡ršg
)ƒrror {

47 
”r
 =ğ
n
 {

48  
n


50  &
w¿µ”
{
w¿pE¼ÜMes§geP»fix
, 
mes§ge
, 
”r
}

51 
	}
}

55 
func
 
W¿pf
(
”r
 
”rÜ
, 
fÜm©
 
¡ršg
, 
¬gs
 ...
š‹rçû
{}è
	g”rÜ
 {

56 
	g”r
 =ğ
n
 {

57  
n


59  &
w¿µ”
{
w¿pE¼ÜMes§geP»fix
, 
fmt
.
S´štf
(
fÜm©
, 
¬gs
...), 
”r
}

64 
func
 
	$W™hSck
(
”r
 
”rÜ
)ƒrror {

65 
”r
 =ğ
n
 {

66  
n


68  &
w™hSck
{

69 
¡ackT¿ûMes§geP»fix
,

70 
”r
,

71 
	`ÿÎ”s
(),

73 
	}
}

86 
func
 
	$Cau£
(
”r
 
”rÜ
)ƒrror {

87 
ty³
 
ÿu£r
 
š‹rçû
 {

88 
	`Cau£
(è
”rÜ


91 
”r
 !ğ
n
 {

92 
ÿu£
, 
ok
 :ğ
”r
.(
ÿu£r
)

93 !
ok
 {

96 
”r
 = 
ÿu£
.
	`Cau£
()

98  
”r


99 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1/errors_test.go

17 
·ckage
 
	gv1®pha1


	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1/types.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

27 
w¿pE¼ÜMes§geP»fix
 
	g¡ršg
 = " -- "

28 
li¡E¼ÜMes§geP»fix
 
¡ršg
 = " - "

29 
¡ackT¿ûMes§geP»fix
 
¡ršg
 = " "

33 
ty³
 
¡ack
 []
ušŒ


36 
func
 
ÿÎ”s
(è*
¡ack
 {

37 cÚ¡ 
d•th
 = 32

38 
v¬
 
pcs
 [
d•th
]
ušŒ


39 
n
 :ğ
ruÁime
.
C®Ërs
(3, 
pcs
[:])

40 
v¬
 
¡
 
¡ack
 = 
pcs
[0:
n
]

41  &
¡


45 
ty³
 
”r
 struct {

46 
´efix
 
¡ršg


47 
msg
 
¡ršg


48 *
¡ack


52 
	$func
 (
e
 *
”r
è
	$E¼Ü
(è
¡ršg
 {  
e
.
msg
 
	}
}

55 
	$func
 (
e
 *
”r
è
	$FÜm©
(
s
 
fmt
.
S‹
, 
v”b
 
ruÃ
) {

56 
mes§ge
 :ğ
w¿pE¼ÜMes§geP»fix
 + 
e
.
msg


57 
v”b
 {

59 
s
.
	`FÏg
('+') {

60 
fmt
.
	`F´št
(
s
, 
mes§ge
)

61 
i
, 
pc
 :ğ
¿nge
 *
e
.
¡ack
 {

62 
i
 > 0 {

65 
f
 :ğ
”rÜs
.
	`F¿me
(
pc
)

66 
fmt
.
	`F´štf
(
s
, "\n%s%+v", 
e
.
´efix
, 
f
)

70 
çÎthrough


72 
fmt
.
	`F´št
(
s
, 
mes§ge
)

74 
	}
}

77 
ty³
 
w¿µ”
 struct {

78 
´efix
 
¡ršg


79 
msg
 
¡ršg


80 
	m”rÜ


84 
	$func
 (
w
 *
w¿µ”
è
	$E¼Ü
(è
¡ršg
 {  
w
.
msg
 
	}
}

87 
	$func
 (
w
 *
w¿µ”
è
	$Cau£
(è
”rÜ
 {  
w
.”rÜ 
	}
}

90 
	$func
 (
w
 *
w¿µ”
è
	$FÜm©
(
s
 
fmt
.
S‹
, 
v”b
 
ruÃ
) {

91 
v”b
 {

93 
s
.
	`FÏg
('+') {

94 
fmt
.
	`F´štf
(
s
, "%+v\n", 
w
.
”rÜ
)

95 
fmt
.
	`F´št
(
s
, 
w
.
´efix
+w.
msg
)

98 
çÎthrough


100 
fmt
.
	`F´štf
(
s
, "%s\n", 
w
.
”rÜ
)

101 
fmt
.
	`F´št
(
s
, 
w
.
´efix
+w.
msg
)

103 
	}
}

106 
ty³
 
w™hSck
 struct {

107 
´efix
 
¡ršg


108 
”rÜ


109 *
	m¡ack


113 
	$func
 (
ws
 *
w™hSck
è
	$FÜm©
(
s
 
fmt
.
S‹
, 
v”b
 
ruÃ
) {

114 
mes§ge
 :ğ
w¿pE¼ÜMes§geP»fix
 + 
fmt
.
	`S´štf
("%s", 
ws
.
”rÜ
)

115 
v”b
 {

117 
s
.
	`FÏg
('+') {

118 
fmt
.
	`F´št
(
s
, 
mes§ge
)

119 
i
, 
pc
 :ğ
¿nge
 *
ws
.
¡ack
 {

120 
i
 > 0 {

123 
f
 :ğ
”rÜs
.
	`F¿me
(
pc
)

124 
fmt
.
	`F´štf
(
s
, "\n%s%+v", 
ws
.
´efix
, 
f
)

128 
çÎthrough


130 
fmt
.
	`F´št
(
s
, 
mes§ge
)

132 
	}
}

135 
	$func
 (
ws
 *
w™hSck
è
	$Cau£
(è
”rÜ
 {  
ws
.”rÜ 
	}
}

139 
ty³
 
E¼ÜLi¡
 struct {

140 
	mE¼Üs
 []
”rÜ


141 
msg
 
	m¡ršg


145 
	$func
 (
–
 *
E¼ÜLi¡
è
	$E¼Ü
(è
¡ršg
 {

146 
mes§ge
 := ""

147 
_
, 
”r
 :ğ
¿nge
 
–
.
E¼Üs
 {

148 
mes§ge
 +ğ
”r
.
	`E¼Ü
() + ":"

150 
–
.
msg
 = 
mes§ge


151  
mes§ge


152 
	}
}

155 
	$func
 (
–
 *
E¼ÜLi¡
è
	$FÜm©
(
s
 
fmt
.
S‹
, 
v”b
 
ruÃ
) {

156 
mes§ge
 := ""

157 
_
, 
”r
 :ğ
¿nge
 
–
.
E¼Üs
 {

158 
mes§ge
 +ğ"\n" + 
li¡E¼ÜMes§geP»fix
 + 
”r
.
	`E¼Ü
()

160 
fmt
.
	`F´št
(
s
, 
mes§ge
)

162 
	}
}

166 
	$func
 (
–
 *
E¼ÜLi¡
è
	$W™hSck
(
mes§ge
 
¡ršg
è
”rÜ
 {

167 
–
 =ğ
n
 {

168  
n


170  &
w™hSck
{

171 
¡ackT¿ûMes§geP»fix
,

172 
	`W¿p
(
–
, 
mes§ge
),

173 
	`ÿÎ”s
(),

175 
	}
}

179 
	$func
 (
–
 *
E¼ÜLi¡
è
	`W™hSckf
(
fÜm©
 
¡ršg
, 
¬gs
 ...
š‹rçû
{
	}
}è
	g”rÜ
 {

180 
	g–
 =ğ
n
 {

181  
n


183  &
w™hSck
{

184 
¡ackT¿ûMes§geP»fix
,

185 
W¿pf
(
–
, 
fÜm©
, 
¬gs
...),

186 
ÿÎ”s
(),

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/jiva/jiva.go

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/client/v1alpha1/client.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

23 
’v
 "github.com/utkarshmani1997/jiva-operator/pkg/env/v1alpha1"

34 
K8sMa¡”IPEnvœÚm’tKey
 
	g’v
.
	gENVKey
 = "OPENEBS_IO_K8S_MASTER"

38 
KubeCÚfigEnvœÚm’tKey
 
’v
.
ENVKey
 = "OPENEBS_IO_KUBE_CONFIG"

46 
ty³
 
g‘InClu¡”CÚfigFn
 
func
(è(*
»¡
.
CÚfig
, 
	g”rÜ
)

54 
ty³
 
budCÚfigFromFÏgsFn
 
func
(
¡ršg
, sŒšgè(*
	g»¡
.
	gCÚfig
, 
	g”rÜ
)

62 
ty³
 
g‘KubeMa¡”IPFromENVFn
 
	$func
(
’v
.
ENVKey
è
¡ršg


70 
ty³
 
g‘KubeCÚfigP©hFromENVFn
 
	$func
(
’v
.
ENVKey
è
¡ršg


77 
ty³
 
g‘KubeDyÇmicCl›ÁFn
 
	$func
(*
»¡
.
CÚfig
è(
dyÇmic
.
IÁ”çû
, 
”rÜ
)

84 
ty³
 
g‘KubeCl›Á£tFn
 
	`func
(*
»¡
.
CÚfig
è(*
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
)

87 
ty³
 
Cl›Á
 struct {

90 
IsInClu¡”
 
boŞ


93 
KubeCÚfigP©h
 
¡ršg


96 
g‘InClu¡”CÚfig
 
g‘InClu¡”CÚfigFn


100 
budCÚfigFromFÏgs
 
budCÚfigFromFÏgsFn


103 
g‘KubeCl›Á£t
 
g‘KubeCl›Á£tFn


106 
g‘KubeDyÇmicCl›Á
 
g‘KubeDyÇmicCl›ÁFn


110 
g‘KubeMa¡”IPFromENV
 
g‘KubeMa¡”IPFromENVFn


114 
g‘KubeCÚfigP©hFromENV
 
g‘KubeCÚfigP©hFromENVFn


125 
ty³
 
O±iÚFn
 
	$func
(*
Cl›Á
)

128 
func
 
	`New
(
İts
 ...
O±iÚFn
è*
Cl›Á
 {

129 
c
 :ğ&
Cl›Á
{}

130 
_
, 
o
 :ğ
¿nge
 
İts
 {

131 
	`o
(
c
)

134 
	`w™hDeçuÉs
(
c
)

135  
c


136 
	}
}

138 
	$v¬
 (

139 
š¡ªû
 *
Cl›Á


140 
Úû
 
sync
.
Onû


145 
func
 
	`In¡ªû
(
İts
 ...
O±iÚFn
è*
Cl›Á
 {

146 
Úû
.
	`Do
(
	`func
() {

147 
š¡ªû
 = 
	`New
(
İts
...)

150  
š¡ªû


151 
	}
}

155 
func
 
	$w™hDeçuÉs
(
c
 *
Cl›Á
) {

156 
_
, 
def
 :ğ
¿nge
 
deçuÉFns
 {

157 
	`def
(
c
)

159 
	}
}

161 
v¬
 
deçuÉFns
 = []
O±iÚFn
{

162 
w™hDeçuÉG‘InClu¡”CÚfigFn
(),

163 
w™hDeçuÉBudCÚfigFromFÏgsFn
(),

164 
w™hDeçuÉG‘KubeCl›Á£tFn
(),

165 
w™hDeçuÉG‘KubeDyÇmicCl›ÁFn
(),

166 
w™hDeçuÉG‘KubeMa¡”IPFromENVFn
(),

167 
w™hDeçuÉG‘KubeCÚfigP©hFromENVFn
(),

172 
func
 
	$w™hDeçuÉG‘InClu¡”CÚfigFn
(è
O±iÚFn
 {

173  
	`func
(
c
 *
Cl›Á
) {

174 
c
.
g‘InClu¡”CÚfig
 =ğ
n
 {

175 
c
.
g‘InClu¡”CÚfig
 = 
»¡
.
InClu¡”CÚfig


178 
	}
}

182 
func
 
	$w™hDeçuÉBudCÚfigFromFÏgsFn
(è
O±iÚFn
 {

183  
	`func
(
c
 *
Cl›Á
) {

184 
c
.
budCÚfigFromFÏgs
 =ğ
n
 {

185 
c
.
budCÚfigFromFÏgs
 = 
ş›Ácmd
.
BudCÚfigFromFÏgs


188 
	}
}

192 
func
 
	$w™hDeçuÉG‘KubeCl›Á£tFn
(è
O±iÚFn
 {

193  
	`func
(
c
 *
Cl›Á
) {

194 
c
.
g‘KubeCl›Á£t
 =ğ
n
 {

195 
c
.
g‘KubeCl›Á£t
 = 
kub”Ã‹s
.
NewFÜCÚfig


198 
	}
}

202 
func
 
	$w™hDeçuÉG‘KubeDyÇmicCl›ÁFn
(è
O±iÚFn
 {

203  
	`func
(
c
 *
Cl›Á
) {

204 
c
.
g‘KubeDyÇmicCl›Á
 =ğ
n
 {

205 
c
.
g‘KubeDyÇmicCl›Á
 = 
dyÇmic
.
NewFÜCÚfig


208 
	}
}

213 
func
 
	$w™hDeçuÉG‘KubeMa¡”IPFromENVFn
(è
O±iÚFn
 {

214  
	`func
(
c
 *
Cl›Á
) {

215 
c
.
g‘KubeMa¡”IPFromENV
 =ğ
n
 {

216 
c
.
g‘KubeMa¡”IPFromENV
 = 
’v
.
G‘


219 
	}
}

223 
func
 
	$w™hDeçuÉG‘KubeCÚfigP©hFromENVFn
(è
O±iÚFn
 {

224  
	`func
(
c
 *
Cl›Á
) {

225 
c
.
g‘KubeCÚfigP©hFromENV
 =ğ
n
 {

226 
c
.
g‘KubeCÚfigP©hFromENV
 = 
’v
.
G‘


229 
	}
}

232 
func
 
	$InClu¡”
(è
O±iÚFn
 {

233  
	`func
(
c
 *
Cl›Á
) {

234 
c
.
IsInClu¡”
 = 
Œue


236 
	}
}

240 
func
 
	$W™hKubeCÚfigP©h
(
kubeCÚfigP©h
 
¡ršg
è
O±iÚFn
 {

241  
	`func
(
c
 *
Cl›Á
) {

242 
c
.
KubeCÚfigP©h
 = 
kubeCÚfigP©h


244 
	}
}

248 
func
 
G‘CÚfig
(
c
 *
Cl›Á
è(*
	g»¡
.
	gCÚfig
, 
	g”rÜ
) {

249 
	gc
 =ğ
n
 {

250  
n
, 
”rÜs
.
New
("failedo get kubernetes config:‚il client…rovided")

253  
c
.
G‘CÚfigFÜP©hOrDœeù
()

258 
	$func
 (
c
 *
Cl›Á
è
	$G‘CÚfigFÜP©hOrDœeù
(è(
cÚfig
 *
»¡
.
CÚfig
, 
”r
 
”rÜ
) {

259 
c
.
KubeCÚfigP©h
 != "" {

260  
c
.
	`CÚfigFÜP©h
(c.
KubeCÚfigP©h
)

263  
c
.
	`CÚfig
()

264 
	}
}

268 
	$func
 (
c
 *
Cl›Á
è
	$CÚfigFÜP©h
(
kubeCÚfigP©h
 
¡ršg
è(
cÚfig
 *
»¡
.
CÚfig
, 
”r
 
”rÜ
) {

269  
c
.
	`budCÚfigFromFÏgs
("", 
kubeCÚfigP©h
)

270 
	}
}

274 
	$func
 (
c
 *
Cl›Á
è
	$CÚfig
(è(
cÚfig
 *
»¡
.
CÚfig
, 
”r
 
”rÜ
) {

276 
c
.
IsInClu¡”
 {

277  
c
.
	`g‘InClu¡”CÚfig
()

281 
¡ršgs
.
	`TrimS·û
(
c
.
	`g‘KubeMa¡”IPFromENV
(
K8sMa¡”IPEnvœÚm’tKey
)) != "" ||

282 
¡ršgs
.
	`TrimS·û
(
c
.
	`g‘KubeCÚfigP©hFromENV
(
KubeCÚfigEnvœÚm’tKey
)) != "" {

283  
c
.
	`g‘CÚfigFromENV
()

287  
c
.
	`g‘InClu¡”CÚfig
()

288 
	}
}

290 
	$func
 (
c
 *
Cl›Á
è
	$g‘CÚfigFromENV
(è(
cÚfig
 *
»¡
.
CÚfig
, 
”r
 
”rÜ
) {

291 
k8sMa¡”
 :ğ
c
.
	`g‘KubeMa¡”IPFromENV
(
K8sMa¡”IPEnvœÚm’tKey
)

292 
kubeCÚfig
 :ğ
c
.
	`g‘KubeCÚfigP©hFromENV
(
KubeCÚfigEnvœÚm’tKey
)

294 
¡ršgs
.
	`TrimS·û
(
k8sMa¡”
) == "" &&

295 
¡ršgs
.
	`TrimS·û
(
kubeCÚfig
) == "" {

296  
n
, 
”rÜs
.
	`E¼Üf
(

298 
K8sMa¡”IPEnvœÚm’tKey
,

299 
KubeCÚfigEnvœÚm’tKey
,

303  
c
.
	`budCÚfigFromFÏgs
(
k8sMa¡”
, 
kubeCÚfig
)

304 
	}
}

307 
	$func
 (
c
 *
Cl›Á
è
	`Cl›Á£t
(è(*
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
) {

308 
cÚfig
, 
”r
 :ğ
c
.
	`G‘CÚfigFÜP©hOrDœeù
()

309 
”r
 !ğ
n
 {

310  
n
, 
”rÜs
.
	`W¿pf
(
”r
,

312 
c
.
IsInClu¡”
,

313 
c
.
KubeCÚfigP©h
,

317  
c
.
	`g‘KubeCl›Á£t
(
cÚfig
)

318 
	}
}

322 
	$func
 (
c
 *
Cl›Á
è
	$DyÇmic
(è(
dyÇmic
.
IÁ”çû
, 
”rÜ
) {

323 
cÚfig
, 
”r
 :ğ
c
.
	`G‘CÚfigFÜP©hOrDœeù
()

324 
”r
 !ğ
n
 {

325  
n
, 
”rÜs
.
	`W¿p
(
”r
, "failedo get dynamic client")

328  
c
.
	`g‘KubeDyÇmicCl›Á
(
cÚfig
)

329 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/client/v1alpha1/client_test.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

22 
’v
 "github.com/utkarshmani1997/jiva-operator/pkg/env/v1alpha1"

29 
func
 
çkeG‘Cl›Á£tOk
(
c
 *
»¡
.
CÚfig
è(*
	gkub”Ã‹s
.
	gCl›Á£t
, 
	g”rÜ
) {

30  &
	gkub”Ã‹s
.
	gCl›Á£t
{}, 
	gn


33 
func
 
çkeG‘Cl›Á£tE¼
(
c
 *
»¡
.
CÚfig
è(*
	gkub”Ã‹s
.
	gCl›Á£t
, 
	g”rÜ
) {

34  
	gn
, 
	g”rÜs
.
New
("fakeƒrror")

37 
func
 
çkeInClu¡”CÚfigOk
(è(*
	g»¡
.
	gCÚfig
, 
	g”rÜ
) {

38  &
	g»¡
.
	gCÚfig
{}, 
	gn


41 
func
 
çkeInClu¡”CÚfigE¼
(è(*
	g»¡
.
	gCÚfig
, 
	g”rÜ
) {

42  
	gn
, 
	g”rÜs
.
New
("fakeƒrror")

45 
func
 
çkeBudCÚfigFromFÏgsOk
(
kubema¡”
 
¡ršg
, 
kubecÚfig
 sŒšgè(*
	g»¡
.
	gCÚfig
, 
	g”rÜ
) {

46  &
	g»¡
.
	gCÚfig
{}, 
	gn


49 
func
 
çkeBudCÚfigFromFÏgsE¼
(
kubema¡”
 
¡ršg
, 
kubecÚfig
 sŒšgè(*
	g»¡
.
	gCÚfig
, 
	g”rÜ
) {

50  
	gn
, 
	g”rÜs
.
New
("fakeƒrror")

53 
func
 
	$çkeG‘KubeCÚfigP©hOk
(
e
 
’v
.
ENVKey
è
¡ršg
 {

55 
	}
}

57 
func
 
	$çkeG‘KubeCÚfigP©hN
(
e
 
’v
.
ENVKey
è
¡ršg
 {

59 
	}
}

61 
func
 
	$çkeG‘KubeMa¡”IPOk
(
e
 
’v
.
ENVKey
è
¡ršg
 {

63 
	}
}

65 
func
 
	$çkeG‘KubeMa¡”IPN
(
e
 
’v
.
ENVKey
è
¡ršg
 {

67 
	}
}

69 
func
 
	$çkeG‘DyÇmicCl›ÁS‘Ok
(
c
 *
»¡
.
CÚfig
è(
dyÇmic
.
IÁ”çû
, 
”rÜ
) {

70  
dyÇmic
.
	`NewFÜCÚfig
(
c
)

71 
	}
}

73 
func
 
	$çkeG‘DyÇmicCl›ÁS‘N
(
c
 *
»¡
.
CÚfig
è(
dyÇmic
.
IÁ”çû
, 
”rÜ
) {

74  
n
,‚il

75 
	}
}

77 
func
 
	$çkeG‘DyÇmicCl›ÁS‘E¼
(
c
 *
»¡
.
CÚfig
è(
dyÇmic
.
IÁ”çû
, 
”rÜ
) {

78  
n
, 
”rÜs
.
	`New
("fakeƒrror")

79 
	}
}

81 
func
 
	$Te¡NewInClu¡”
(
t
 *
‹¡šg
.
T
) {

82 
c
 :ğ
	`New
(
	`InClu¡”
())

83 !
c
.
IsInClu¡”
 {

84 
t
.
	`F©®f
("‹¡ faed:ƒx³ùed IsInClu¡”‡ 'Œue'‡ùu® '%t'", 
c
.
IsInClu¡”
)

86 
	}
}

88 
func
 
	$Te¡CÚfig
(
t
 *
‹¡šg
.
T
) {

89 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

90 
isInClu¡”
 
boŞ


91 
kubeCÚfigP©h
 
¡ršg


92 
g‘InClu¡”CÚfig
 
g‘InClu¡”CÚfigFn


93 
g‘KubeMa¡”IP
 
g‘KubeMa¡”IPFromENVFn


94 
g‘KubeCÚfigP©h
 
g‘KubeCÚfigP©hFromENVFn


95 
g‘CÚfigFromENV
 
budCÚfigFromFÏgsFn


96 
isE¼
 
boŞ


98 "t1": {
Œue
, "", 
çkeInClu¡”CÚfigOk
, 
n
,‚,‚, 
çl£
},

99 "t2": {
Œue
, "", 
çkeInClu¡”CÚfigE¼
, 
n
,‚il,‚il,rue},

100 "t3": {
çl£
, "", 
çkeInClu¡”CÚfigE¼
, 
çkeG‘KubeMa¡”IPN
, 
çkeG‘KubeCÚfigP©hN
, 
n
, 
Œue
},

101 "t4": {
çl£
, "", 
çkeInClu¡”CÚfigOk
, 
çkeG‘KubeMa¡”IPN
, 
çkeG‘KubeCÚfigP©hN
, 
n
, false},

102 "t5": {
çl£
, "çkeKubeCÚfigP©h", 
n
, 
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hN
, 
çkeBudCÚfigFromFÏgsOk
, false},

103 "t6": {
çl£
, "", 
n
, 
çkeG‘KubeMa¡”IPN
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsOk
, false},

104 "t7": {
çl£
, "", 
n
, 
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsOk
, false},

105 "t8": {
çl£
, "çkeKubeCÚfigP©h", 
n
, 
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsE¼
, 
Œue
},

106 "t9": {
çl£
, "çkeKubeCÚfig·th", 
n
, 
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsOk
, false},

108 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

109 
Çme
, 
mock
 :=‚ame, mock

110 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

111 
c
 :ğ&
Cl›Á
{

112 
IsInClu¡”
: 
mock
.
isInClu¡”
,

113 
KubeCÚfigP©h
: 
mock
.
kubeCÚfigP©h
,

114 
g‘InClu¡”CÚfig
: 
mock
.getInClusterConfig,

115 
g‘KubeMa¡”IPFromENV
: 
mock
.
g‘KubeMa¡”IP
,

116 
g‘KubeCÚfigP©hFromENV
: 
mock
.
g‘KubeCÚfigP©h
,

117 
budCÚfigFromFÏgs
: 
mock
.
g‘CÚfigFromENV
,

119 
_
, 
”r
 :ğ
c
.
	`CÚfig
()

120 
mock
.
isE¼
 && 
”r
 =ğ
n
 {

121 
t
.
	`F©®f
("‹¡ '%s' faed:ƒx³ùed‚Ø”rÜ‡ùu® '%s'", 
Çme
, 
”r
)

125 
	}
}

127 
func
 
	$Te¡G‘CÚfigFromENV
(
t
 *
‹¡šg
.
T
) {

128 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

129 
g‘KubeMa¡”IP
 
g‘KubeMa¡”IPFromENVFn


130 
g‘KubeCÚfigP©h
 
g‘KubeCÚfigP©hFromENVFn


131 
g‘CÚfigFromENV
 
budCÚfigFromFÏgsFn


132 
isE¼
 
boŞ


134 "t1": {
çkeG‘KubeMa¡”IPN
, 
çkeG‘KubeCÚfigP©hN
, 
n
, 
Œue
},

135 "t2": {
çkeG‘KubeMa¡”IPN
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsOk
, 
çl£
},

136 "t3": {
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hN
, 
çkeBudCÚfigFromFÏgsOk
, 
çl£
},

137 "t4": {
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsOk
, 
çl£
},

138 "t5": {
çkeG‘KubeMa¡”IPN
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsE¼
, 
Œue
},

139 "t6": {
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hN
, 
çkeBudCÚfigFromFÏgsE¼
, 
Œue
},

140 "t7": {
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsE¼
, 
Œue
},

142 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

143 
Çme
, 
mock
 :=‚ame, mock

144 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

145 
c
 :ğ&
Cl›Á
{

146 
g‘KubeMa¡”IPFromENV
: 
mock
.
g‘KubeMa¡”IP
,

147 
g‘KubeCÚfigP©hFromENV
: 
mock
.
g‘KubeCÚfigP©h
,

148 
budCÚfigFromFÏgs
: 
mock
.
g‘CÚfigFromENV
,

150 
_
, 
”r
 :ğ
c
.
	`g‘CÚfigFromENV
()

151 
mock
.
isE¼
 && 
”r
 =ğ
n
 {

152 
t
.
	`F©®f
("‹¡ '%s' faed:ƒx³ùedƒ¼Ü‡ùu®‚Ø”rÜ", 
Çme
)

154 !
mock
.
isE¼
 && 
”r
 !ğ
n
 {

155 
t
.
	`F©®f
("‹¡ '%s' faed:ƒx³ùed‚Ø”rÜ‡ùu® '%s'", 
Çme
, 
”r
)

159 
	}
}

161 
func
 
	$Te¡G‘CÚfigFromP©hOrDœeù
(
t
 *
‹¡šg
.
T
) {

162 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

163 
kubeCÚfigP©h
 
¡ršg


164 
g‘CÚfigFromFÏgs
 
budCÚfigFromFÏgsFn


165 
g‘InClu¡”CÚfig
 
g‘InClu¡”CÚfigFn


166 
isE¼
 
boŞ


168 "T1": {"", 
çkeBudCÚfigFromFÏgsE¼
, 
çkeInClu¡”CÚfigOk
, 
çl£
},

169 "T2": {"çke-·th", 
çkeBudCÚfigFromFÏgsOk
, 
çkeInClu¡”CÚfigE¼
, 
çl£
},

170 "T3": {"çke-·th", 
çkeBudCÚfigFromFÏgsE¼
, 
çkeInClu¡”CÚfigOk
, 
Œue
},

171 "T4": {"", 
çkeBudCÚfigFromFÏgsOk
, 
çkeInClu¡”CÚfigE¼
, 
Œue
},

172 "T5": {"çke-·th", 
çkeBudCÚfigFromFÏgsE¼
, 
çkeInClu¡”CÚfigE¼
, 
Œue
},

174 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

175 
Çme
, 
mock
 :=‚ame, mock

176 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

177 
c
 :ğ&
Cl›Á
{

178 
KubeCÚfigP©h
: 
mock
.
kubeCÚfigP©h
,

179 
budCÚfigFromFÏgs
: 
mock
.
g‘CÚfigFromFÏgs
,

180 
g‘InClu¡”CÚfig
: 
mock
.getInClusterConfig,

181 
g‘KubeMa¡”IPFromENV
: 
çkeG‘KubeMa¡”IPN
,

182 
g‘KubeCÚfigP©hFromENV
: 
çkeG‘KubeCÚfigP©hN
,

184 
_
, 
”r
 :ğ
c
.
	`G‘CÚfigFÜP©hOrDœeù
()

185 
mock
.
isE¼
 && 
”r
 =ğ
n
 {

186 
t
.
	`F©®f
("‹¡ '%s' faed:ƒx³ùedƒ¼Ü‡ùu®‚Ø”rÜ", 
Çme
)

188 !
mock
.
isE¼
 && 
”r
 !ğ
n
 {

189 
t
.
	`F©®f
("‹¡ '%s' faed:ƒx³ùed‚Ø”rÜ‡ùu® '%s'", 
Çme
, 
”r
)

193 
	}
}

195 
func
 
	$Te¡Cl›Á£t
(
t
 *
‹¡šg
.
T
) {

196 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

197 
isInClu¡”
 
boŞ


198 
kubeCÚfigP©h
 
¡ršg


199 
g‘InClu¡”CÚfig
 
g‘InClu¡”CÚfigFn


200 
g‘KubeMa¡”IP
 
g‘KubeMa¡”IPFromENVFn


201 
g‘KubeCÚfigP©h
 
g‘KubeCÚfigP©hFromENVFn


202 
g‘CÚfigFromENV
 
budCÚfigFromFÏgsFn


203 
g‘Kub”Ã‹sCl›Á£t
 
g‘KubeCl›Á£tFn


204 
isE¼
 
boŞ


206 "t10": {
Œue
, "", 
çkeInClu¡”CÚfigOk
, 
n
,‚,‚, 
çkeG‘Cl›Á£tOk
, 
çl£
},

207 "t11": {
Œue
, "", 
çkeInClu¡”CÚfigOk
, 
n
,‚,‚, 
çkeG‘Cl›Á£tE¼
,rue},

208 "t12": {
Œue
, "", 
çkeInClu¡”CÚfigE¼
, 
n
,‚,‚, 
çkeG‘Cl›Á£tOk
,rue},

210 "t21": {
çl£
, "", 
n
, 
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hN
, 
çkeBudCÚfigFromFÏgsOk
, 
çkeG‘Cl›Á£tOk
, false},

211 "t22": {
çl£
, "", 
n
, 
çkeG‘KubeMa¡”IPN
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsOk
, 
çkeG‘Cl›Á£tOk
, false},

212 "t23": {
çl£
, "", 
n
, 
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsOk
, 
çkeG‘Cl›Á£tOk
, false},

213 "t24": {
çl£
, "çke-·th", 
n
, 
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsE¼
, 
çkeG‘Cl›Á£tOk
, 
Œue
},

214 "t25": {
çl£
, "", 
n
, 
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsOk
, 
çkeG‘Cl›Á£tE¼
, 
Œue
},

215 "t26": {
çl£
, "çkeP©h", 
n
, 
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsE¼
, 
çkeG‘Cl›Á£tOk
, 
Œue
},

217 "t30": {
çl£
, "", 
çkeInClu¡”CÚfigOk
, 
çkeG‘KubeMa¡”IPN
, 
çkeG‘KubeCÚfigP©hN
, 
n
, 
çkeG‘Cl›Á£tOk
, false},

218 "t31": {
çl£
, "", 
çkeInClu¡”CÚfigOk
, 
çkeG‘KubeMa¡”IPN
, 
çkeG‘KubeCÚfigP©hN
, 
n
, 
çkeG‘Cl›Á£tE¼
, 
Œue
},

219 "t32": {
çl£
, "", 
çkeInClu¡”CÚfigE¼
, 
çkeG‘KubeMa¡”IPN
, 
çkeG‘KubeCÚfigP©hN
, 
n
,‚, 
Œue
},

220 "t33": {
çl£
, "çkeP©h", 
n
, 
çkeG‘KubeMa¡”IPOk
, 
çkeG‘KubeCÚfigP©hOk
, 
çkeBudCÚfigFromFÏgsOk
, 
çkeG‘Cl›Á£tOk
, false},

222 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

223 
Çme
, 
mock
 :=‚ame, mock

224 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

225 
c
 :ğ&
Cl›Á
{

226 
IsInClu¡”
: 
mock
.
isInClu¡”
,

227 
KubeCÚfigP©h
: 
mock
.
kubeCÚfigP©h
,

228 
g‘InClu¡”CÚfig
: 
mock
.getInClusterConfig,

229 
g‘KubeMa¡”IPFromENV
: 
mock
.
g‘KubeMa¡”IP
,

230 
g‘KubeCÚfigP©hFromENV
: 
mock
.
g‘KubeCÚfigP©h
,

231 
budCÚfigFromFÏgs
: 
mock
.
g‘CÚfigFromENV
,

232 
g‘KubeCl›Á£t
: 
mock
.
g‘Kub”Ã‹sCl›Á£t
,

234 
_
, 
”r
 :ğ
c
.
	`Cl›Á£t
()

235 
mock
.
isE¼
 && 
”r
 =ğ
n
 {

236 
t
.
	`F©®f
("‹¡ '%s' faed:ƒx³ùedƒ¼Ü‡ùu®‚Ø”rÜ", 
Çme
)

238 !
mock
.
isE¼
 && 
”r
 !ğ
n
 {

239 
t
.
	`F©®f
("‹¡ '%s' faed:ƒx³ùed‚Ø”rÜ‡ùu® '%s'", 
Çme
, 
”r
)

243 
	}
}

245 
func
 
	$Te¡DyÇmic
(
t
 *
‹¡šg
.
T
) {

246 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

247 
g‘KubeMa¡”IP
 
g‘KubeMa¡”IPFromENVFn


248 
g‘InClu¡”CÚfig
 
g‘InClu¡”CÚfigFn


249 
g‘Kub”Ã‹sDyÇmicCl›ÁS‘
 
g‘KubeDyÇmicCl›ÁFn


250 
kubeCÚfigP©h
 
¡ršg


251 
g‘CÚfigFromENV
 
budCÚfigFromFÏgsFn


252 
g‘KubeCÚfigP©h
 
g‘KubeCÚfigP©hFromENVFn


253 
isE¼
 
boŞ


255 "t1": {
çkeG‘KubeMa¡”IPN
, 
çkeInClu¡”CÚfigE¼
, 
çkeG‘DyÇmicCl›ÁS‘Ok
, "çke-·th", 
çkeBudCÚfigFromFÏgsOk
, 
çkeG‘KubeCÚfigP©hN
, 
çl£
},

256 "t2": {
çkeG‘KubeMa¡”IPN
, 
çkeInClu¡”CÚfigE¼
, 
çkeG‘DyÇmicCl›ÁS‘E¼
, "çke-·th", 
çkeBudCÚfigFromFÏgsOk
, 
çkeG‘KubeCÚfigP©hOk
, 
Œue
},

257 "t3": {
çkeG‘KubeMa¡”IPN
, 
çkeInClu¡”CÚfigE¼
, 
çkeG‘DyÇmicCl›ÁS‘Ok
, "çke-·th", 
çkeBudCÚfigFromFÏgsE¼
, 
çkeG‘KubeCÚfigP©hOk
, 
Œue
},

258 "t4": {
çkeG‘KubeMa¡”IPOk
, 
çkeInClu¡”CÚfigOk
, 
çkeG‘DyÇmicCl›ÁS‘Ok
, "", 
çkeBudCÚfigFromFÏgsOk
, 
çkeG‘KubeCÚfigP©hOk
, 
çl£
},

259 "t5": {
çkeG‘KubeMa¡”IPOk
, 
çkeInClu¡”CÚfigE¼
, 
çkeG‘DyÇmicCl›ÁS‘E¼
, "", 
çkeBudCÚfigFromFÏgsOk
, 
çkeG‘KubeCÚfigP©hOk
, 
Œue
},

260 "t6": {
çkeG‘KubeMa¡”IPN
, 
çkeInClu¡”CÚfigOk
, 
çkeG‘DyÇmicCl›ÁS‘E¼
, "", 
çkeBudCÚfigFromFÏgsE¼
, 
çkeG‘KubeCÚfigP©hN
, 
Œue
},

261 "t7": {
çkeG‘KubeMa¡”IPN
, 
çkeInClu¡”CÚfigE¼
, 
çkeG‘DyÇmicCl›ÁS‘Ok
, "", 
çkeBudCÚfigFromFÏgsE¼
, 
çkeG‘KubeCÚfigP©hN
, 
Œue
},

262 "t8": {
çkeG‘KubeMa¡”IPN
, 
çkeInClu¡”CÚfigE¼
, 
çkeG‘DyÇmicCl›ÁS‘E¼
, "", 
çkeBudCÚfigFromFÏgsE¼
, 
çkeG‘KubeCÚfigP©hN
, 
Œue
},

264 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

265 
Çme
, 
mock
 :=‚ame, mock

266 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

267 
c
 :ğ&
Cl›Á
{

268 
g‘KubeMa¡”IPFromENV
: 
mock
.
g‘KubeMa¡”IP
,

269 
KubeCÚfigP©h
: 
mock
.
kubeCÚfigP©h
,

270 
g‘InClu¡”CÚfig
: 
mock
.getInClusterConfig,

271 
budCÚfigFromFÏgs
: 
mock
.
g‘CÚfigFromENV
,

272 
g‘KubeCÚfigP©hFromENV
: 
mock
.
g‘KubeCÚfigP©h
,

273 
g‘KubeDyÇmicCl›Á
: 
mock
.
g‘Kub”Ã‹sDyÇmicCl›ÁS‘
,

275 
_
, 
”r
 :ğ
c
.
	`DyÇmic
()

276 
mock
.
isE¼
 && 
”r
 =ğ
n
 {

277 
t
.
	`F©®f
("‹¡ '%s' faed:ƒx³ùedƒ¼Ü‡ùu®‚Ø”rÜ", 
Çme
)

279 !
mock
.
isE¼
 && 
”r
 !ğ
n
 {

280 
t
.
	`F©®f
("‹¡ '%s' faed:ƒx³ùed‚Ø”rÜ buˆgÙ '%v'", 
Çme
, 
”r
)

284 
	}
}

286 
func
 
	$Te¡CÚfigFÜP©h
(
t
 *
‹¡šg
.
T
) {

287 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

288 
kubeCÚfigP©h
 
¡ršg


289 
g‘CÚfigFromP©h
 
budCÚfigFromFÏgsFn


290 
isE¼
 
boŞ


292 "T1": {"", 
çkeBudCÚfigFromFÏgsE¼
, 
Œue
},

293 "T2": {"çke-·th", 
çkeBudCÚfigFromFÏgsOk
, 
çl£
},

295 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

296 
Çme
, 
mock
 :=‚ame, mock

297 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

298 
c
 :ğ&
Cl›Á
{

299 
KubeCÚfigP©h
: 
mock
.
kubeCÚfigP©h
,

300 
budCÚfigFromFÏgs
: 
mock
.
g‘CÚfigFromP©h
,

302 
_
, 
”r
 :ğ
c
.
	`CÚfigFÜP©h
(
mock
.
kubeCÚfigP©h
)

303 
mock
.
isE¼
 && 
”r
 =ğ
n
 {

304 
t
.
	`F©®f
("‹¡ '%s' faed:ƒx³ùedƒ¼Ü‡ùu®‚Ø”rÜ", 
Çme
)

306 !
mock
.
isE¼
 && 
”r
 !ğ
n
 {

307 
t
.
	`F©®f
("‹¡ '%s' faed:ƒx³ùed‚Ø”rÜ buˆgÙ '%v'", 
Çme
, 
”r
)

311 
	}
}

313 
func
 
	$Te¡In¡ªû
(
t
 *
‹¡šg
.
T
) {

314 
c
 :ğ
	`In¡ªû
()

315 
c
 =ğ
n
 {

316 
t
.
	`F©®f
("test failed:ƒxpected‚on‚il client instance got‚il")

318 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/container/v1alpha1/container.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

20 
”rÜs
 "github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1"

21 
cÜev1
 "k8s.io/api/core/v1"

24 
ty³
 
cÚš”
 struct {

25 
	mcÜev1
.
	mCÚš”


33 
ty³
 
O±iÚFunc
 
	$func
(*
cÚš”
)

44 
ty³
 
P»diÿ‹
 
	$func
(*
cÚš”
è(
ÇmeOrMsg
 
¡ršg
, 
ok
 
boŞ
)

47 
func
 
	$´ediÿ‹FaedE¼Ü
(
mes§ge
 
¡ršg
è
”rÜ
 {

48  
”rÜs
.
	`E¼Üf
("´ediÿ‹çed: %s", 
mes§ge
)

49 
	}
}

51 
v¬
 (

52 
”rÜv®id©iÚFaed
 = 
”rÜs
.
New
("container validation failed")

57 
	$func
 (
c
 *
cÚš”
è
	$asCÚš”
(è
cÜev1
.
CÚš”
 {

58  
cÜev1
.
CÚš”
{

59 
Name
: 
c
.Name,

60 
Image
: 
c
.Image,

61 
Commªd
: 
c
.Command,

62 
Args
: 
c
.Args,

63 
WÜkšgDœ
: 
c
.WorkingDir,

64 
PÜts
: 
c
.Ports,

65 
EnvFrom
: 
c
.EnvFrom,

66 
Env
: 
c
.Env,

67 
Resourûs
: 
c
.Resources,

68 
VŞumeMouÁs
: 
c
.VolumeMounts,

69 
VŞumeDeviûs
: 
c
.VolumeDevices,

70 
Liv’essProbe
: 
c
.LivenessProbe,

71 
R—dšessProbe
: 
c
.ReadinessProbe,

72 
Liãcyşe
: 
c
.Lifecycle,

73 
T”mš©iÚMes§geP©h
: 
c
.TerminationMessagePath,

74 
T”mš©iÚMes§gePŞicy
: 
c
.TerminationMessagePolicy,

75 
ImagePuÎPŞicy
: 
c
.ImagePullPolicy,

76 
Secur™yCÚ‹xt
: 
c
.SecurityContext,

77 
Stdš
: 
c
.Stdin,

78 
StdšOnû
: 
c
.StdinOnce,

79 
TTY
: 
c
.TTY,

81 
	}
}

84 
func
 
	$New
(
İts
 ...
O±iÚFunc
è
cÜev1
.
CÚš”
 {

85 
c
 :ğ&
cÚš”
{}

86 
_
, 
o
 :ğ
¿nge
 
İts
 {

87 
	`o
(
c
)

89  
c
.
	`asCÚš”
()

90 
	}
}

93 
ty³
 
Bud”
 struct {

94 
cÚ
 *
cÚš”


95 
checks
 []
P»diÿ‹


96 
”rÜs
 []
”rÜ


100 
func
 
NewBud”
(è*
Bud”
 {

101  &
Bud”
{

102 
cÚ
: &
cÚš”
{},

107 
	$func
 (
b
 *
Bud”
è
	$v®id©e
(è
”rÜ
 {

108 
_
, 
c
 :ğ
¿nge
 
b
.
checks
 {

109 
m
, 
ok
 :ğ
	`c
(
b
.
cÚ
); !ok {

110 
b
.
”rÜs
 = 
	`­³nd
(b.”rÜs, 
	`´ediÿ‹FaedE¼Ü
(
m
))

113 
	`Ën
(
b
.
”rÜs
) == 0 {

114  
n


116  
”rÜv®id©iÚFaed


117 
	}
}

120 
	$func
 (
b
 *
Bud”
è
	$Bud
(è(
cÜev1
.
CÚš”
, 
”rÜ
) {

121 
”r
 :ğ
b
.
	`v®id©e
()

122 
”r
 !ğ
n
 {

123  
cÜev1
.
CÚš”
{}, 
”r


125  
b
.
cÚ
.
	`asCÚš”
(), 
n


126 
	}
}

130 
	$func
 (
b
 *
Bud”
è
	`AddCheck
(
p
 
P»diÿ‹
) *Builder {

131 
b
.
checks
 = 
	`­³nd
(b.checks, 
p
)

132  
b


133 
	}
}

137 
	$func
 (
b
 *
Bud”
è
	`AddChecks
(
p
 []
P»diÿ‹
) *Builder {

138 
_
, 
check
 :ğ
¿nge
 
p
 {

139 
b
.
	`AddCheck
(
check
)

141  
b


142 
	}
}

145 
	$func
 (
b
 *
Bud”
è
	`W™hName
(
Çme
 
¡ršg
) *Builder {

146 
	`Ën
(
Çme
) == 0 {

147 
b
.
”rÜs
 = 
	`­³nd
(

148 
b
.
”rÜs
,

149 
”rÜs
.
	`New
("failedo build container object: missing‚ame"),

151  
b


153 
	`W™hName
(
Çme
)(
b
.
cÚ
)

154  
b


155 
	}
}

158 
func
 
	$W™hName
(
Çme
 
¡ršg
è
O±iÚFunc
 {

159  
	`func
(
c
 *
cÚš”
) {

160 
c
.
Name
 = 
Çme


162 
	}
}

165 
	$func
 (
b
 *
Bud”
è
	`W™hImage
(
img
 
¡ršg
) *Builder {

166 
	`Ën
(
img
) == 0 {

167 
b
.
”rÜs
 = 
	`­³nd
(

168 
b
.
”rÜs
,

169 
”rÜs
.
	`New
("failedo build container object: missing image"),

171  
b


173 
	`W™hImage
(
img
)(
b
.
cÚ
)

174  
b


175 
	}
}

178 
func
 
	$W™hImage
(
img
 
¡ršg
è
O±iÚFunc
 {

179  
	`func
(
c
 *
cÚš”
) {

180 
c
.
Image
 = 
img


182 
	}
}

185 
	$func
 (
b
 *
Bud”
è
	`W™hCommªdNew
(
cmd
 []
¡ršg
) *Builder {

186 
cmd
 =ğ
n
 {

187 
b
.
”rÜs
 = 
	`­³nd
(

188 
b
.
”rÜs
,

189 
”rÜs
.
	`New
("failedo build container object:‚il command"),

191  
b


194 
	`Ën
(
cmd
) == 0 {

195 
b
.
”rÜs
 = 
	`­³nd
(

196 
b
.
”rÜs
,

197 
”rÜs
.
	`New
("failedo build container object: missing command"),

199  
b


202 
Ãwcmd
 :ğ[]
¡ršg
{}

203 
Ãwcmd
 = 
	`­³nd
Òewcmd, 
cmd
...)

205 
b
.
cÚ
.
Commªd
 = 
Ãwcmd


206  
b


207 
	}
}

210 
	$func
 (
b
 *
Bud”
è
	`W™hArgum’tsNew
(
¬gs
 []
¡ršg
) *Builder {

211 
¬gs
 =ğ
n
 {

212 
b
.
”rÜs
 = 
	`­³nd
(

213 
b
.
”rÜs
,

214 
”rÜs
.
	`New
("failedo build container object:‚il‡rguments"),

216  
b


219 
	`Ën
(
¬gs
) == 0 {

220 
b
.
”rÜs
 = 
	`­³nd
(

221 
b
.
”rÜs
,

222 
”rÜs
.
	`New
("failedo build container object: missing‡rguments"),

224  
b


227 
Ãw¬gs
 :ğ[]
¡ršg
{}

228 
Ãw¬gs
 = 
	`­³nd
Òew¬gs, 
¬gs
...)

230 
b
.
cÚ
.
Args
 = 
Ãw¬gs


231  
b


232 
	}
}

235 
	$func
 (
b
 *
Bud”
è
	`W™hVŞumeMouÁsNew
(
vŞumeMouÁs
 []
cÜev1
.
VŞumeMouÁ
) *Builder {

236 
vŞumeMouÁs
 =ğ
n
 {

237 
b
.
”rÜs
 = 
	`­³nd
(

238 
b
.
”rÜs
,

239 
”rÜs
.
	`New
("failedo build container object:‚il volumemounts"),

241  
b


244 
	`Ën
(
vŞumeMouÁs
) == 0 {

245 
b
.
”rÜs
 = 
	`­³nd
(

246 
b
.
”rÜs
,

247 
”rÜs
.
	`New
("failedo build container object: missing volumemounts"),

249  
b


251 
ÃwvŞumeMouÁs
 :ğ[]
cÜev1
.
VŞumeMouÁ
{}

252 
ÃwvŞumeMouÁs
 = 
	`­³nd
ÒewvŞumeMouÁs, 
vŞumeMouÁs
...)

253 
b
.
cÚ
.
VŞumeMouÁs
 = 
ÃwvŞumeMouÁs


254  
b


255 
	}
}

258 
	$func
 (
b
 *
Bud”
è
	`W™hImagePuÎPŞicy
(
pŞicy
 
cÜev1
.
PuÎPŞicy
) *Builder {

259 
	`Ën
(
pŞicy
) == 0 {

260 
b
.
”rÜs
 = 
	`­³nd
(

261 
b
.
”rÜs
,

262 
”rÜs
.
	`New
(

266  
b


269 
b
.
cÚ
.
ImagePuÎPŞicy
 = 
pŞicy


270  
b


271 
	}
}

274 
	$func
 (
b
 *
Bud”
è
	`W™hPrivegedSecur™yCÚ‹xt
(
´iveged
 *
boŞ
) *Builder {

275 
´iveged
 =ğ
n
 {

276 
b
.
”rÜs
 = 
	`­³nd
(

277 
b
.
”rÜs
,

278 
”rÜs
.
	`New
(

282  
b


285 
Ãw´iveged
 :ğ*
´iveged


286 
Ãw£cur™ycÚ‹xt
 :ğ&
cÜev1
.
Secur™yCÚ‹xt
{

287 
Priveged
: &
Ãw´iveged
,

290 
b
.
cÚ
.
Secur™yCÚ‹xt
 = 
Ãw£cur™ycÚ‹xt


291  
b


292 
	}
}

295 
	$func
 (
b
 *
Bud”
è
	`W™hResourûs
(

296 
»sourûs
 *
cÜev1
.
ResourûRequœem’ts
,

297 è*
Bud”
 {

298 
»sourûs
 =ğ
n
 {

299 
b
.
”rÜs
 = 
	`­³nd
(

300 
b
.
”rÜs
,

301 
”rÜs
.
	`New
("failedo build container object: missing„esources"),

303  
b


306 
Ãw»sourûs
 :ğ*
»sourûs


307 
b
.
cÚ
.
Resourûs
 = 
Ãw»sourûs


308  
b


309 
	}
}

312 
	$func
 (
b
 *
Bud”
è
	`W™hPÜtsNew
(
pÜts
 []
cÜev1
.
CÚš”PÜt
) *Builder {

313 
pÜts
 =ğ
n
 {

314 
b
.
”rÜs
 = 
	`­³nd
(

315 
b
.
”rÜs
,

316 
”rÜs
.
	`New
("failedo build container object:‚il…orts"),

318  
b


321 
	`Ën
(
pÜts
) == 0 {

322 
b
.
”rÜs
 = 
	`­³nd
(

323 
b
.
”rÜs
,

324 
”rÜs
.
	`New
("failedo build container object: missing…orts"),

326  
b


329 
ÃwpÜts
 :ğ[]
cÜev1
.
CÚš”PÜt
{}

330 
ÃwpÜts
 = 
	`­³nd
ÒewpÜts, 
pÜts
...)

332 
b
.
cÚ
.
PÜts
 = 
ÃwpÜts


333  
b


334 
	}
}

337 
	$func
 (
b
 *
Bud”
è
	`W™hEnvsNew
(
’vs
 []
cÜev1
.
EnvV¬
) *Builder {

338 
’vs
 =ğ
n
 {

339 
b
.
”rÜs
 = 
	`­³nd
(

340 
b
.
”rÜs
,

341 
”rÜs
.
	`New
("failedo build container object:‚ilƒnvs"),

343  
b


346 
	`Ën
(
’vs
) == 0 {

347 
b
.
”rÜs
 = 
	`­³nd
(

348 
b
.
”rÜs
,

349 
”rÜs
.
	`New
("failedo build container object: missingƒnvs"),

351  
b


354 
Ãw’vs
 :ğ[]
cÜev1
.
EnvV¬
{}

355 
Ãw’vs
 = 
	`­³nd
Òew’vs, 
’vs
...)

357 
b
.
cÚ
.
Env
 = 
Ãw’vs


358  
b


359 
	}
}

362 
	$func
 (
b
 *
Bud”
è
	`W™hEnvs
(
’vs
 []
cÜev1
.
EnvV¬
) *Builder {

363 
’vs
 =ğ
n
 {

364 
b
.
”rÜs
 = 
	`­³nd
(

365 
b
.
”rÜs
,

366 
”rÜs
.
	`New
("failedo build container object:‚ilƒnvs"),

368  
b


371 
	`Ën
(
’vs
) == 0 {

372 
b
.
”rÜs
 = 
	`­³nd
(

373 
b
.
”rÜs
,

374 
”rÜs
.
	`New
("failedo build container object: missingƒnvs"),

376  
b


379 
b
.
cÚ
.
Env
 =ğ
n
 {

380 
b
.
	`W™hEnvsNew
(
’vs
)

381  
b


384 
b
.
cÚ
.
Env
 = 
	`­³nd
(b.cÚ.Env, 
’vs
...)

385  
b


386 
	}
}

389 
	$func
 (
b
 *
Bud”
è
	`W™hLiv’essProbe
(
liv’ess
 *
cÜev1
.
Probe
) *Builder {

390 
liv’ess
 =ğ
n
 {

391 
b
.
”rÜs
 = 
	`­³nd
(

392 
b
.
”rÜs
,

393 
”rÜs
.
	`New
("failedo build container object:‚il†iveness…robe"),

395  
b


398 
b
.
cÚ
.
Liv’essProbe
 = 
liv’ess


399  
b


400 
	}
}

403 
	$func
 (
b
 *
Bud”
è
	`W™hLiãCyşe
(
lc
 *
cÜev1
.
Liãcyşe
) *Builder {

404 
lc
 =ğ
n
 {

405 
b
.
”rÜs
 = 
	`­³nd
(

406 
b
.
”rÜs
,

407 
”rÜs
.
	`New
("failedo build container object:‚il†ifecycle"),

409  
b


412 
b
.
cÚ
.
Liãcyşe
 = 
lc


413  
b


414 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/container/v1alpha1/container_test.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

23 
cÜev1
 "k8s.io/api/core/v1"

27 
func
 
	$çkeAlwaysTrue
(
d
 *
cÚš”
è(
¡ršg
, 
boŞ
) {

28  "çkeAlwaysTrue", 
Œue


29 
	}
}

32 
func
 
	$çkeAlwaysF®£
(
d
 *
cÚš”
è(
¡ršg
, 
boŞ
) {

33  "çkeAlwaysF®£", 
çl£


34 
	}
}

36 
func
 
	$Te¡P»diÿ‹FaedE¼Ü
(
t
 *
‹¡šg
.
T
) {

37 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

38 
´ediÿ‹Mes§ge
 
¡ršg


39 
ex³ùedE¼
 
¡ršg


44 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

45 
Çme
 :=‚ame

46 
mock
 := mock

47 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

48 
e
 :ğ
	`´ediÿ‹FaedE¼Ü
(
mock
.
´ediÿ‹Mes§ge
)

49 
e
.
	`E¼Ü
(è!ğ
mock
.
ex³ùedE¼
 {

50 
t
.
	`F©®f
(

52 
Çme
,

53 
mock
.
ex³ùedE¼
,

54 
e
.
	`E¼Ü
(),

59 
	}
}

61 
func
 
	$Te¡NewW™hName
(
t
 *
‹¡šg
.
T
) {

62 
n
 := "con1"

63 
c
 :ğ
	`New
(
	`W™hName
(
n
))

64 
c
.
Name
 !ğ
n
 {

65 
t
.
	`F©®f
("‹¡ faed:ƒx³ùed‚am'%s':‡ùu® '%s'", 
n
, 
c
.
Name
)

67 
	}
}

69 
func
 
	$Te¡NewW™hImage
(
t
 *
‹¡šg
.
T
) {

70 
i
 := "openebs.io/m-apiserver:1.0.0"

71 
c
 :ğ
	`New
(
	`W™hImage
(
i
))

72 
c
.
Image
 !ğ
i
 {

73 
t
.
	`F©®f
("‹¡ faed:ƒx³ùed imag'%s':‡ùu® '%s'", 
i
, 
c
.
Image
)

75 
	}
}

77 
func
 
	$Te¡Bud”Bud
(
t
 *
‹¡šg
.
T
) {

78 
_
, 
”r
 :ğ
	`NewBud”
().
	`Bud
()

79 
”r
 !ğ
n
 {

80 
t
.
	`F©®f
("‹¡ faed:ƒx³ùed‚Ø”r:‡ùu® '%+v'", 
”r
)

82 
	}
}

84 
func
 
	$Te¡Bud”V®id©iÚ
(
t
 *
‹¡šg
.
T
) {

85 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

86 
checks
 []
P»diÿ‹


87 
isE¼Ü
 
boŞ


89 "®way Œue": {[]
P»diÿ‹
{
çkeAlwaysTrue
}, 
çl£
},

90 "®way çl£": {[]
P»diÿ‹
{
çkeAlwaysF®£
}, 
Œue
},

91 "Œu& f®£": {[]
P»diÿ‹
{
çkeAlwaysTrue
, 
çkeAlwaysF®£
}, 
Œue
},

93 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

94 
Çme
 :=‚ame

95 
mock
 := mock

96 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

97 
_
, 
”r
 :ğ
	`NewBud”
().
	`AddChecks
(
mock
.
checks
).
	`Bud
()

98 
mock
.
isE¼Ü
 && 
”r
 =ğ
n
 {

99 
t
.
	`F©®f
(

101 
Çme
,

104 !
mock
.
isE¼Ü
 && 
”r
 !ğ
n
 {

105 
t
.
	`F©®f
(

107 
Çme
,

108 
”r
,

113 
	}
}

115 
func
 
	$Te¡Bud”AddChecks
(
t
 *
‹¡šg
.
T
) {

116 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

117 
checks
 []
P»diÿ‹


118 
ex³ùedCouÁ
 

120 "z”o": {[]
P»diÿ‹
{}, 0},

121 "Úe": {[]
P»diÿ‹
{
çkeAlwaysTrue
}, 1},

122 "two": {[]
P»diÿ‹
{
çkeAlwaysTrue
, 
çkeAlwaysF®£
}, 2},

124 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

125 
Çme
 :=‚ame

126 
mock
 := mock

127 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

128 
b
 :ğ
	`NewBud”
().
	`AddChecks
(
mock
.
checks
)

129 
	`Ën
(
b
.
checks
è!ğ
mock
.
ex³ùedCouÁ
 {

130 
t
.
	`F©®f
(

132 
Çme
,

133 
mock
.
ex³ùedCouÁ
,

134 
	`Ën
(
b
.
checks
),

139 
	}
}

141 
func
 
	$Te¡Bud”W™hName
(
t
 *
‹¡šg
.
T
) {

142 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

143 
Çme
 
¡ršg


144 
ex³ùedName
 
¡ršg


150 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

151 
Çme
 :=‚ame

152 
mock
 := mock

153 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

154 
c
, 
_
 :ğ
	`NewBud”
().
	`W™hName
(
mock
.
Çme
).
	`Bud
()

155 
c
.
Name
 !ğ
mock
.
ex³ùedName
 {

156 
t
.
	`F©®f
(

158 
Çme
,

159 
mock
.
ex³ùedName
,

160 
c
.
Name
,

165 
	}
}

167 
func
 
	$Te¡Bud”W™hImage
(
t
 *
‹¡šg
.
T
) {

168 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

169 
image
 
¡ršg


170 
ex³ùedImage
 
¡ršg


176 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

177 
Çme
 :=‚ame

178 
mock
 := mock

179 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

180 
c
, 
_
 :ğ
	`NewBud”
().
	`W™hImage
(
mock
.
image
).
	`Bud
()

181 
c
.
Image
 !ğ
mock
.
ex³ùedImage
 {

182 
t
.
	`F©®f
(

184 
Çme
,

185 
mock
.
ex³ùedImage
,

186 
c
.
Image
,

191 
	}
}

193 
func
 
	$Te¡Bud”W™hCommªdNew
(
t
 *
‹¡šg
.
T
) {

194 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

195 
cmd
 []
¡ršg


196 
ex³ùedCmd
 []
¡ršg


199 []
¡ršg
{"kubectl", "get", "po"},

200 []
¡ršg
{"kubectl", "get", "po"},

203 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

204 
Çme
 :=‚ame

205 
mock
 := mock

206 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

207 
c
, 
_
 :ğ
	`NewBud”
().
	`W™hCommªdNew
(
mock
.
cmd
).
	`Bud
()

208 !
»æeù
.
	`D“pEqu®
(
c
.
Commªd
, 
mock
.
ex³ùedCmd
) {

209 
t
.
	`F©®f
(

211 
Çme
,

212 
mock
.
ex³ùedCmd
,

213 
c
.
Commªd
,

218 
	}
}

220 
func
 
	$Te¡Bud”W™hArgum’tsNew
(
t
 *
‹¡šg
.
T
) {

221 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

222 
¬gs
 []
¡ršg


223 
ex³ùedArgs
 []
¡ršg


226 []
¡ršg
{"-jsonpath", "metadata.name"},

227 []
¡ršg
{"-jsonpath", "metadata.name"},

230 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

231 
Çme
 :=‚ame

232 
mock
 := mock

233 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

234 
c
, 
_
 :ğ
	`NewBud”
().
	`W™hArgum’tsNew
(
mock
.
¬gs
).
	`Bud
()

235 !
»æeù
.
	`D“pEqu®
(
c
.
Args
, 
mock
.
ex³ùedArgs
) {

236 
t
.
	`F©®f
(

238 
Çme
,

239 
mock
.
ex³ùedArgs
,

240 
c
.
Args
,

245 
	}
}

247 
func
 
	$Te¡Bud”W™hPrivegedSecur™yCÚ‹xt
(
t
 *
‹¡šg
.
T
) {

248 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

249 
£cCÚt
 
boŞ


250 
bud”
 *
Bud”


251 
ex³ùE¼
 
boŞ


254 
£cCÚt
: 
Œue
,

255 
bud”
: &
Bud”
{
cÚ
: &
cÚš”
{

256 
cÜev1
.
CÚš”
{},

258 
ex³ùE¼
: 
çl£
,

261 
£cCÚt
: 
çl£
,

262 
bud”
: &
Bud”
{
cÚ
: &
cÚš”
{

263 
cÜev1
.
CÚš”
{},

265 
ex³ùE¼
: 
çl£
,

268 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

269 
Çme
, 
mock
 :=‚ame, mock

270 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

271 
b
 :ğ
mock
.
bud”
.
	`W™hPrivegedSecur™yCÚ‹xt
(&mock.
£cCÚt
)

272 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

273 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

275 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

276 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

280 
	}
}

282 
func
 
	$Te¡Bud”W™hEnvsNew
(
t
 *
‹¡šg
.
T
) {

283 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

284 
’vLi¡
 []
cÜev1
.
EnvV¬


285 
bud”
 *
Bud”


286 
ex³ùE¼
 
boŞ


289 
’vLi¡
: []
cÜev1
.
EnvV¬
{

290 
cÜev1
.
EnvV¬
{},

292 
bud”
: &
Bud”
{
cÚ
: &
cÚš”
{

293 
cÜev1
.
CÚš”
{},

295 
ex³ùE¼
: 
çl£
,

298 
’vLi¡
: 
n
,

299 
bud”
: &
Bud”
{
cÚ
: &
cÚš”
{

300 
cÜev1
.
CÚš”
{},

302 
ex³ùE¼
: 
Œue
,

305 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

306 
Çme
, 
mock
 :=‚ame, mock

307 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

308 
b
 :ğ
mock
.
bud”
.
	`W™hEnvsNew
(mock.
’vLi¡
)

309 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

310 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

312 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

313 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

317 
	}
}

319 
func
 
	$Te¡Bud”W™hPÜtsNew
(
t
 *
‹¡šg
.
T
) {

320 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

321 
pÜtLi¡
 []
cÜev1
.
CÚš”PÜt


322 
bud”
 *
Bud”


323 
ex³ùE¼
 
boŞ


326 
pÜtLi¡
: []
cÜev1
.
CÚš”PÜt
{

327 
cÜev1
.
CÚš”PÜt
{},

329 
bud”
: &
Bud”
{
cÚ
: &
cÚš”
{

330 
cÜev1
.
CÚš”
{},

332 
ex³ùE¼
: 
çl£
,

335 
pÜtLi¡
: 
n
,

336 
bud”
: &
Bud”
{
cÚ
: &
cÚš”
{

337 
cÜev1
.
CÚš”
{},

339 
ex³ùE¼
: 
Œue
,

342 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

343 
Çme
, 
mock
 :=‚ame, mock

344 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

345 
b
 :ğ
mock
.
bud”
.
	`W™hPÜtsNew
(mock.
pÜtLi¡
)

346 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

347 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

349 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

350 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

354 
	}
}

356 
func
 
	$Te¡Bud”W™hResourûs
(
t
 *
‹¡šg
.
T
) {

357 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

358 
»quœem’ts
 *
cÜev1
.
ResourûRequœem’ts


359 
bud”
 *
Bud”


360 
ex³ùE¼
 
boŞ


363 
»quœem’ts
: &
cÜev1
.
ResourûRequœem’ts
{},

364 
bud”
: &
Bud”
{
cÚ
: &
cÚš”
{

365 
cÜev1
.
CÚš”
{},

367 
ex³ùE¼
: 
çl£
,

370 
»quœem’ts
: 
n
,

371 
bud”
: &
Bud”
{
cÚ
: &
cÚš”
{

372 
cÜev1
.
CÚš”
{},

374 
ex³ùE¼
: 
Œue
,

377 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

378 
Çme
, 
mock
 :=‚ame, mock

379 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

380 
b
 :ğ
mock
.
bud”
.
	`W™hResourûs
(mock.
»quœem’ts
)

381 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

382 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

384 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

385 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

389 
	}
}

391 
func
 
	$Te¡Bud”W™hVŞumeMouÁsNew
(
t
 *
‹¡šg
.
T
) {

392 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

393 
mouÁs
 []
cÜev1
.
VŞumeMouÁ


394 
bud”
 *
Bud”


395 
ex³ùE¼
 
boŞ


398 
mouÁs
: []
cÜev1
.
VŞumeMouÁ
{

399 
cÜev1
.
VŞumeMouÁ
{},

401 
bud”
: &
Bud”
{
cÚ
: &
cÚš”
{

402 
cÜev1
.
CÚš”
{},

404 
ex³ùE¼
: 
çl£
,

407 
mouÁs
: 
n
,

408 
bud”
: &
Bud”
{
cÚ
: &
cÚš”
{

409 
cÜev1
.
CÚš”
{},

411 
ex³ùE¼
: 
Œue
,

414 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

415 
Çme
, 
mock
 :=‚ame, mock

416 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

417 
b
 :ğ
mock
.
bud”
.
	`W™hVŞumeMouÁsNew
(mock.
mouÁs
)

418 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

419 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

421 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

422 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

426 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/deployment/appsv1/v1alpha1/deployment.go

14 
·ckage
 
v1®pha1


16 
impÜt
 (

17 
”rÜs
 "github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1"

18 
‹m¶©e¥ec
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/podtemplatespec/v1alpha1"

19 
­psv1
 "k8s.io/api/apps/v1"

20 
m‘av1
 "k8s.io/apimachinery/pkg/apis/meta/v1"

32 
ty³
 
P»diÿ‹
 
	$func
(*
D•loy
è
boŞ


35 
ty³
 
D•loy
 struct {

37 
objeù
 *
­psv1
.
D•loym’t


42 
ty³
 
Bud”
 struct {

43 
d•loym’t
 *
D•loy


44 
checks
 []
P»diÿ‹


45 
”rÜs
 []
”rÜ


50 
ty³
 
P»diÿ‹Name
 
¡ršg


55 
P»diÿ‹Prog»ssD—dlšeExûeded
 
P»diÿ‹Name
 = "ProgressDeadlineExceeded"

57 
P»diÿ‹NÙS³cSynûd
 
P»diÿ‹Name
 = "NotSpecSynced"

59 
P»diÿ‹Old”R•liÿAùive
 
P»diÿ‹Name
 = "OlderReplicaActive"

61 
P»diÿ‹T”mš©iÚInProg»ss
 
P»diÿ‹Name
 = "TerminationInProgress"

63 
P»diÿ‹Upd©eInProg»ss
 
P»diÿ‹Name
 = "UpdateInProgress"

67 
func
 
	`NewBud”
(è*
Bud”
 {

68  &
Bud”
{

69 
d•loym’t
: &
D•loy
{

70 
objeù
: &
­psv1
.
D•loym’t
{},

73 
	}
}

76 
	$func
 (
b
 *
Bud”
è
	`W™hName
(
Çme
 
¡ršg
) *Builder {

77 
	`Ën
(
Çme
) == 0 {

78 
b
.
”rÜs
 = 
	`­³nd
(

79 
b
.
”rÜs
,

80 
”rÜs
.
	`New
("failedo build deployment: missing‚ame"),

82  
b


84 
b
.
d•loym’t
.
objeù
.
Name
 = 
Çme


85  
b


86 
	}
}

89 
	$func
 (
b
 *
Bud”
è
	`W™hName¥aû
(
Çme¥aû
 
¡ršg
) *Builder {

90 
	`Ën
(
Çme¥aû
) == 0 {

91 
b
.
”rÜs
 = 
	`­³nd
(

92 
b
.
”rÜs
,

93 
”rÜs
.
	`New
("failedo build deployment: missing‚amespace"),

95  
b


97 
b
.
d•loym’t
.
objeù
.
Name¥aû
 = 
Çme¥aû


98  
b


99 
	}
}

103 
	$func
 (
b
 *
Bud”
è
	`W™hAÂÙ©iÚs
(
ªnÙ©iÚs
 
m­
[
¡ršg
]string) *Builder {

104 
	`Ën
(
ªnÙ©iÚs
) == 0 {

105 
b
.
”rÜs
 = 
	`­³nd
(

106 
b
.
”rÜs
,

107 
”rÜs
.
	`New
("failedo build deployment object: missing‡nnotations"),

109  
b


112 
b
.
d•loym’t
.
objeù
.
AÂÙ©iÚs
 =ğ
n
 {

113  
b
.
	`W™hAÂÙ©iÚsNew
(
ªnÙ©iÚs
)

116 
key
, 
v®ue
 :ğ
¿nge
 
ªnÙ©iÚs
 {

117 
b
.
d•loym’t
.
objeù
.
AÂÙ©iÚs
[
key
] = 
v®ue


119  
b


120 
	}
}

124 
	$func
 (
b
 *
Bud”
è
	`W™hAÂÙ©iÚsNew
(
ªnÙ©iÚs
 
m­
[
¡ršg
]string) *Builder {

125 
	`Ën
(
ªnÙ©iÚs
) == 0 {

126 
b
.
”rÜs
 = 
	`­³nd
(

127 
b
.
”rÜs
,

128 
”rÜs
.
	`New
("failedo build deployment object:‚o‚ew‡nnotations"),

130  
b


134 
ÃwªnÙ©iÚs
 :ğ
m­
[
¡ršg
]string{}

135 
key
, 
v®ue
 :ğ
¿nge
 
ªnÙ©iÚs
 {

136 
ÃwªnÙ©iÚs
[
key
] = 
v®ue


140 
b
.
d•loym’t
.
objeù
.
AÂÙ©iÚs
 = 
ÃwªnÙ©iÚs


141  
b


142 
	}
}

145 
	$func
 (
b
 *
Bud”
è
	`W™hNodeS–eùÜ
(
£ËùÜ
 
m­
[
¡ršg
]string) *Builder {

146 
	`Ën
(
£ËùÜ
) == 0 {

147 
b
.
”rÜs
 = 
	`­³nd
(

148 
b
.
”rÜs
,

149 
”rÜs
.
	`New
("failedo build deployment object:‚o‚ode selector"),

151  
b


153 
b
.
d•loym’t
.
objeù
.
S³c
.
Tem¶©e
.S³c.
NodeS–eùÜ
 =ğ
n
 {

154  
b
.
	`W™hNodeS–eùÜNew
(
£ËùÜ
)

157 
key
, 
v®ue
 :ğ
¿nge
 
£ËùÜ
 {

158 
b
.
d•loym’t
.
objeù
.
S³c
.
Tem¶©e
.S³c.
NodeS–eùÜ
[
key
] = 
v®ue


160  
b


161 
	}
}

164 
	$func
 (
b
 *
Bud”
è
	`W™hNodeS–eùÜNew
(
£ËùÜ
 
m­
[
¡ršg
]string) *Builder {

165 
	`Ën
(
£ËùÜ
) == 0 {

166 
b
.
”rÜs
 = 
	`­³nd
(

167 
b
.
”rÜs
,

168 
”rÜs
.
	`New
("failedo build deployment object:‚o‚ew‚ode selector"),

170  
b


173 
b
.
d•loym’t
.
objeù
.
S³c
.
Tem¶©e
.S³c.
NodeS–eùÜ
 = 
£ËùÜ


174  
b


175 
	}
}

179 
	$func
 (
b
 *
Bud”
è
	`W™hOwÃrReã»nûNew
(
owÃrReãºû
 []
m‘av1
.
OwÃrReã»nû
) *Builder {

180 
	`Ën
(
owÃrReãºû
) == 0 {

181 
b
.
”rÜs
 = 
	`­³nd
(

182 
b
.
”rÜs
,

183 
”rÜs
.
	`New
("failedo build deployment object:‚o‚ew ownerRefernce"),

185  
b


188 
b
.
d•loym’t
.
objeù
.
OwÃrReã»nûs
 = 
owÃrReãºû


189  
b


190 
	}
}

194 
	$func
 (
b
 *
Bud”
è
	`W™hLab–s
(
Ïb–s
 
m­
[
¡ršg
]string) *Builder {

195 
	`Ën
(
Ïb–s
) == 0 {

196 
b
.
”rÜs
 = 
	`­³nd
(

197 
b
.
”rÜs
,

198 
”rÜs
.
	`New
("failedo build deployment object: missing†abels"),

200  
b


203 
b
.
d•loym’t
.
objeù
.
Lab–s
 =ğ
n
 {

204  
b
.
	`W™hLab–sNew
(
Ïb–s
)

207 
key
, 
v®ue
 :ğ
¿nge
 
Ïb–s
 {

208 
b
.
d•loym’t
.
objeù
.
Lab–s
[
key
] = 
v®ue


210  
b


211 
	}
}

215 
	$func
 (
b
 *
Bud”
è
	`W™hLab–sNew
(
Ïb–s
 
m­
[
¡ršg
]string) *Builder {

216 
	`Ën
(
Ïb–s
) == 0 {

217 
b
.
”rÜs
 = 
	`­³nd
(

218 
b
.
”rÜs
,

219 
”rÜs
.
	`New
("failedo build deployment object:‚o‚ew†abels"),

221  
b


225 
Ãwlbls
 :ğ
m­
[
¡ršg
]string{}

226 
key
, 
v®ue
 :ğ
¿nge
 
Ïb–s
 {

227 
Ãwlbls
[
key
] = 
v®ue


231 
b
.
d•loym’t
.
objeù
.
Lab–s
 = 
Ãwlbls


232  
b


233 
	}
}

237 
	$func
 (
b
 *
Bud”
è
	`W™hS–eùÜM©chLab–s
(
m©chÏb–s
 
m­
[
¡ršg
]string) *Builder {

238 
	`Ën
(
m©chÏb–s
) == 0 {

239 
b
.
”rÜs
 = 
	`­³nd
(

240 
b
.
”rÜs
,

241 
”rÜs
.
	`New
("failedo build deployment object: missing matchlabels"),

243  
b


246 
b
.
d•loym’t
.
objeù
.
S³c
.
S–eùÜ
 =ğ
n
 {

247  
b
.
	`W™hS–eùÜM©chLab–sNew
(
m©chÏb–s
)

250 
key
, 
v®ue
 :ğ
¿nge
 
m©chÏb–s
 {

251 
b
.
d•loym’t
.
objeù
.
S³c
.
S–eùÜ
.
M©chLab–s
[
key
] = 
v®ue


253  
b


254 
	}
}

258 
	$func
 (
b
 *
Bud”
è
	`W™hS–eùÜM©chLab–sNew
(
m©chÏb–s
 
m­
[
¡ršg
]string) *Builder {

259 
	`Ën
(
m©chÏb–s
) == 0 {

260 
b
.
”rÜs
 = 
	`­³nd
(

261 
b
.
”rÜs
,

262 
”rÜs
.
	`New
("failedo build deployment object:‚o‚ew matchlabels"),

264  
b


268 
Ãwm©chÏb–s
 :ğ
m­
[
¡ršg
]string{}

269 
key
, 
v®ue
 :ğ
¿nge
 
m©chÏb–s
 {

270 
Ãwm©chÏb–s
[
key
] = 
v®ue


273 
Ãw£ËùÜ
 :ğ&
m‘av1
.
Lab–S–eùÜ
{

274 
M©chLab–s
: 
Ãwm©chÏb–s
,

278 
b
.
d•loym’t
.
objeù
.
S³c
.
S–eùÜ
 = 
Ãw£ËùÜ


279  
b


280 
	}
}

283 
	$func
 (
b
 *
Bud”
è
	`W™hR•liÿs
(
»¶iÿs
 *
št32
) *Builder {

285 
»¶iÿs
 =ğ
n
 {

286 
b
.
”rÜs
 = 
	`­³nd
(

287 
b
.
”rÜs
,

288 
”rÜs
.
	`New
("failedo build deployment object:‚il„eplicas"),

290  
b


293 
Ãw»¶iÿs
 :ğ*
»¶iÿs


295 
Ãw»¶iÿs
 < 0 {

296 
b
.
”rÜs
 = 
	`­³nd
(

297 
b
.
”rÜs
,

298 
”rÜs
.
	`E¼Üf
(

300 
Ãw»¶iÿs
,

303  
b


306 
b
.
d•loym’t
.
objeù
.
S³c
.
R•liÿs
 = &
Ãw»¶iÿs


307  
b


308 
	}
}

311 
	$func
 (
b
 *
Bud”
è
	`W™hPodTem¶©eS³cBud”
(

312 
tm¶bud”
 *
‹m¶©e¥ec
.
Bud”
,

313 è*
Bud”
 {

314 
tm¶bud”
 =ğ
n
 {

315 
b
.
”rÜs
 = 
	`­³nd
(

316 
b
.
”rÜs
,

317 
”rÜs
.
	`New
("failedo build deployment:‚ilemplatespecbuilder"),

319  
b


322 
‹m¶©e¥ecObj
, 
”r
 :ğ
tm¶bud”
.
	`Bud
()

324 
”r
 !ğ
n
 {

325 
b
.
”rÜs
 = 
	`­³nd
(

326 
b
.
”rÜs
,

327 
”rÜs
.
	`W¿p
(

328 
”r
,

332  
b


335 
b
.
d•loym’t
.
objeù
.
S³c
.
Tem¶©e
 = *
‹m¶©e¥ecObj
.
Objeù


336  
b


337 
	}
}

340 
	$func
 (
b
 *
Bud”
è
	`W™hSŒ©egyTy³
(

341 
¡¿‹gyty³
 
­psv1
.
D•loym’tSŒ©egyTy³
,

342 è*
Bud”
 {

343 
	`Ën
(
¡¿‹gyty³
) == 0 {

344 
b
.
”rÜs
 = 
	`­³nd
(

345 
b
.
”rÜs
,

346 
”rÜs
.
	`New
("failedo build deployment object: missing strategytype"),

348  
b


351 
b
.
d•loym’t
.
objeù
.
S³c
.
SŒ©egy
.
Ty³
 = 
¡¿‹gyty³


352  
b


353 
	}
}

355 
ty³
 
d•loyBudO±iÚ
 
	$func
(*
D•loy
)

359 
func
 
	`NewFÜAPIObjeù
(

360 
obj
 *
­psv1
.
D•loym’t
,

361 
İts
 ...
d•loyBudO±iÚ
,

362 è*
D•loy
 {

363 
d
 :ğ&
D•loy
{
objeù
: 
obj
}

364 
_
, 
o
 :ğ
¿nge
 
İts
 {

365 
	`o
(
d
)

367  
d


368 
	}
}

371 
	$func
 (
b
 *
Bud”
è
	`Bud
(è(*
­psv1
.
D•loym’t
, 
”rÜ
) {

372 
”r
 :ğ
b
.
	`v®id©e
()

374 
”r
 !ğ
n
 {

375  
n
, 
”rÜs
.
	`W¿pf
(
”r
,

377 
b
.
d•loym’t
.
objeù
.
Name
)

379  
b
.
d•loym’t
.
objeù
, 
n


380 
	}
}

382 
	$func
 (
b
 *
Bud”
è
	$v®id©e
(è
”rÜ
 {

383 
	`Ën
(
b
.
”rÜs
) != 0 {

384  
”rÜs
.
	`E¼Üf
(

386 
b
.
”rÜs
,

389  
n


390 
	}
}

394 
	$func
 (
d
 *
D•loy
è
	$IsRŞlout
(è(
P»diÿ‹Name
, 
boŞ
) {

395 
pk
, 
p
 :ğ
¿nge
 
rŞloutChecks
 {

396 
	`p
(
d
) {

397  
pk
, 
çl£


400  "", 
Œue


401 
	}
}

404 
	$func
 (
d
 *
D•loy
è
	`FaedRŞlout
(
Çme
 
P»diÿ‹Name
è*
RŞloutOuut
 {

405  &
RŞloutOuut
{

406 
Mes§ge
: 
rŞloutStu£s
[
Çme
](
d
),

407 
IsRŞËdout
: 
çl£
,

409 
	}
}

412 
	$func
 (
d
 *
D•loy
è
	`SucûssRŞlout
(è*
RŞloutOuut
 {

413  &
RŞloutOuut
{

414 
Mes§ge
: "deployment successfully„olled out",

415 
IsRŞËdout
: 
Œue
,

417 
	}
}

420 
	$func
 (
d
 *
D•loy
è
	$RŞloutStus
(è(
İ
 *
RŞloutOuut
, 
”r
 
”rÜ
) {

421 
pk
, 
ok
 :ğ
d
.
	`IsRŞlout
()

422 
ok
 {

423  
d
.
	`SucûssRŞlout
(), 
n


425  
d
.
	`FaedRŞlout
(
pk
), 
n


426 
	}
}

430 
	$func
 (
d
 *
D•loy
è
	$RŞloutStusRaw
(è(
İ
 []
by‹
, 
”r
 
”rÜ
) {

431 
mes§ge
, 
”r
 :ğ
d
.
	`RŞloutStus
()

432 
”r
 !ğ
n
 {

433  
n
, 
”r


435  
	`NewRŞlout
(

436 
	`w™hOuutObjeù
(
mes§ge
)).

437 
	`Raw
()

438 
	}
}

442 
	$func
 (
b
 *
Bud”
è
	`AddCheck
(
p
 
P»diÿ‹
) *Builder {

443 
b
.
checks
 = 
	`­³nd
(b.checks, 
p
)

444  
b


445 
	}
}

449 
	$func
 (
b
 *
Bud”
è
	`AddChecks
(
p
 []
P»diÿ‹
) *Builder {

450 
_
, 
check
 :ğ
¿nge
 
p
 {

451 
b
.
	`AddCheck
(
check
)

453  
b


454 
	}
}

459 
func
 
	$IsProg»ssD—dlšeExûeded
(è
P»diÿ‹
 {

460  
	`func
(
d
 *
D•loy
è
boŞ
 {

461  
d
.
	`IsProg»ssD—dlšeExûeded
()

463 
	}
}

468 
	$func
 (
d
 *
D•loy
è
	$IsProg»ssD—dlšeExûeded
(è
boŞ
 {

469 
_
, 
cÚd
 :ğ
¿nge
 
d
.
objeù
.
Stus
.
CÚd™iÚs
 {

470 
cÚd
.
Ty³
 =ğ
­psv1
.
D•loym’tProg»ssšg
 &&

471 
cÚd
.
R—sÚ
 == "ProgressDeadlineExceeded" {

472  
Œue


475  
çl£


476 
	}
}

481 
func
 
	$IsOld”R•liÿAùive
(è
P»diÿ‹
 {

482  
	`func
(
d
 *
D•loy
è
boŞ
 {

483  
d
.
	`IsOld”R•liÿAùive
()

485 
	}
}

490 
	$func
 (
d
 *
D•loy
è
	$IsOld”R•liÿAùive
(è
boŞ
 {

491  
d
.
objeù
.
S³c
.
R•liÿs
 !ğ
n
 &&

492 
d
.
objeù
.
Stus
.
Upd©edR•liÿs
 < *d.objeù.
S³c
.
R•liÿs


493 
	}
}

500 
func
 
	$IsT”mš©iÚInProg»ss
(è
P»diÿ‹
 {

501  
	`func
(
d
 *
D•loy
è
boŞ
 {

502  
d
.
	`IsT”mš©iÚInProg»ss
()

504 
	}
}

511 
	$func
 (
d
 *
D•loy
è
	$IsT”mš©iÚInProg»ss
(è
boŞ
 {

512  
d
.
objeù
.
Stus
.
R•liÿs
 > d.objeù.Stus.
Upd©edR•liÿs


513 
	}
}

518 
func
 
	$IsUpd©eInProg»ss
(è
P»diÿ‹
 {

519  
	`func
(
d
 *
D•loy
è
boŞ
 {

520  
d
.
	`IsUpd©eInProg»ss
()

522 
	}
}

527 
	$func
 (
d
 *
D•loy
è
	$IsUpd©eInProg»ss
(è
boŞ
 {

528  
d
.
objeù
.
Stus
.
AvaabËR•liÿs
 < d.objeù.Stus.
Upd©edR•liÿs


529 
	}
}

534 
func
 
	$IsNÙSyncS³c
(è
P»diÿ‹
 {

535  
	`func
(
d
 *
D•loy
è
boŞ
 {

536  
d
.
	`IsNÙSyncS³c
()

538 
	}
}

543 
	$func
 (
d
 *
D•loy
è
	$IsNÙSyncS³c
(è
boŞ
 {

544  
d
.
objeù
.
G’”©iÚ
 > d.objeù.
Stus
.
Ob£rvedG’”©iÚ


545 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/deployment/appsv1/v1alpha1/deployment_test.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

22 
­psv1
 "k8s.io/api/apps/v1"

25 
func
 
	$Te¡Bud”W™hName
(
t
 *
‹¡šg
.
T
) {

26 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

27 
Çme
 
¡ršg


28 
bud”
 *
Bud”


29 
ex³ùE¼
 
boŞ


32 
Çme
: "PVC1",

33 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

34 
objeù
: &
­psv1
.
D•loym’t
{},

36 
ex³ùE¼
: 
çl£
,

39 
Çme
: "",

40 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

41 
objeù
: &
­psv1
.
D•loym’t
{},

43 
ex³ùE¼
: 
Œue
,

46 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

47 
Çme
, 
mock
 :=‚ame, mock

48 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

49 
b
 :ğ
mock
.
bud”
.
	`W™hName
(mock.
Çme
)

50 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

51 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

53 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

54 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

58 
	}
}

60 
func
 
	$Te¡Bud”W™hName¥aû
(
t
 *
‹¡šg
.
T
) {

61 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

62 
Çme¥aû
 
¡ršg


63 
bud”
 *
Bud”


64 
ex³ùE¼
 
boŞ


67 
Çme¥aû
: "PVC1",

68 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

69 
objeù
: &
­psv1
.
D•loym’t
{},

71 
ex³ùE¼
: 
çl£
,

74 
Çme¥aû
: "",

75 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

76 
objeù
: &
­psv1
.
D•loym’t
{},

78 
ex³ùE¼
: 
Œue
,

81 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

82 
Çme
, 
mock
 :=‚ame, mock

83 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

84 
b
 :ğ
mock
.
bud”
.
	`W™hName¥aû
(mock.
Çme¥aû
)

85 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

86 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

88 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

89 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

93 
	}
}

95 
func
 
	$Te¡BudW™hAÂÙ©iÚs
(
t
 *
‹¡šg
.
T
) {

96 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

97 
ªnÙ©iÚs
 
m­
[
¡ršg
]string

98 
bud”
 *
Bud”


99 
ex³ùE¼
 
boŞ


102 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

104 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

105 
objeù
: &
­psv1
.
D•loym’t
{},

107 
ex³ùE¼
: 
çl£
,

110 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{},

111 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

112 
objeù
: &
­psv1
.
D•loym’t
{},

114 
ex³ùE¼
: 
Œue
,

117 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

118 
Çme
, 
mock
 :=‚ame, mock

119 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

120 
b
 :ğ
mock
.
bud”
.
	`W™hAÂÙ©iÚs
(mock.
ªnÙ©iÚs
)

121 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

122 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

124 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

125 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

129 
	}
}

131 
func
 
	$Te¡BudW™hAÂÙ©iÚsNew
(
t
 *
‹¡šg
.
T
) {

132 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

133 
ªnÙ©iÚs
 
m­
[
¡ršg
]string

134 
bud”
 *
Bud”


135 
ex³ùE¼
 
boŞ


138 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

140 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

141 
objeù
: &
­psv1
.
D•loym’t
{},

143 
ex³ùE¼
: 
çl£
,

146 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{},

147 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

148 
objeù
: &
­psv1
.
D•loym’t
{},

150 
ex³ùE¼
: 
Œue
,

153 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

154 
Çme
, 
mock
 :=‚ame, mock

155 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

156 
b
 :ğ
mock
.
bud”
.
	`W™hAÂÙ©iÚsNew
(mock.
ªnÙ©iÚs
)

157 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

158 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

160 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

161 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

165 
	}
}

167 
func
 
	$Te¡BudW™hLab–s
(
t
 *
‹¡šg
.
T
) {

168 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

169 
Ïb–s
 
m­
[
¡ršg
]string

170 
bud”
 *
Bud”


171 
ex³ùE¼
 
boŞ


174 
Ïb–s
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

176 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

177 
objeù
: &
­psv1
.
D•loym’t
{},

179 
ex³ùE¼
: 
çl£
,

182 
Ïb–s
: 
m­
[
¡ršg
]string{},

183 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

184 
objeù
: &
­psv1
.
D•loym’t
{},

186 
ex³ùE¼
: 
Œue
,

189 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

190 
Çme
, 
mock
 :=‚ame, mock

191 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

192 
b
 :ğ
mock
.
bud”
.
	`W™hLab–s
(mock.
Ïb–s
)

193 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

194 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

196 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

197 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

201 
	}
}

203 
func
 
	$Te¡BudW™hLab–sNew
(
t
 *
‹¡šg
.
T
) {

204 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

205 
Ïb–s
 
m­
[
¡ršg
]string

206 
bud”
 *
Bud”


207 
ex³ùE¼
 
boŞ


210 
Ïb–s
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

212 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

213 
objeù
: &
­psv1
.
D•loym’t
{},

215 
ex³ùE¼
: 
çl£
,

218 
Ïb–s
: 
m­
[
¡ršg
]string{},

219 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

220 
objeù
: &
­psv1
.
D•loym’t
{},

222 
ex³ùE¼
: 
Œue
,

225 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

226 
Çme
, 
mock
 :=‚ame, mock

227 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

228 
b
 :ğ
mock
.
bud”
.
	`W™hLab–sNew
(mock.
Ïb–s
)

229 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

230 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

232 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

233 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

237 
	}
}

239 
func
 
	$Te¡BudW™hS–eùÜM©chLab–s
(
t
 *
‹¡šg
.
T
) {

240 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

241 
m©chLab–s
 
m­
[
¡ršg
]string

242 
bud”
 *
Bud”


243 
ex³ùE¼
 
boŞ


246 
m©chLab–s
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

248 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

249 
objeù
: &
­psv1
.
D•loym’t
{},

251 
ex³ùE¼
: 
çl£
,

254 
m©chLab–s
: 
m­
[
¡ršg
]string{},

255 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

256 
objeù
: &
­psv1
.
D•loym’t
{},

258 
ex³ùE¼
: 
Œue
,

261 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

262 
Çme
, 
mock
 :=‚ame, mock

263 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

264 
b
 :ğ
mock
.
bud”
.
	`W™hS–eùÜM©chLab–s
(mock.
m©chLab–s
)

265 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

266 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

268 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

269 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

273 
	}
}

275 
func
 
	$Te¡BudW™hS–eùÜM©chLab–sNew
(
t
 *
‹¡šg
.
T
) {

276 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

277 
m©chLab–s
 
m­
[
¡ršg
]string

278 
bud”
 *
Bud”


279 
ex³ùE¼
 
boŞ


282 
m©chLab–s
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

284 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

285 
objeù
: &
­psv1
.
D•loym’t
{},

287 
ex³ùE¼
: 
çl£
,

290 
m©chLab–s
: 
m­
[
¡ršg
]string{},

291 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

292 
objeù
: &
­psv1
.
D•loym’t
{},

294 
ex³ùE¼
: 
Œue
,

297 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

298 
Çme
, 
mock
 :=‚ame, mock

299 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

300 
b
 :ğ
mock
.
bud”
.
	`W™hS–eùÜM©chLab–sNew
(mock.
m©chLab–s
)

301 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

302 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

304 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

305 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

309 
	}
}

311 
func
 
	$Te¡Bud”W™hR•liÿs
(
t
 *
‹¡šg
.
T
) {

312 
§m¶”•liÿs
 :ğ
	`št32
(3)

313 
šv®id»¶iÿs
 :ğ
	`št32
(-1)

314 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

315 
»¶iÿs
 *
št32


316 
bud”
 *
Bud”


317 
ex³ùE¼
 
boŞ


320 
»¶iÿs
: &
§m¶”•liÿs
,

321 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

322 
objeù
: &
­psv1
.
D•loym’t
{},

324 
ex³ùE¼
: 
çl£
,

327 
»¶iÿs
: 
n
,

328 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

329 
objeù
: &
­psv1
.
D•loym’t
{},

331 
ex³ùE¼
: 
Œue
,

334 
»¶iÿs
: &
šv®id»¶iÿs
,

335 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

336 
objeù
: &
­psv1
.
D•loym’t
{},

338 
ex³ùE¼
: 
Œue
,

341 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

342 
Çme
, 
mock
 :=‚ame, mock

343 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

344 
b
 :ğ
mock
.
bud”
.
	`W™hR•liÿs
(mock.
»¶iÿs
)

345 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

346 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

348 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

349 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

353 
	}
}

355 
func
 
	$Te¡Bud”W™hSŒ©egyTy³
(
t
 *
‹¡šg
.
T
) {

356 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

357 
¡¿‹gyTy³
 
­psv1
.
D•loym’tSŒ©egyTy³


358 
bud”
 *
Bud”


359 
ex³ùE¼
 
boŞ


362 
¡¿‹gyTy³
: 
­psv1
.
Reü—‹D•loym’tSŒ©egyTy³
,

363 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

364 
objeù
: &
­psv1
.
D•loym’t
{},

366 
ex³ùE¼
: 
çl£
,

369 
¡¿‹gyTy³
: 
­psv1
.
	`D•loym’tSŒ©egyTy³
(""),

370 
bud”
: &
Bud”
{
d•loym’t
: &
D•loy
{

371 
objeù
: &
­psv1
.
D•loym’t
{},

373 
ex³ùE¼
: 
Œue
,

376 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

377 
Çme
, 
mock
 :=‚ame, mock

378 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

379 
b
 :ğ
mock
.
bud”
.
	`W™hSŒ©egyTy³
(mock.
¡¿‹gyTy³
)

380 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

381 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

383 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

384 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

388 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/deployment/appsv1/v1alpha1/kubernetes.go

16 
·ckage
 
v1®pha1


18 
impÜt
 (

22 
ş›Á
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/client/v1alpha1"

24 
­psv1
 "k8s.io/api/apps/v1"

25 
m‘av1
 "k8s.io/apimachinery/pkg/apis/meta/v1"

26 
ty³s
 "k8s.io/apimachinery/pkg/types"

32 
ty³
 
g‘Cl›Á£tFn
 
func
(è(*
	gkub”Ã‹s
.
	gCl›Á£t
, 
	g”rÜ
)

36 
ty³
 
g‘Cl›Á£tFÜP©hFn
 
func
(
·th
 
¡ršg
è(*
	gkub”Ã‹s
.
	gCl›Á£t
, 
	g”rÜ
)

40 
ty³
 
g‘Fn
 
func
(

41 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

42 
Çme
 
¡ršg
,

43 
Çme¥aû
 
¡ršg
,

44 
İts
 *
m‘av1
.
G‘O±iÚs
,

45 è(*
	g­psv1
.
	gD•loym’t
, 
	g”rÜ
)

49 
ty³
 
li¡Fn
 
func
(

50 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

51 
Çme¥aû
 
¡ršg
,

52 
İts
 *
m‘av1
.
Li¡O±iÚs
,

53 è(*
	g­psv1
.
	gD•loym’tLi¡
, 
	g”rÜ
)

57 
ty³
 
ü—‹Fn
 
func
(

58 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

59 
Çme¥aû
 
¡ršg
,

60 
d•loy
 *
­psv1
.
D•loym’t
,

61 è(*
	g­psv1
.
	gD•loym’t
, 
	g”rÜ
)

65 
ty³
 
d–‘eFn
 
	$func
(

66 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

67 
Çme¥aû
 
¡ršg
,

68 
Çme
 
¡ršg
,

69 
İts
 *
m‘av1
.
D–‘eO±iÚs
,

70 è
”rÜ


74 
ty³
 
·tchFn
 
	`func
(

75 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

76 
Çme
, 
Çme¥aû
 
¡ršg
,

77 
±
 
ty³s
.
P©chTy³
,

78 
d©a
 []
by‹
,

79 
sub»sourûs
 ...
¡ršg
,

80 è(*
­psv1
.
D•loym’t
, 
”rÜ
)

85 
ty³
 
rŞloutStusFn
 
	`func
(
d
 *
­psv1
.
D•loym’t
è(*
RŞloutOuut
, 
”rÜ
)

90 
ty³
 
rŞloutStusfFn
 
	`func
(
d
 *
­psv1
.
D•loym’t
è([]
by‹
, 
”rÜ
)

94 
func
 
	`deçuÉG‘Cl›Á£t
(è(*
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
) {

95  
ş›Á
.
	`In¡ªû
().
	`Cl›Á£t
()

96 
	}
}

101 
func
 
deçuÉG‘Cl›Á£tFÜP©h
(
·th
 
¡ršg
è(*
	gkub”Ã‹s
.
	gCl›Á£t
, 
	g”rÜ
) {

102  
	gş›Á
.
New
(
ş›Á
.
W™hKubeCÚfigP©h
(
·th
)).
Cl›Á£t
()

107 
func
 
deçuÉG‘
(

108 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

109 
Çme
 
¡ršg
,

110 
Çme¥aû
 
¡ršg
,

111 
İts
 *
m‘av1
.
G‘O±iÚs
,

112 è(*
	g­psv1
.
	gD•loym’t
, 
	g”rÜ
) {

114  
	gşi
.
AµsV1
().
D•loym’ts
(
Çme¥aû
).
G‘
(
Çme
, *
İts
)

119 
func
 
deçuÉLi¡
(

120 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

121 
Çme¥aû
 
¡ršg
,

122 
İts
 *
m‘av1
.
Li¡O±iÚs
,

123 è(*
	g­psv1
.
	gD•loym’tLi¡
, 
	g”rÜ
) {

125  
	gşi
.
AµsV1
().
D•loym’ts
(
Çme¥aû
).
Li¡
(*
İts
)

130 
func
 
deçuÉC»©e
(

131 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

132 
Çme¥aû
 
¡ršg
,

133 
d•loy
 *
­psv1
.
D•loym’t
,

134 è(*
	g­psv1
.
	gD•loym’t
, 
	g”rÜ
) {

136  
	gşi
.
AµsV1
().
D•loym’ts
(
Çme¥aû
).
C»©e
(
d•loy
)

141 
func
 
	$deçuÉD–
(

142 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

143 
Çme¥aû
 
¡ršg
,

144 
Çme
 
¡ršg
,

145 
İts
 *
m‘av1
.
D–‘eO±iÚs
,

146 è
”rÜ
 {

148  
şi
.
	`AµsV1
().
	`D•loym’ts
(
Çme¥aû
).
	`D–‘e
(
Çme
, 
İts
)

149 
	}
}

151 
func
 
deçuÉP©ch
(

152 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

153 
Çme
, 
Çme¥aû
 
¡ršg
,

154 
±
 
ty³s
.
P©chTy³
,

155 
d©a
 []
by‹
,

156 
sub»sourûs
 ...
¡ršg
,

157 è(*
	g­psv1
.
	gD•loym’t
, 
	g”rÜ
) {

158  
	gşi
.
AµsV1
().
D•loym’ts
(
Çme¥aû
).
P©ch
(
Çme
, 
±
, 
d©a
, 
sub»sourûs
...)

164 
func
 
deçuÉRŞloutStus
(
d
 *
­psv1
.
D•loym’t
è(*
	gRŞloutOuut
, 
	g”rÜ
) {

165 
	gb
 :ğ
NewFÜAPIObjeù
(
d
)

166  
b
.
RŞloutStus
()

171 
func
 
deçuÉRŞloutStusf
(
d
 *
­psv1
.
D•loym’t
è([]
by‹
, 
	g”rÜ
) {

172 
	gb
 :ğ
NewFÜAPIObjeù
(
d
)

173  
b
.
RŞloutStusRaw
()

177 
ty³
 
Kubeş›Á
 struct {

182 
ş›Á£t
 *
kub”Ã‹s
.
Cl›Á£t


184 
Çme¥aû
 
¡ršg


187 
kubeCÚfigP©h
 
¡ršg


190 
g‘Cl›Á£t
 
g‘Cl›Á£tFn


191 
g‘Cl›Á£tFÜP©h
 
g‘Cl›Á£tFÜP©hFn


192 
g‘
 
g‘Fn


193 
li¡
 
li¡Fn


194 
ü—‹
 
ü—‹Fn


195 
d–
 
d–‘eFn


196 
·tch
 
·tchFn


197 
rŞloutStus
 
rŞloutStusFn


198 
rŞloutStusf
 
rŞloutStusfFn


203 
ty³
 
Kubeş›ÁBudO±iÚ
 
	$func
(*
Kubeş›Á
)

207 
	$func
 (
k
 *
Kubeş›Á
è
	$w™hDeçuÉs
() {

209 
k
.
g‘Cl›Á£t
 =ğ
n
 {

210 
k
.
g‘Cl›Á£t
 = 
deçuÉG‘Cl›Á£t


212 
k
.
g‘Cl›Á£tFÜP©h
 =ğ
n
 {

213 
k
.
g‘Cl›Á£tFÜP©h
 = 
deçuÉG‘Cl›Á£tFÜP©h


215 
k
.
g‘
 =ğ
n
 {

216 
k
.
g‘
 = 
deçuÉG‘


218 
k
.
li¡
 =ğ
n
 {

219 
k
.
li¡
 = 
deçuÉLi¡


221 
k
.
ü—‹
 =ğ
n
 {

222 
k
.
ü—‹
 = 
deçuÉC»©e


224 
k
.
d–
 =ğ
n
 {

225 
k
.
d–
 = 
deçuÉD–


227 
k
.
·tch
 =ğ
n
 {

228 
k
.
·tch
 = 
deçuÉP©ch


230 
k
.
rŞloutStus
 =ğ
n
 {

231 
k
.
rŞloutStus
 = 
deçuÉRŞloutStus


233 
k
.
rŞloutStusf
 =ğ
n
 {

234 
k
.
rŞloutStusf
 = 
deçuÉRŞloutStusf


236 
	}
}

239 
func
 
	$W™hCl›Á£t
(
c
 *
kub”Ã‹s
.
Cl›Á£t
è
Kubeş›ÁBudO±iÚ
 {

240  
	`func
(
k
 *
Kubeş›Á
) {

241 
k
.
ş›Á£t
 = 
c


243 
	}
}

247 
	$func
 (
k
 *
Kubeş›Á
è
	`W™hName¥aû
(
Çme¥aû
 
¡ršg
) *Kubeclient {

248 
k
.
Çme¥aû
 =‚amespace

249  
k


250 
	}
}

254 
func
 
	$W™hKubeCÚfigP©h
(
·th
 
¡ršg
è
Kubeş›ÁBudO±iÚ
 {

255  
	`func
(
k
 *
Kubeş›Á
) {

256 
k
.
kubeCÚfigP©h
 = 
·th


258 
	}
}

261 
func
 
	$W™hName¥aû
(
Çme¥aû
 
¡ršg
è
Kubeş›ÁBudO±iÚ
 {

262  
	`func
(
k
 *
Kubeş›Á
) {

263 
k
.
Çme¥aû
 =‚amespace

265 
	}
}

269 
func
 
NewKubeCl›Á
(
İts
 ...
Kubeş›ÁBudO±iÚ
è*
Kubeş›Á
 {

270 
k
 :ğ&
Kubeş›Á
{}

271 
_
, 
	go
 :ğ
¿nge
 
İts
 {

272 
o
(
k
)

275 
k
.
w™hDeçuÉs
()

276  
k


279 
	$func
 (
k
 *
Kubeş›Á
è
	`g‘Cl›Á£tFÜP©hOrDœeù
(è(*
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
) {

280 
k
.
kubeCÚfigP©h
 != "" {

281  
k
.
	`g‘Cl›Á£tFÜP©h
(k.
kubeCÚfigP©h
)

284  
k
.
	`g‘Cl›Á£t
()

285 
	}
}

289 
	$func
 (
k
 *
Kubeş›Á
è
	`g‘Cl›ÁOrCached
(è(*
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
) {

290 
k
.
ş›Á£t
 !ğ
n
 {

291  
k
.
ş›Á£t
, 
n


294 
c
, 
”r
 :ğ
k
.
	`g‘Cl›Á£tFÜP©hOrDœeù
()

295 
”r
 !ğ
n
 {

296  
n
, 
”r


299 
k
.
ş›Á£t
 = 
c


300  
k
.
ş›Á£t
, 
n


301 
	}
}

304 
	$func
 (
k
 *
Kubeş›Á
è
	`G‘
(
Çme
 
¡ršg
è(*
­psv1
.
D•loym’t
, 
”rÜ
) {

305 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

306 
”r
 !ğ
n
 {

307  
n
, 
”r


310  
k
.
	`g‘
(
şi
, 
Çme
, k.
Çme¥aû
, &
m‘av1
.
G‘O±iÚs
{})

311 
	}
}

314 
	$func
 (
k
 *
Kubeş›Á
è
	`Li¡
(
İts
 *
m‘av1
.
Li¡O±iÚs
è(*
­psv1
.
D•loym’tLi¡
, 
”rÜ
) {

315 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

316 
”r
 !ğ
n
 {

317  
n
, 
”r


319  
k
.
	`li¡
(
şi
, k.
Çme¥aû
, 
İts
)

320 
	}
}

323 
	$func
 (
k
 *
Kubeş›Á
è
	`P©ch
(

324 
Çme
 
¡ršg
,

325 
±
 
ty³s
.
P©chTy³
,

326 
d©a
 []
by‹
,

327 
sub»sourûs
 ...
¡ršg
,

328 è(*
­psv1
.
D•loym’t
, 
”rÜ
) {

329 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

330 
”r
 !ğ
n
 {

331  
n
, 
”r


334  
k
.
	`·tch
(
şi
, 
Çme
, k.
Çme¥aû
, 
±
, 
d©a
, 
sub»sourûs
...)

335 
	}
}

338 
	$func
 (
k
 *
Kubeş›Á
è
	`G‘Raw
(
Çme
 
¡ršg
è([]
by‹
, 
”rÜ
) {

339 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

340 
”r
 !ğ
n
 {

341  
n
, 
”r


344 
d
, 
”r
 :ğ
k
.
	`g‘
(
şi
, 
Çme
, k.
Çme¥aû
, &
m‘av1
.
G‘O±iÚs
{})

345 
”r
 !ğ
n
 {

346  
n
, 
”r


349  
jsÚ
.
	`M¬sh®
(
d
)

350 
	}
}

354 
	$func
 (
k
 *
Kubeş›Á
è
	$D–‘e
(
Çme
 
¡ršg
, 
İts
 *
m‘av1
.
D–‘eO±iÚs
è
”rÜ
 {

355 
¡ršgs
.
	`TrimS·û
(
Çme
) == "" {

356  
”rÜs
.
	`New
("failedo delete deployment: missing deployment‚ame")

359 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

360 
”r
 !ğ
n
 {

361  
”rÜs
.
	`W¿pf
(
”r
, "çedØd–‘d•loym’ˆ{%s}", 
Çme
)

364  
k
.
	`d–
(
şi
, k.
Çme¥aû
, 
Çme
, 
İts
)

365 
	}
}

368 
	$func
 (
k
 *
Kubeş›Á
è
	`C»©e
(
d•loym’t
 *
­psv1
.
D•loym’t
è(*­psv1.D•loym’t, 
”rÜ
) {

369 
d•loym’t
 =ğ
n
 {

370  
n
, 
”rÜs
.
	`New
("failedo create deployment:‚il deployment object")

373 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

374 
”r
 !ğ
n
 {

375  
n
, 
”rÜs
.
	`W¿pf
(

376 
”r
,

378 
d•loym’t
.
Name
,

379 
d•loym’t
.
Name¥aû
,

383  
k
.
	`ü—‹
(
şi
, k.
Çme¥aû
, 
d•loym’t
)

384 
	}
}

388 
	$func
 (
k
 *
Kubeş›Á
è
	$RŞloutStusf
(
Çme
 
¡ršg
è(
İ
 []
by‹
, 
”r
 
”rÜ
) {

389 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

390 
”r
 !ğ
n
 {

391  
n
, 
”r


394 
d
, 
”r
 :ğ
k
.
	`g‘
(
şi
, 
Çme
, k.
Çme¥aû
, &
m‘av1
.
G‘O±iÚs
{})

395 
”r
 !ğ
n
 {

396  
n
, 
”r


399  
k
.
	`rŞloutStusf
(
d
)

400 
	}
}

403 
	$func
 (
k
 *
Kubeş›Á
è
	`RŞloutStus
(
Çme
 
¡ršg
è(*
RŞloutOuut
, 
”rÜ
) {

404 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

405 
”r
 !ğ
n
 {

406  
n
, 
”r


409 
d
, 
”r
 :ğ
k
.
	`g‘
(
şi
, 
Çme
, k.
Çme¥aû
, &
m‘av1
.
G‘O±iÚs
{})

410 
”r
 !ğ
n
 {

411  
n
, 
”r


414  
k
.
	`rŞloutStus
(
d
)

415 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/deployment/appsv1/v1alpha1/rollout_status.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

28 
ty³
 
rŞloutStus
 
	$func
(*
D•loy
è
¡ršg


32 
v¬
 
rŞloutStu£s
 = 
m­
[
P»diÿ‹Name
]
rŞloutStus
{

35 
P»diÿ‹Prog»ssD—dlšeExûeded
: 
	`func
(
d
 *
D•loy
è
¡ršg
 {

40 
P»diÿ‹Old”R•liÿAùive
: 
	`func
(
d
 *
D•loy
è
¡ršg
 {

41 
d
.
objeù
.
S³c
.
R•liÿs
 =ğ
n
 {

44  
fmt
.
	`S´štf
(

46 
d
.
objeù
.
Stus
.
Upd©edR•liÿs
, *d.objeù.
S³c
.
R•liÿs
)

50 
P»diÿ‹T”mš©iÚInProg»ss
: 
	`func
(
d
 *
D•loy
è
¡ršg
 {

51  
fmt
.
	`S´štf
(

53 
d
.
objeù
.
Stus
.
R•liÿs
-d.objeù.Stus.
Upd©edR•liÿs
)

56 
P»diÿ‹Upd©eInProg»ss
: 
	`func
(
d
 *
D•loy
è
¡ršg
 {

57  
fmt
.
	`S´štf
(

59 
d
.
objeù
.
Stus
.
AvaabËR•liÿs
, d.objeù.Stus.
Upd©edR•liÿs
)

62 
P»diÿ‹NÙS³cSynûd
: 
	`func
(
d
 *
D•loy
è
¡ršg
 {

65 
	}
}

68 
v¬
 
	grŞloutChecks
 = 
m­
[
P»diÿ‹Name
]
P»diÿ‹
{

70 
P»diÿ‹Prog»ssD—dlšeExûeded
: 
IsProg»ssD—dlšeExûeded
(),

72 
P»diÿ‹Old”R•liÿAùive
: 
IsOld”R•liÿAùive
(),

74 
P»diÿ‹T”mš©iÚInProg»ss
: 
IsT”mš©iÚInProg»ss
(),

76 
P»diÿ‹Upd©eInProg»ss
: 
IsUpd©eInProg»ss
(),

78 
P»diÿ‹NÙS³cSynûd
: 
IsNÙSyncS³c
(),

82 
ty³
 
RŞloutOuut
 struct {

83 
IsRŞËdout
 
boŞ
 `
jsÚ
:"isRolledout"`

84 
Mes§ge
 
¡ršg
 `
jsÚ
:"message"`

89 
ty³
 
¿wFn
 
func
(
r
 *
RŞloutOuut
è([]
by‹
, 
	g”rÜ
)

92 
ty³
 
RŞlout
 struct {

93 
ouut
 *
RŞloutOuut


94 
¿w
 
	m¿wFn


99 
ty³
 
rŞloutBudO±iÚ
 
	$func
(*
RŞlout
)

104 
func
 
	`NewRŞlout
(
İts
 ...
rŞloutBudO±iÚ
è*
RŞlout
 {

105 
r
 :ğ&
RŞlout
{}

106 
_
, 
o
 :ğ
¿nge
 
İts
 {

107 
	`o
(
r
)

109 
r
.
	`w™hDeçuÉs
()

110  
r


111 
	}
}

114 
func
 
	$w™hOuutObjeù
(
o
 *
RŞloutOuut
è
rŞloutBudO±iÚ
 {

115  
	`func
(
r
 *
RŞlout
) {

116 
r
.
ouut
 = 
o


118 
	}
}

121 
	$func
 (
r
 *
RŞlout
è
	$w™hDeçuÉs
() {

122 
r
.
¿w
 =ğ
n
 {

123 
r
.
¿w
 = 
	`func
(
o
 *
RŞloutOuut
è([]
by‹
, 
”rÜ
) {

124  
jsÚ
.
	`M¬sh®
(
o
)

127 
	}
}

130 
	$func
 (
r
 *
RŞlout
è
	`Raw
(è([]
by‹
, 
”rÜ
) {

131 
r
.
ouut
 =ğ
n
 {

132  
n
, 
”rÜs
.
	`New
("unableo get„ollout status output")

134  
r
.
	`¿w
Ô.
ouut
)

135 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/podtemplatespec/v1alpha1/podtemplatespec.go

15 
·ckage
 
v1®pha1


17 
impÜt
 (

18 
”rÜs
 "github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1"

19 
cÚš”
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/container/v1alpha1"

20 
vŞume
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/volume/v1alpha1"

21 
cÜev1
 "k8s.io/api/core/v1"

25 
ty³
 
PodTem¶©eS³c
 struct {

26 
Objeù
 *
	mcÜev1
.
	mPodTem¶©eS³c


30 
ty³
 
Bud”
 struct {

31 
pod‹m¶©e¥ec
 *
PodTem¶©eS³c


32 
	m”rs
 []
	m”rÜ


36 
func
 
NewBud”
(è*
	gBud”
 {

37  &
	gBud”
{

38 
	gpod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

39 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

45 
	$func
 (
b
 *
Bud”
è
	`W™hName
(
Çme
 
¡ršg
) *Builder {

46 
	`Ën
(
Çme
) == 0 {

47 
b
.
”rs
 = 
	`­³nd
(

48 
b
.
”rs
,

49 
”rÜs
.
	`New
("failedo build…odtemplatespec object: missing‚ame"),

51  
b


53 
b
.
pod‹m¶©e¥ec
.
Objeù
.
Name
 = 
Çme


54  
b


55 
	}
}

58 
	$func
 (
b
 *
Bud”
è
	`W™hName¥aû
(
Çme¥aû
 
¡ršg
) *Builder {

59 
	`Ën
(
Çme¥aû
) == 0 {

60 
b
.
”rs
 = 
	`­³nd
(

61 
b
.
”rs
,

62 
”rÜs
.
	`New
(

66  
b


68 
b
.
pod‹m¶©e¥ec
.
Objeù
.
Name¥aû
 = 
Çme¥aû


69  
b


70 
	}
}

74 
	$func
 (
b
 *
Bud”
è
	`W™hAÂÙ©iÚs
(
ªnÙ©iÚs
 
m­
[
¡ršg
]string) *Builder {

75 
	`Ën
(
ªnÙ©iÚs
) == 0 {

76 
b
.
”rs
 = 
	`­³nd
(

77 
b
.
”rs
,

78 
”rÜs
.
	`New
("failedo build deployment object: missing‡nnotations"),

80  
b


83 
b
.
pod‹m¶©e¥ec
.
Objeù
.
AÂÙ©iÚs
 =ğ
n
 {

84  
b
.
	`W™hAÂÙ©iÚsNew
(
ªnÙ©iÚs
)

87 
key
, 
v®ue
 :ğ
¿nge
 
ªnÙ©iÚs
 {

88 
b
.
pod‹m¶©e¥ec
.
Objeù
.
AÂÙ©iÚs
[
key
] = 
v®ue


90  
b


91 
	}
}

95 
	$func
 (
b
 *
Bud”
è
	`W™hAÂÙ©iÚsNew
(
ªnÙ©iÚs
 
m­
[
¡ršg
]string) *Builder {

96 
	`Ën
(
ªnÙ©iÚs
) == 0 {

97 
b
.
”rs
 = 
	`­³nd
(

98 
b
.
”rs
,

99 
”rÜs
.
	`New
(

103  
b


107 
ÃwªnÙ©iÚs
 :ğ
m­
[
¡ršg
]string{}

108 
key
, 
v®ue
 :ğ
¿nge
 
ªnÙ©iÚs
 {

109 
ÃwªnÙ©iÚs
[
key
] = 
v®ue


113 
b
.
pod‹m¶©e¥ec
.
Objeù
.
AÂÙ©iÚs
 = 
ÃwªnÙ©iÚs


114  
b


115 
	}
}

119 
	$func
 (
b
 *
Bud”
è
	`W™hLab–s
(
Ïb–s
 
m­
[
¡ršg
]string) *Builder {

120 
	`Ën
(
Ïb–s
) == 0 {

121 
b
.
”rs
 = 
	`­³nd
(

122 
b
.
”rs
,

123 
”rÜs
.
	`New
(

127  
b


130 
b
.
pod‹m¶©e¥ec
.
Objeù
.
Lab–s
 =ğ
n
 {

131  
b
.
	`W™hLab–sNew
(
Ïb–s
)

134 
key
, 
v®ue
 :ğ
¿nge
 
Ïb–s
 {

135 
b
.
pod‹m¶©e¥ec
.
Objeù
.
Lab–s
[
key
] = 
v®ue


137  
b


138 
	}
}

142 
	$func
 (
b
 *
Bud”
è
	`W™hLab–sNew
(
Ïb–s
 
m­
[
¡ršg
]string) *Builder {

143 
	`Ën
(
Ïb–s
) == 0 {

144 
b
.
”rs
 = 
	`­³nd
(

145 
b
.
”rs
,

146 
”rÜs
.
	`New
(

150  
b


154 
Ãwlbls
 :ğ
m­
[
¡ršg
]string{}

155 
key
, 
v®ue
 :ğ
¿nge
 
Ïb–s
 {

156 
Ãwlbls
[
key
] = 
v®ue


160 
b
.
pod‹m¶©e¥ec
.
Objeù
.
Lab–s
 = 
Ãwlbls


161  
b


162 
	}
}

166 
	$func
 (
b
 *
Bud”
è
	`W™hNodeS–eùÜ
(
node£ËùÜs
 
m­
[
¡ršg
]string) *Builder {

167 
	`Ën
(
node£ËùÜs
) == 0 {

168 
b
.
”rs
 = 
	`­³nd
(

169 
b
.
”rs
,

170 
”rÜs
.
	`New
(

174  
b


177 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
NodeS–eùÜ
 =ğ
n
 {

178  
b
.
	`W™hNodeS–eùÜNew
(
node£ËùÜs
)

181 
key
, 
v®ue
 :ğ
¿nge
 
node£ËùÜs
 {

182 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
NodeS–eùÜ
[
key
] = 
v®ue


184  
b


185 
	}
}

189 
	$func
 (
b
 *
Bud”
è
	`W™hNodeS–eùÜNew
(
node£ËùÜs
 
m­
[
¡ršg
]string) *Builder {

190 
	`Ën
(
node£ËùÜs
) == 0 {

191 
b
.
”rs
 = 
	`­³nd
(

192 
b
.
”rs
,

193 
”rÜs
.
	`New
(

197  
b


201 
Ãwnode£ËùÜs
 :ğ
m­
[
¡ršg
]string{}

202 
key
, 
v®ue
 :ğ
¿nge
 
node£ËùÜs
 {

203 
Ãwnode£ËùÜs
[
key
] = 
v®ue


207 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
NodeS–eùÜ
 = 
Ãwnode£ËùÜs


208  
b


209 
	}
}

212 
	$func
 (
b
 *
Bud”
è
	`W™hS”viûAccouÁName
(
£rviûAccouÁnNme
 
¡ršg
) *Builder {

213 
	`Ën
(
£rviûAccouÁnNme
) == 0 {

214 
b
.
”rs
 = 
	`­³nd
(

215 
b
.
”rs
,

216 
”rÜs
.
	`New
(

220  
b


223 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
S”viûAccouÁName
 = 
£rviûAccouÁnNme


224  
b


225 
	}
}

228 
	$func
 (
b
 *
Bud”
è
	`W™hAffš™y
(
affš™y
 *
cÜev1
.
Affš™y
) *Builder {

229 
affš™y
 =ğ
n
 {

230 
b
.
”rs
 = 
	`­³nd
(

231 
b
.
”rs
,

232 
”rÜs
.
	`New
(

236  
b


240 
Ãwaffš™yli¡
 :ğ*
affš™y


242 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
Affš™y
 = &
Ãwaffš™yli¡


243  
b


244 
	}
}

248 
	$func
 (
b
 *
Bud”
è
	`W™hTŞ”©iÚs
(
tŞ”©iÚs
 ...
cÜev1
.
TŞ”©iÚ
) *Builder {

249 
tŞ”©iÚs
 =ğ
n
 {

250 
b
.
”rs
 = 
	`­³nd
(

251 
b
.
”rs
,

252 
”rÜs
.
	`New
(

256  
b


258 
	`Ën
(
tŞ”©iÚs
) == 0 {

259 
b
.
”rs
 = 
	`­³nd
(

260 
b
.
”rs
,

261 
”rÜs
.
	`New
(

265  
b


268 
	`Ën
(
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
TŞ”©iÚs
) == 0 {

269  
b
.
	`W™hTŞ”©iÚsNew
(
tŞ”©iÚs
...)

272 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
TŞ”©iÚs
 = 
	`­³nd
(

273 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
TŞ”©iÚs
,

274 
tŞ”©iÚs
...,

277  
b


278 
	}
}

281 
	$func
 (
b
 *
Bud”
è
	`W™hTŞ”©iÚsNew
(
tŞ”©iÚs
 ...
cÜev1
.
TŞ”©iÚ
) *Builder {

282 
tŞ”©iÚs
 =ğ
n
 {

283 
b
.
”rs
 = 
	`­³nd
(

284 
b
.
”rs
,

285 
”rÜs
.
	`New
(

289  
b


291 
	`Ën
(
tŞ”©iÚs
) == 0 {

292 
b
.
”rs
 = 
	`­³nd
(

293 
b
.
”rs
,

294 
”rÜs
.
	`New
(

298  
b


302 
ÃwtŞ”©iÚs
 :ğ[]
cÜev1
.
TŞ”©iÚ
{}

303 
ÃwtŞ”©iÚs
 = 
	`­³nd
ÒewtŞ”©iÚs, 
tŞ”©iÚs
...)

305 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
TŞ”©iÚs
 = 
ÃwtŞ”©iÚs


307  
b


308 
	}
}

312 
	$func
 (
b
 *
Bud”
è
	`W™hCÚš”Bud”s
(

313 
cÚš”Bud”Li¡
 ...*
cÚš”
.
Bud”
,

314 è*
Bud”
 {

315 
cÚš”Bud”Li¡
 =ğ
n
 {

316 
b
.
”rs
 = 
	`­³nd
(

317 
b
.
”rs
,

318 
”rÜs
.
	`New
("failedo build…odtemplatespec:‚il containerbuilder"),

320  
b


322 
_
, 
cÚš”Bud”
 :ğ
¿nge
 
cÚš”Bud”Li¡
 {

323 
cÚš”Obj
, 
”r
 :ğ
cÚš”Bud”
.
	`Bud
()

324 
”r
 !ğ
n
 {

325 
b
.
”rs
 = 
	`­³nd
(

326 
b
.
”rs
,

327 
”rÜs
.
	`W¿p
(

328 
”r
,

332  
b


334 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
CÚš”s
 = 
	`­³nd
(

335 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
CÚš”s
,

336 
cÚš”Obj
,

339  
b


340 
	}
}

344 
	$func
 (
b
 *
Bud”
è
	`W™hVŞumeBud”s
(

345 
vŞumeBud”Li¡
 ...*
vŞume
.
Bud”
,

346 è*
Bud”
 {

347 
vŞumeBud”Li¡
 =ğ
n
 {

348 
b
.
”rs
 = 
	`­³nd
(

349 
b
.
”rs
,

350 
”rÜs
.
	`New
("failedo build…odtemplatespec:‚il volumeBuilderList"),

352  
b


354 
_
, 
vŞumeBud”
 :ğ
¿nge
 
vŞumeBud”Li¡
 {

355 
vŞ
, 
”r
 :ğ
vŞumeBud”
.
	`Bud
()

356 
”r
 !ğ
n
 {

357 
b
.
”rs
 = 
	`­³nd
(

358 
b
.
”rs
,

359 
”rÜs
.
	`W¿p
(
”r
, "failedo build…odtemplatespec"),

361  
b


363 
ÃwvŞ
 :ğ*
vŞ


364 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
VŞumes
 = 
	`­³nd
(

365 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
VŞumes
,

366 
ÃwvŞ
,

369  
b


370 
	}
}

374 
	$func
 (
b
 *
Bud”
è
	`W™hCÚš”Bud”sNew
(

375 
cÚš”Bud”Li¡
 ...*
cÚš”
.
Bud”
,

376 è*
Bud”
 {

377 
cÚš”Bud”Li¡
 =ğ
n
 {

378 
b
.
”rs
 = 
	`­³nd
(

379 
b
.
”rs
,

380 
”rÜs
.
	`New
("failedo build…odtemplatespec:‚il containerbuilder"),

382  
b


384 
	`Ën
(
cÚš”Bud”Li¡
) == 0 {

385 
b
.
”rs
 = 
	`­³nd
(

386 
b
.
”rs
,

387 
”rÜs
.
	`New
("failedo build…odtemplatespec: missing containerbuilder"),

389  
b


391 
cÚš”Li¡
 :ğ[]
cÜev1
.
CÚš”
{}

392 
_
, 
cÚš”Bud”
 :ğ
¿nge
 
cÚš”Bud”Li¡
 {

393 
cÚš”Obj
, 
”r
 :ğ
cÚš”Bud”
.
	`Bud
()

394 
”r
 !ğ
n
 {

395 
b
.
”rs
 = 
	`­³nd
(

396 
b
.
”rs
,

397 
”rÜs
.
	`W¿p
(

398 
”r
,

402  
b


404 
cÚš”Li¡
 = 
	`­³nd
(

405 
cÚš”Li¡
,

406 
cÚš”Obj
,

409 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
CÚš”s
 = 
cÚš”Li¡


410  
b


411 
	}
}

415 
	$func
 (
b
 *
Bud”
è
	`W™hVŞumeBud”sNew
(

416 
vŞumeBud”Li¡
 ...*
vŞume
.
Bud”
,

417 è*
Bud”
 {

418 
vŞumeBud”Li¡
 =ğ
n
 {

419 
b
.
”rs
 = 
	`­³nd
(

420 
b
.
”rs
,

421 
”rÜs
.
	`New
("failedo build…odtemplatespec:‚il volumeBuilderList"),

423  
b


425 
	`Ën
(
vŞumeBud”Li¡
) == 0 {

426 
b
.
”rs
 = 
	`­³nd
(

427 
b
.
”rs
,

428 
”rÜs
.
	`New
("failedo build…odtemplatespec: missing volumeBuilderList"),

430  
b


432 
vŞLi¡
 :ğ[]
cÜev1
.
VŞume
{}

433 
_
, 
vŞumeBud”
 :ğ
¿nge
 
vŞumeBud”Li¡
 {

434 
vŞ
, 
”r
 :ğ
vŞumeBud”
.
	`Bud
()

435 
”r
 !ğ
n
 {

436 
b
.
”rs
 = 
	`­³nd
(

437 
b
.
”rs
,

438 
”rÜs
.
	`W¿p
(
”r
, "failedo build…odtemplatespec"),

440  
b


442 
ÃwvŞ
 :ğ*
vŞ


443 
vŞLi¡
 = 
	`­³nd
(

444 
vŞLi¡
,

445 
ÃwvŞ
,

448 
b
.
pod‹m¶©e¥ec
.
Objeù
.
S³c
.
VŞumes
 = 
vŞLi¡


449  
b


450 
	}
}

453 
	$func
 (
b
 *
Bud”
è
	`Bud
(è(*
PodTem¶©eS³c
, 
”rÜ
) {

454 
”r
 :ğ
b
.
	`v®id©e
()

455 
”r
 !ğ
n
 {

456  
n
, 
”rÜs
.
	`W¿pf
(

457 
”r
,

459 
b
.
pod‹m¶©e¥ec
.
Objeù
,

462  
b
.
pod‹m¶©e¥ec
, 
n


463 
	}
}

465 
	$func
 (
b
 *
Bud”
è
	$v®id©e
(è
”rÜ
 {

466 
	`Ën
(
b
.
”rs
) != 0 {

467  
”rÜs
.
	`E¼Üf
(

469 
b
.
”rs
,

472  
n


473 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/podtemplatespec/v1alpha1/podtemplatespec_test.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

22 
cÚ©š”
 "github.com/openebs/maya/pkg/kubernetes/container/v1alpha1"

23 
cÜev1
 "k8s.io/api/core/v1"

26 
func
 
	$Te¡Bud”W™hName
(
t
 *
‹¡šg
.
T
) {

27 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

28 
Çme
 
¡ršg


29 
bud”
 *
Bud”


30 
ex³ùE¼
 
boŞ


33 
Çme
: "PVC1",

34 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

35 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

37 
ex³ùE¼
: 
çl£
,

40 
Çme
: "",

41 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

42 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

44 
ex³ùE¼
: 
Œue
,

47 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

48 
Çme
, 
mock
 :=‚ame, mock

49 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

50 
b
 :ğ
mock
.
bud”
.
	`W™hName
(mock.
Çme
)

51 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

52 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

54 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

55 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

59 
	}
}

61 
func
 
	$Te¡Bud”W™hName¥aû
(
t
 *
‹¡šg
.
T
) {

62 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

63 
Çme¥aû
 
¡ršg


64 
bud”
 *
Bud”


65 
ex³ùE¼
 
boŞ


68 
Çme¥aû
: "PVC1",

69 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

70 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

72 
ex³ùE¼
: 
çl£
,

75 
Çme¥aû
: "",

76 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

77 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

79 
ex³ùE¼
: 
Œue
,

82 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

83 
Çme
, 
mock
 :=‚ame, mock

84 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

85 
b
 :ğ
mock
.
bud”
.
	`W™hName¥aû
(mock.
Çme¥aû
)

86 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

87 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

89 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

90 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

94 
	}
}

96 
func
 
	$Te¡BudW™hAÂÙ©iÚs
(
t
 *
‹¡šg
.
T
) {

97 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

98 
ªnÙ©iÚs
 
m­
[
¡ršg
]string

99 
bud”
 *
Bud”


100 
ex³ùE¼
 
boŞ


103 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

105 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

106 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

108 
ex³ùE¼
: 
çl£
,

111 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{},

112 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

113 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

115 
ex³ùE¼
: 
Œue
,

118 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

119 
Çme
, 
mock
 :=‚ame, mock

120 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

121 
b
 :ğ
mock
.
bud”
.
	`W™hAÂÙ©iÚs
(mock.
ªnÙ©iÚs
)

122 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

123 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

125 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

126 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

130 
	}
}

132 
func
 
	$Te¡BudW™hAÂÙ©iÚsNew
(
t
 *
‹¡šg
.
T
) {

133 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

134 
ªnÙ©iÚs
 
m­
[
¡ršg
]string

135 
bud”
 *
Bud”


136 
ex³ùE¼
 
boŞ


139 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

141 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

142 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

144 
ex³ùE¼
: 
çl£
,

147 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{},

148 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

149 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

151 
ex³ùE¼
: 
Œue
,

154 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

155 
Çme
, 
mock
 :=‚ame, mock

156 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

157 
b
 :ğ
mock
.
bud”
.
	`W™hAÂÙ©iÚsNew
(mock.
ªnÙ©iÚs
)

158 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

159 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

161 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

162 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

166 
	}
}

168 
func
 
	$Te¡BudW™hLab–s
(
t
 *
‹¡šg
.
T
) {

169 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

170 
Ïb–s
 
m­
[
¡ršg
]string

171 
bud”
 *
Bud”


172 
ex³ùE¼
 
boŞ


175 
Ïb–s
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

177 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

178 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

180 
ex³ùE¼
: 
çl£
,

183 
Ïb–s
: 
m­
[
¡ršg
]string{},

184 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

185 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

187 
ex³ùE¼
: 
Œue
,

190 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

191 
Çme
, 
mock
 :=‚ame, mock

192 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

193 
b
 :ğ
mock
.
bud”
.
	`W™hLab–s
(mock.
Ïb–s
)

194 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

195 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

197 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

198 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

202 
	}
}

204 
func
 
	$Te¡BudW™hLab–sNew
(
t
 *
‹¡šg
.
T
) {

205 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

206 
Ïb–s
 
m­
[
¡ršg
]string

207 
bud”
 *
Bud”


208 
ex³ùE¼
 
boŞ


211 
Ïb–s
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

213 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

214 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

216 
ex³ùE¼
: 
çl£
,

219 
Ïb–s
: 
m­
[
¡ršg
]string{},

220 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

221 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

223 
ex³ùE¼
: 
Œue
,

226 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

227 
Çme
, 
mock
 :=‚ame, mock

228 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

229 
b
 :ğ
mock
.
bud”
.
	`W™hLab–sNew
(mock.
Ïb–s
)

230 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

231 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

233 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

234 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

238 
	}
}

240 
func
 
	$Te¡BudW™hAffš™y
(
t
 *
‹¡šg
.
T
) {

241 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

242 
affš™y
 *
cÜev1
.
Affš™y


243 
bud”
 *
Bud”


244 
ex³ùE¼
 
boŞ


247 
affš™y
: &
cÜev1
.
Affš™y
{},

248 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

249 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

251 
ex³ùE¼
: 
çl£
,

254 
affš™y
: 
n
,

255 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

256 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

258 
ex³ùE¼
: 
Œue
,

261 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

262 
Çme
, 
mock
 :=‚ame, mock

263 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

264 
b
 :ğ
mock
.
bud”
.
	`W™hAffš™y
(mock.
affš™y
)

265 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

266 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

268 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

269 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

273 
	}
}

275 
func
 
	$Te¡BudW™hCÚš”Bud”s
(
t
 *
‹¡šg
.
T
) {

276 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

277 
cÚBud”s
 []*
cÚ©š”
.
Bud”


278 
bud”
 *
Bud”


279 
ex³ùE¼
 
boŞ


282 
cÚBud”s
: []*
cÚ©š”
.
Bud”
{

283 
cÚ©š”
.
	`NewBud”
(),

285 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

286 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

288 
ex³ùE¼
: 
çl£
,

291 
cÚBud”s
: 
n
,

292 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

293 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

295 
ex³ùE¼
: 
Œue
,

298 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

299 
Çme
, 
mock
 :=‚ame, mock

300 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

301 
b
 :ğ
mock
.
bud”
.
	`W™hCÚš”Bud”s
(mock.
cÚBud”s
...)

302 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

303 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

305 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

306 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

310 
	}
}

312 
func
 
	$Te¡Bud”W™hCÚš”Bud”sNew
(
t
 *
‹¡šg
.
T
) {

313 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

314 
cÚBud”s
 []*
cÚ©š”
.
Bud”


315 
bud”
 *
Bud”


316 
ex³ùE¼
 
boŞ


319 
cÚBud”s
: []*
cÚ©š”
.
Bud”
{

320 
cÚ©š”
.
	`NewBud”
(),

322 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

323 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

325 
ex³ùE¼
: 
çl£
,

328 
cÚBud”s
: 
n
,

329 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

330 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

332 
ex³ùE¼
: 
Œue
,

335 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

336 
Çme
, 
mock
 :=‚ame, mock

337 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

338 
b
 :ğ
mock
.
bud”
.
	`W™hCÚš”Bud”sNew
(mock.
cÚBud”s
...)

339 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

340 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

342 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

343 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

347 
	}
}

349 
func
 
	$Te¡Bud”W™hTŞ”©iÚs
(
t
 *
‹¡šg
.
T
) {

350 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

351 
tŞ”©iÚs
 []
cÜev1
.
TŞ”©iÚ


352 
bud”
 *
Bud”


353 
ex³ùE¼
 
boŞ


356 
tŞ”©iÚs
: []
cÜev1
.
TŞ”©iÚ
{

357 
cÜev1
.
TŞ”©iÚ
{},

359 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

360 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

362 
ex³ùE¼
: 
çl£
,

365 
tŞ”©iÚs
: []
cÜev1
.
TŞ”©iÚ
{},

366 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

367 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

369 
ex³ùE¼
: 
Œue
,

372 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

373 
Çme
, 
mock
 :=‚ame, mock

374 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

375 
b
 :ğ
mock
.
bud”
.
	`W™hTŞ”©iÚs
(mock.
tŞ”©iÚs
...)

376 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

377 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

379 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

380 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

384 
	}
}

386 
func
 
	$Te¡Bud”W™hTŞ”©iÚsNew
(
t
 *
‹¡šg
.
T
) {

387 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

388 
tŞ”©iÚs
 []
cÜev1
.
TŞ”©iÚ


389 
bud”
 *
Bud”


390 
ex³ùE¼
 
boŞ


393 
tŞ”©iÚs
: []
cÜev1
.
TŞ”©iÚ
{

394 
cÜev1
.
TŞ”©iÚ
{},

396 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

397 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

399 
ex³ùE¼
: 
çl£
,

402 
tŞ”©iÚs
: []
cÜev1
.
TŞ”©iÚ
{},

403 
bud”
: &
Bud”
{
pod‹m¶©e¥ec
: &
PodTem¶©eS³c
{

404 
Objeù
: &
cÜev1
.
PodTem¶©eS³c
{},

406 
ex³ùE¼
: 
Œue
,

409 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

410 
Çme
, 
mock
 :=‚ame, mock

411 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

412 
b
 :ğ
mock
.
bud”
.
	`W™hTŞ”©iÚsNew
(mock.
tŞ”©iÚs
...)

413 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

414 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

416 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

417 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

421 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/build.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

20 
”rÜs
 "github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1"

21 
cÜev1
 "k8s.io/api/core/v1"

26 
ty³
 
Bud”
 struct {

27 
pvc
 *
PVC


28 
	m”rs
 []
	m”rÜ


32 
func
 
NewBud”
(è*
	gBud”
 {

33  &
	gBud”
{
	gpvc
: &
PVC
{
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{}}}

37 
	$func
 (
b
 *
Bud”
è
	`W™hName
(
Çme
 
¡ršg
) *Builder {

38 
	`Ën
(
Çme
) == 0 {

39 
b
.
”rs
 = 
	`­³nd
(b.”rs, 
”rÜs
.
	`New
("failedo build PVC object: missing PVC‚ame"))

40  
b


42 
b
.
pvc
.
objeù
.
Name
 = 
Çme


43  
b


44 
	}
}

48 
	$func
 (
b
 *
Bud”
è
	`W™hG’”©eName
(
Çme
 
¡ršg
) *Builder {

49 
	`Ën
(
Çme
) == 0 {

50 
b
.
”rs
 = 
	`­³nd
(

51 
b
.
”rs
,

52 
”rÜs
.
	`New
("failedo build PVC object: missing PVC generateName"),

54  
b


57 
b
.
pvc
.
objeù
.
G’”©eName
 = 
Çme


58  
b


59 
	}
}

62 
	$func
 (
b
 *
Bud”
è
	`W™hName¥aû
(
Çme¥aû
 
¡ršg
) *Builder {

63 
	`Ën
(
Çme¥aû
) == 0 {

64 
Çme¥aû
 = "default"

66 
b
.
pvc
.
objeù
.
Name¥aû
 = 
Çme¥aû


67  
b


68 
	}
}

71 
	$func
 (
b
 *
Bud”
è
	`W™hAÂÙ©iÚs
(
ªnÙ©iÚs
 
m­
[
¡ršg
]string) *Builder {

72 
	`Ën
(
ªnÙ©iÚs
) == 0 {

73 
b
.
”rs
 = 
	`­³nd
(b.”rs, 
”rÜs
.
	`New
("failedo build PVC object: missing‡nnotations"))

74  
b


76 
b
.
pvc
.
objeù
.
AÂÙ©iÚs
 = 
ªnÙ©iÚs


77  
b


78 
	}
}

82 
	$func
 (
b
 *
Bud”
è
	`W™hLab–s
(
Ïb–s
 
m­
[
¡ršg
]string) *Builder {

83 
	`Ën
(
Ïb–s
) == 0 {

84 
b
.
”rs
 = 
	`­³nd
(

85 
b
.
”rs
,

86 
”rÜs
.
	`New
("failedo build PVC object: missing†abels"),

88  
b


91 
b
.
pvc
.
objeù
.
Lab–s
 =ğ
n
 {

92 
b
.
pvc
.
objeù
.
Lab–s
 = 
m­
[
¡ršg
]string{}

95 
key
, 
v®ue
 :ğ
¿nge
 
Ïb–s
 {

96 
b
.
pvc
.
objeù
.
Lab–s
[
key
] = 
v®ue


98  
b


99 
	}
}

103 
	$func
 (
b
 *
Bud”
è
	`W™hLab–sNew
(
Ïb–s
 
m­
[
¡ršg
]string) *Builder {

104 
	`Ën
(
Ïb–s
) == 0 {

105 
b
.
”rs
 = 
	`­³nd
(

106 
b
.
”rs
,

107 
”rÜs
.
	`New
("failedo build PVC object: missing†abels"),

109  
b


113 
Ãwlbls
 :ğ
m­
[
¡ršg
]string{}

114 
key
, 
v®ue
 :ğ
¿nge
 
Ïb–s
 {

115 
Ãwlbls
[
key
] = 
v®ue


119 
b
.
pvc
.
objeù
.
Lab–s
 = 
Ãwlbls


120  
b


121 
	}
}

124 
	$func
 (
b
 *
Bud”
è
	`W™hStÜageCÏss
(
scName
 
¡ršg
) *Builder {

125 
	`Ën
(
scName
) == 0 {

126 
b
.
”rs
 = 
	`­³nd
(b.”rs, 
”rÜs
.
	`New
("failedo build PVC object: missing storageclass‚ame"))

127  
b


129 
b
.
pvc
.
objeù
.
S³c
.
StÜageCÏssName
 = &
scName


130  
b


131 
	}
}

134 
	$func
 (
b
 *
Bud”
è
	`W™hAcûssModes
(
acûssMode
 []
cÜev1
.
P”si¡’tVŞumeAcûssMode
) *Builder {

135 
	`Ën
(
acûssMode
) == 0 {

136 
b
.
”rs
 = 
	`­³nd
(b.”rs, 
”rÜs
.
	`New
("failedo build PVC object: missing‡ccessmodes"))

137  
b


139 
b
.
pvc
.
objeù
.
S³c
.
AcûssModes
 = 
acûssMode


140  
b


141 
	}
}

144 
	$func
 (
b
 *
Bud”
è
	`W™hC­ac™y
(
ÿ·c™y
 
¡ršg
) *Builder {

145 
»sC­ac™y
, 
”r
 :ğ
»sourû
.
	`P¬£Quªt™y
(
ÿ·c™y
)

146 
”r
 !ğ
n
 {

147 
b
.
”rs
 = 
	`­³nd
(b.”rs, 
”rÜs
.
	`W¿pf
(
”r
, "çedØbud PVC objeù: faedØ·r£ c­ac™y {%s}", 
ÿ·c™y
))

148  
b


150 
»sourûLi¡
 :ğ
cÜev1
.
ResourûLi¡
{

151 
cÜev1
.
	`ResourûName
(cÜev1.
ResourûStÜage
): 
»sC­ac™y
,

153 
b
.
pvc
.
objeù
.
S³c
.
Resourûs
.
Reque¡s
 = 
»sourûLi¡


154  
b


155 
	}
}

158 
	$func
 (
b
 *
Bud”
è
	`Bud
(è(*
cÜev1
.
P”si¡’tVŞumeCÏim
, 
”rÜ
) {

159 
	`Ën
(
b
.
”rs
) > 0 {

160  
n
, 
”rÜs
.
	`E¼Üf
("%+v", 
b
.
”rs
)

162  
b
.
pvc
.
objeù
, 
n


163 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/build_test.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

23 
cÜev1
 "k8s.io/api/core/v1"

25 
m‘av1
 "k8s.io/apimachinery/pkg/apis/meta/v1"

28 
func
 
	$Te¡Bud”W™hName
(
t
 *
‹¡šg
.
T
) {

29 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

30 
Çme
 
¡ršg


31 
bud”
 *
Bud”


32 
ex³ùE¼
 
boŞ


35 
Çme
: "PVC1",

36 
bud”
: &
Bud”
{
pvc
: &
PVC
{

37 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

39 
ex³ùE¼
: 
çl£
,

42 
Çme
: "",

43 
bud”
: &
Bud”
{
pvc
: &
PVC
{

44 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

46 
ex³ùE¼
: 
Œue
,

49 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

50 
Çme
, 
mock
 :=‚ame, mock

51 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

52 
b
 :ğ
mock
.
bud”
.
	`W™hName
(mock.
Çme
)

53 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

54 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

56 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

57 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

61 
	}
}

63 
func
 
	$Te¡BudW™hName¥aû
(
t
 *
‹¡šg
.
T
) {

64 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

65 
Çme¥aû
 
¡ršg


66 
bud”
 *
Bud”


67 
ex³ùE¼
 
boŞ


70 
Çme¥aû
: "jiva-ns",

71 
bud”
: &
Bud”
{
pvc
: &
PVC
{

72 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

74 
ex³ùE¼
: 
çl£
,

77 
Çme¥aû
: "",

78 
bud”
: &
Bud”
{
pvc
: &
PVC
{

79 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

81 
ex³ùE¼
: 
çl£
,

84 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

85 
Çme
, 
mock
 :=‚ame, mock

86 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

87 
b
 :ğ
mock
.
bud”
.
	`W™hName¥aû
(mock.
Çme¥aû
)

88 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

89 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

91 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

92 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

96 
	}
}

98 
func
 
	$Te¡BudW™hAÂÙ©iÚs
(
t
 *
‹¡šg
.
T
) {

99 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

100 
ªnÙ©iÚs
 
m­
[
¡ršg
]string

101 
bud”
 *
Bud”


102 
ex³ùE¼
 
boŞ


105 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{"persistent-volume": "PV", "application": "percona"},

106 
bud”
: &
Bud”
{
pvc
: &
PVC
{

107 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

109 
ex³ùE¼
: 
çl£
,

112 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{},

113 
bud”
: &
Bud”
{
pvc
: &
PVC
{

114 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

116 
ex³ùE¼
: 
Œue
,

119 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

120 
Çme
, 
mock
 :=‚ame, mock

121 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

122 
b
 :ğ
mock
.
bud”
.
	`W™hAÂÙ©iÚs
(mock.
ªnÙ©iÚs
)

123 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

124 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

126 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

127 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

131 
	}
}

133 
func
 
	$Te¡BudW™hLab–s
(
t
 *
‹¡šg
.
T
) {

134 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

135 
Ïb–s
 
m­
[
¡ršg
]string

136 
bud”
 *
Bud”


137 
ex³ùE¼
 
boŞ


140 
Ïb–s
: 
m­
[
¡ršg
]string{"persistent-volume": "PV", "application": "percona"},

141 
bud”
: &
Bud”
{
pvc
: &
PVC
{

142 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

144 
ex³ùE¼
: 
çl£
,

147 
Ïb–s
: 
m­
[
¡ršg
]string{},

148 
bud”
: &
Bud”
{
pvc
: &
PVC
{

149 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

151 
ex³ùE¼
: 
Œue
,

154 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

155 
Çme
, 
mock
 :=‚ame, mock

156 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

157 
b
 :ğ
mock
.
bud”
.
	`W™hLab–s
(mock.
Ïb–s
)

158 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

159 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

161 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

162 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

166 
	}
}

168 
func
 
	$Te¡BudW™hLab–sNew
(
t
 *
‹¡šg
.
T
) {

169 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

170 
Ïb–s
 
m­
[
¡ršg
]string

171 
bud”
 *
Bud”


172 
ex³ùE¼
 
boŞ


175 
Ïb–s
: 
m­
[
¡ršg
]string{

179 
bud”
: &
Bud”
{
pvc
: &
PVC
{

180 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

182 
ex³ùE¼
: 
çl£
,

186 
Ïb–s
: 
m­
[
¡ršg
]string{},

187 
bud”
: &
Bud”
{
pvc
: &
PVC
{

188 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

190 
ex³ùE¼
: 
Œue
,

194 
Ïb–s
: 
n
,

195 
bud”
: &
Bud”
{
pvc
: &
PVC
{

196 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

198 
ex³ùE¼
: 
Œue
,

202 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

203 
Çme
, 
mock
 :=‚ame, mock

204 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

205 
b
 :ğ
mock
.
bud”
.
	`W™hLab–sNew
(mock.
Ïb–s
)

206 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

207 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

209 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

210 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

214 
	}
}

216 
func
 
	$Te¡BudW™hAcûssModes
(
t
 *
‹¡šg
.
T
) {

217 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

218 
acûssModes
 []
cÜev1
.
P”si¡’tVŞumeAcûssMode


219 
bud”
 *
Bud”


220 
ex³ùE¼
 
boŞ


223 
acûssModes
: []
cÜev1
.
P”si¡’tVŞumeAcûssMode
{cÜev1.
R—dWr™eOnû
, cÜev1.
R—dOÆyMªy
},

224 
bud”
: &
Bud”
{
pvc
: &
PVC
{

225 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

227 
ex³ùE¼
: 
çl£
,

230 
acûssModes
: []
cÜev1
.
P”si¡’tVŞumeAcûssMode
{},

231 
bud”
: &
Bud”
{
pvc
: &
PVC
{

232 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

234 
ex³ùE¼
: 
Œue
,

238 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

239 
Çme
, 
mock
 :=‚ame, mock

240 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

241 
b
 :ğ
mock
.
bud”
.
	`W™hAcûssModes
(mock.
acûssModes
)

242 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

243 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

245 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

246 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

250 
	}
}

252 
func
 
	$Te¡BudW™hStÜageCÏss
(
t
 *
‹¡šg
.
T
) {

253 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

254 
scName
 
¡ršg


255 
bud”
 *
Bud”


256 
ex³ùE¼
 
boŞ


259 
scName
: "single-replica",

260 
bud”
: &
Bud”
{
pvc
: &
PVC
{

261 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

263 
ex³ùE¼
: 
çl£
,

266 
scName
: "",

267 
bud”
: &
Bud”
{
pvc
: &
PVC
{

268 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

270 
ex³ùE¼
: 
Œue
,

273 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

274 
Çme
, 
mock
 :=‚ame, mock

275 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

276 
b
 :ğ
mock
.
bud”
.
	`W™hStÜageCÏss
(mock.
scName
)

277 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

278 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

280 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

281 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

285 
	}
}

287 
func
 
	$Te¡BudW™hC­ac™y
(
t
 *
‹¡šg
.
T
) {

288 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

289 
ÿ·c™y
 
¡ršg


290 
bud”
 *
Bud”


291 
ex³ùE¼
 
boŞ


294 
ÿ·c™y
: "5G",

295 
bud”
: &
Bud”
{
pvc
: &
PVC
{

296 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

298 
ex³ùE¼
: 
çl£
,

301 
ÿ·c™y
: "",

302 
bud”
: &
Bud”
{
pvc
: &
PVC
{

303 
objeù
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{},

305 
ex³ùE¼
: 
Œue
,

308 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

309 
Çme
, 
mock
 :=‚ame, mock

310 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

311 
b
 :ğ
mock
.
bud”
.
	`W™hC­ac™y
(mock.
ÿ·c™y
)

312 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

313 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

315 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

316 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

320 
	}
}

322 
func
 
	$Te¡Bud
(
t
 *
‹¡šg
.
T
) {

323 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

324 
Çme
 
¡ršg


325 
ÿ·c™y
 
¡ršg


326 
ex³ùedPVC
 *
cÜev1
.
P”si¡’tVŞumeCÏim


327 
ex³ùedE¼
 
boŞ


330 
Çme
: "PVC1",

331 
ÿ·c™y
: "10Ti",

332 
ex³ùedPVC
: &
cÜev1
.
P”si¡’tVŞumeCÏim
{

333 
ObjeùM‘a
: 
m‘av1
.ObjeùM‘a{
Name
: "PVC1"},

334 
S³c
: 
cÜev1
.
P”si¡’tVŞumeCÏimS³c
{

335 
Resourûs
: 
cÜev1
.
ResourûRequœem’ts
{

336 
Reque¡s
: 
cÜev1
.
ResourûLi¡
{

337 
cÜev1
.
ResourûStÜage
: 
	`çkeC­ac™y
("10Ti"),

342 
ex³ùedE¼
: 
çl£
,

345 
Çme
: "",

346 
ÿ·c™y
: "500Gi",

347 
ex³ùedPVC
: 
n
,

348 
ex³ùedE¼
: 
Œue
,

351 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

352 
Çme
, 
mock
 :=‚ame, mock

353 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

354 
pvcObj
, 
”r
 :ğ
	`NewBud”
().
	`W™hName
(
mock
.
Çme
).
	`W™hC­ac™y
(mock.
ÿ·c™y
).
	`Bud
()

355 
mock
.
ex³ùedE¼
 && 
”r
 =ğ
n
 {

356 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

358 !
mock
.
ex³ùedE¼
 && 
”r
 !ğ
n
 {

359 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

361 !
»æeù
.
	`D“pEqu®
(
pvcObj
, 
mock
.
ex³ùedPVC
) {

362 
t
.
	`F©®f
("Te¡ %q faed:…vømism©ch", 
Çme
)

366 
	}
}

368 
func
 
	$çkeC­ac™y
(
ÿ·c™y
 
¡ršg
è
»sourû
.
Quªt™y
 {

369 
q
, 
_
 :ğ
»sourû
.
	`P¬£Quªt™y
(
ÿ·c™y
)

370  
q


371 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/buildlist.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

20 
”rÜs
 "github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1"

21 
cÜev1
 "k8s.io/api/core/v1"

26 
ty³
 
Li¡Bud”
 struct {

28 
‹m¶©e
 *
	mcÜev1
.
P”si¡’tVŞumeCÏim


33 
couÁ
 

35 
li¡
 *
PVCLi¡


36 
f‹rs
 
P»diÿ‹Li¡


37 
	m”rs
 []
	m”rÜ


41 
func
 
NewLi¡Bud”
(è*
	gLi¡Bud”
 {

42  &
	gLi¡Bud”
{
	gli¡
: &
PVCLi¡
{}}

47 
func
 
Li¡Bud”FromTem¶©e
(
pvc
 *
cÜev1
.
P”si¡’tVŞumeCÏim
è*
Li¡Bud”
 {

48 
b
 :ğ
NewLi¡Bud”
()

49 
pvc
 =ğ
n
 {

50 
b
.
”rs
 = 
­³nd
(

51 
b
.
”rs
,

52 
”rÜs
.
New
("failedo build…vc†ist:‚il…vcemplate"),

54  
	gb


57 
	gb
.
	g‹m¶©e
 = 
pvc


58 
b
.
couÁ
 = 1

59  
b


64 
func
 
Li¡Bud”FÜAPIObjeùs
(
pvcs
 *
cÜev1
.
P”si¡’tVŞumeCÏimLi¡
è*
	gLi¡Bud”
 {

65 
	gb
 :ğ&
Li¡Bud”
{
li¡
: &
PVCLi¡
{}}

67 
pvcs
 =ğ
n
 {

68 
b
.
”rs
 = 
­³nd
(

69 
b
.
”rs
,

70 
”rÜs
.
New
("failedo build…vc†ist: missing‡pi†ist"),

72  
	gb


75 
	g_
, 
	gpvc
 :ğ
¿nge
 
pvcs
.
I‹ms
 {

76 
pvc
 :=…vc

77 
b
.
li¡
.
™ems
 = 
­³nd
(b.li¡.™ems, &
PVC
{
objeù
: &
pvc
})

80  
b


85 
func
 
Li¡Bud”FÜObjeùs
(
pvcs
 *
PVCLi¡
è*
Li¡Bud”
 {

86 
b
 :ğ&
Li¡Bud”
{}

87 
pvcs
 =ğ
n
 {

88 
b
.
”rs
 = 
­³nd
(

89 
b
.
”rs
,

90 
”rÜs
.
New
("failedo build…vc†ist: missing object†ist"),

92  
	gb


95 
	gb
.
	gli¡
 = 
pvcs


96  
b


101 
	$func
 (
b
 *
Li¡Bud”
è
	`W™hF‹r
(
´ed
 ...
P»diÿ‹
) *ListBuilder {

102 
b
.
f‹rs
 = 
	`­³nd
(b.f‹rs, 
´ed
...)

103  
b


104 
	}
}

108 
	$func
 (
b
 *
Li¡Bud”
è
	`W™hCouÁ
(
couÁ
 ) *ListBuilder {

109 
b
.
couÁ
 = count

110  
b


111 
	}
}

113 
	$func
 (
b
 *
Li¡Bud”
è
	$budFromTem¶©eIfNLi¡
() {

114 
	`Ën
(
b
.
li¡
.
™ems
è!ğ0 || b.
‹m¶©e
 =ğ
n
 {

118 
i
 :ğ0; i < 
b
.
couÁ
; i++ {

119 
b
.
li¡
.
™ems
 = 
	`­³nd
(b.li¡.™ems, &
PVC
{
objeù
: b.
‹m¶©e
})

121 
	}
}

125 
	$func
 (
b
 *
Li¡Bud”
è
	`Li¡
(è(*
PVCLi¡
, 
”rÜ
) {

126 
	`Ën
(
b
.
”rs
) > 0 {

127  
n
, 
”rÜs
.
	`E¼Üf
("çedØbud…vøli¡: %+v", 
b
.
”rs
)

130 
b
.
	`budFromTem¶©eIfNLi¡
()

132 
b
.
f‹rs
 =ğ
n
 || 
	`Ën
(b.filters) == 0 {

133  
b
.
li¡
, 
n


136 
f‹»dLi¡
 :ğ&
PVCLi¡
{}

137 
_
, 
pvc
 :ğ
¿nge
 
b
.
li¡
.
™ems
 {

138 
b
.
f‹rs
.
	`®l
(
pvc
) {

139 
f‹»dLi¡
.
™ems
 = 
	`­³nd
(f‹»dLi¡.™ems, 
pvc
)

143  
f‹»dLi¡
, 
n


144 
	}
}

148 
	$func
 (
b
 *
Li¡Bud”
è
	$L’
(è(, 
”rÜ
) {

149 
l
, 
”r
 :ğ
b
.
	`Li¡
()

150 
”r
 !ğ
n
 {

151  0, 
”r


154  
l
.
	`L’
(), 
n


155 
	}
}

158 
	$func
 (
b
 *
Li¡Bud”
è
	`APILi¡
(è(*
cÜev1
.
P”si¡’tVŞumeCÏimLi¡
, 
”rÜ
) {

159 
l
, 
”r
 :ğ
b
.
	`Li¡
()

160 
”r
 !ğ
n
 {

161  
n
, 
”r


164  
l
.
	`ToAPILi¡
(), 
n


165 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/buildlist_test.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

22 
cÜev1
 "k8s.io/api/core/v1"

25 
func
 
	$Te¡Li¡Bud”W™hAPILi¡
(
t
 *
‹¡šg
.
T
) {

26 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

27 
avaabËPVCs
 []
¡ršg


28 
ex³ùedPVCL’
 

30 "PVC s‘ 1": {[]
¡ršg
{}, 0},

31 "PVC s‘ 2": {[]
¡ršg
{"pvc1"}, 1},

32 "PVC s‘ 3": {[]
¡ršg
{"pvc1", "pvc2"}, 2},

33 "PVC s‘ 4": {[]
¡ršg
{"pvc1", "pvc2", "pvc3"}, 3},

34 "PVC s‘ 5": {[]
¡ršg
{"pvc1", "pvc2", "pvc3", "pvc4"}, 4},

35 "PVC s‘ 6": {[]
¡ršg
{"pvc1", "pvc2", "pvc3", "pvc4", "pvc5"}, 5},

36 "PVC s‘ 7": {[]
¡ršg
{"pvc1", "pvc2", "pvc3", "pvc4", "pvc5", "pvc6"}, 6},

37 "PVC s‘ 8": {[]
¡ršg
{"pvc1", "pvc2", "pvc3", "pvc4", "pvc5", "pvc6", "pvc7"}, 7},

38 "PVC s‘ 9": {[]
¡ršg
{"pvc1", "pvc2", "pvc3", "pvc4", "pvc5", "pvc6", "pvc7", "pvc8"}, 8},

39 "PVC s‘ 10": {[]
¡ršg
{"pvc1", "pvc2", "pvc3", "pvc4", "pvc5", "pvc6", "pvc7", "pvc8", "pvc9"}, 9},

41 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

42 
Çme
, 
mock
 :=‚ame, mock

43 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

44 
b
 :ğ
	`Li¡Bud”FÜAPIObjeùs
(
	`çkeAPIPVCLi¡
(
mock
.
avaabËPVCs
))

45 
mock
.
ex³ùedPVCL’
 !ğ
	`Ën
(
b
.
li¡
.
™ems
) {

46 
t
.
	`F©®f
("Te¡ %v faed:ƒx³ùed %v gÙ %v", 
Çme
, 
mock
.
ex³ùedPVCL’
, 
	`Ën
(
b
.
li¡
.
™ems
))

50 
	}
}

52 
func
 
	$Te¡Li¡Bud”W™hAPIObjeùs
(
t
 *
‹¡šg
.
T
) {

53 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

54 
avaabËPVCs
 []
¡ršg


55 
ex³ùedPVCL’
 

56 
ex³ùedE¼
 
boŞ


58 "PVC s‘ 1": {[]
¡ršg
{}, 0, 
Œue
},

59 "PVC s‘ 2": {[]
¡ršg
{"pvc1"}, 1, 
çl£
},

60 "PVC s‘ 3": {[]
¡ršg
{"pvc1", "pvc2"}, 2, 
çl£
},

61 "PVC s‘ 4": {[]
¡ršg
{"pvc1", "pvc2", "pvc3"}, 3, 
çl£
},

63 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

64 
Çme
, 
mock
 :=‚ame, mock

65 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

66 
b
, 
”r
 :ğ
	`Li¡Bud”FÜAPIObjeùs
(
	`çkeAPIPVCLi¡
(
mock
.
avaabËPVCs
)).
	`APILi¡
()

67 
mock
.
ex³ùedE¼
 && 
”r
 =ğ
n
 {

68 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

70 !
mock
.
ex³ùedE¼
 && 
”r
 !ğ
n
 {

71 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

73 !
mock
.
ex³ùedE¼
 && mock.
ex³ùedPVCL’
 !ğ
	`Ën
(
b
.
I‹ms
) {

74 
t
.
	`F©®f
("Te¡ %v faed:ƒx³ùed %v gÙ %v", 
Çme
, 
mock
.
avaabËPVCs
, 
	`Ën
(
b
.
I‹ms
))

78 
	}
}

80 
func
 
	$Te¡Li¡Bud”APILi¡
(
t
 *
‹¡šg
.
T
) {

81 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

82 
avaabËPVCs
 []
¡ršg


83 
ex³ùedPVCL’
 

84 
ex³ùedE¼
 
boŞ


86 "PVC s‘ 1": {[]
¡ršg
{}, 0, 
Œue
},

87 "PVC s‘ 2": {[]
¡ršg
{"pvc1"}, 1, 
çl£
},

88 "PVC s‘ 3": {[]
¡ršg
{"pvc1", "pvc2"}, 2, 
çl£
},

89 "PVC s‘ 4": {[]
¡ršg
{"pvc1", "pvc2", "pvc3"}, 3, 
çl£
},

90 "PVC s‘ 5": {[]
¡ršg
{"pvc1", "pvc2", "pvc3", "pvc4"}, 4, 
çl£
},

92 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

94 
Çme
, 
mock
 :=‚ame, mock

95 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

96 
b
, 
”r
 :ğ
	`Li¡Bud”FÜAPIObjeùs
(
	`çkeAPIPVCLi¡
(
mock
.
avaabËPVCs
)).
	`APILi¡
()

97 
mock
.
ex³ùedE¼
 && 
”r
 =ğ
n
 {

98 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

100 !
mock
.
ex³ùedE¼
 && 
”r
 !ğ
n
 {

101 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

103 
”r
 =ğ
n
 && 
mock
.
ex³ùedPVCL’
 !ğ
	`Ën
(
b
.
I‹ms
) {

104 
t
.
	`F©®f
("Te¡ %v faed:ƒx³ùed %v gÙ %v", 
Çme
, 
mock
.
ex³ùedPVCL’
, 
	`Ën
(
b
.
I‹ms
))

108 
	}
}

110 
func
 
	$Te¡F‹rLi¡
(
t
 *
‹¡šg
.
T
) {

111 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

112 
avaabËPVCs
 
m­
[
¡ršg
]
cÜev1
.
P”si¡’tVŞumeCÏimPha£


113 
f‹»dPVCs
 []
¡ršg


114 
f‹rs
 
P»diÿ‹Li¡


115 
ex³ùedE¼
 
boŞ


118 
avaabËPVCs
: 
m­
[
¡ršg
]
cÜev1
.
P”si¡’tVŞumeCÏimPha£
{"PVC5": cÜev1.
CÏimBound
, "PVC6": cÜev1.
CÏimP’dšg
, "PVC7": cÜev1.
CÏimLo¡
},

119 
f‹»dPVCs
: []
¡ršg
{"PVC5"},

120 
f‹rs
: 
P»diÿ‹Li¡
{
	`IsBound
()},

121 
ex³ùedE¼
: 
çl£
,

125 
avaabËPVCs
: 
m­
[
¡ršg
]
cÜev1
.
P”si¡’tVŞumeCÏimPha£
{"PVC3": cÜev1.
CÏimBound
, "PVC4": corev1.ClaimBound},

126 
f‹»dPVCs
: []
¡ršg
{"PVC2", "PVC4"},

127 
f‹rs
: 
P»diÿ‹Li¡
{
	`IsBound
()},

128 
ex³ùedE¼
: 
çl£
,

132 
avaabËPVCs
: 
m­
[
¡ršg
]
cÜev1
.
P”si¡’tVŞumeCÏimPha£
{"PVC1": cÜev1.
CÏimLo¡
, "PVC2": cÜev1.
CÏimP’dšg
, "PVC3": corev1.ClaimPending},

133 
f‹»dPVCs
: []
¡ršg
{},

134 
f‹rs
: 
P»diÿ‹Li¡
{
	`IsBound
()},

135 
ex³ùedE¼
: 
çl£
,

138 
avaabËPVCs
: 
m­
[
¡ršg
]
cÜev1
.
P”si¡’tVŞumeCÏimPha£
{},

139 
f‹»dPVCs
: []
¡ršg
{},

140 
f‹rs
: 
P»diÿ‹Li¡
{
	`IsBound
()},

141 
ex³ùedE¼
: 
Œue
,

144 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

145 
Çme
, 
mock
 :=‚ame, mock

146 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

147 
li¡
, 
”r
 :ğ
	`Li¡Bud”FÜAPIObjeùs
(
	`çkeAPIPVCLi¡FromNameStusM­
(
mock
.
avaabËPVCs
)).
	`W™hF‹r
(mock.
f‹rs
...).
	`Li¡
()

148 
mock
.
ex³ùedE¼
 && 
”r
 =ğ
n
 {

149 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

151 !
mock
.
ex³ùedE¼
 && 
”r
 !ğ
n
 {

152 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

154 
”r
 =ğ
n
 && 
	`Ën
(
li¡
.
™ems
è!ğËn(
mock
.
f‹»dPVCs
) {

155 
t
.
	`F©®f
("Te¡ %v faed:ƒx³ùed %v gÙ %v", 
Çme
, 
	`Ën
(
mock
.
f‹»dPVCs
),†’(
li¡
.
™ems
))

159 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/kubernetes.go

15 
·ckage
 
v1®pha1


17 
impÜt
 (

20 
”rÜs
 "github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1"

21 
cÜev1
 "k8s.io/api/core/v1"

22 
m‘av1
 "k8s.io/apimachinery/pkg/apis/meta/v1"

24 
ş›Á
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/client/v1alpha1"

30 
ty³
 
g‘Cl›Á£tFn
 
	$func
(è(
ş›Á£t
 *
kub”Ã‹s
.
Cl›Á£t
, 
”r
 
”rÜ
)

34 
ty³
 
g‘Cl›Á£tFÜP©hFn
 
	$func
(
kubeCÚfigP©h
 
¡ršg
è(
ş›Á£t
 *
kub”Ã‹s
.
Cl›Á£t
, 
”r
 
”rÜ
)

38 
ty³
 
g‘Fn
 
	`func
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme
 
¡ršg
, 
Çme¥aû
 sŒšg, 
İts
 
m‘av1
.
G‘O±iÚs
è(*
cÜev1
.
P”si¡’tVŞumeCÏim
, 
”rÜ
)

42 
ty³
 
li¡Fn
 
	`func
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme¥aû
 
¡ršg
, 
İts
 
m‘av1
.
Li¡O±iÚs
è(*
cÜev1
.
P”si¡’tVŞumeCÏimLi¡
, 
”rÜ
)

46 
ty³
 
d–‘eFn
 
	$func
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme¥aû
 
¡ršg
, 
Çme
 sŒšg, 
d–‘eO±s
 *
m‘av1
.
D–‘eO±iÚs
è
”rÜ


50 
ty³
 
d–‘eCŞËùiÚFn
 
	$func
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme¥aû
 
¡ršg
, 
li¡O±s
 
m‘av1
.
Li¡O±iÚs
, 
d–‘eO±s
 *m‘av1.
D–‘eO±iÚs
è
”rÜ


54 
ty³
 
ü—‹Fn
 
	`func
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme¥aû
 
¡ršg
, 
pvc
 *
cÜev1
.
P”si¡’tVŞumeCÏim
è(*cÜev1.P”si¡’tVŞumeCÏim, 
”rÜ
)

58 
ty³
 
Kubeş›Á
 struct {

62 
ş›Á£t
 *
kub”Ã‹s
.
Cl›Á£t


66 
Çme¥aû
 
¡ršg


69 
kubeCÚfigP©h
 
¡ršg


72 
g‘Cl›Á£t
 
g‘Cl›Á£tFn


73 
g‘Cl›Á£tFÜP©h
 
g‘Cl›Á£tFÜP©hFn


74 
li¡
 
li¡Fn


75 
g‘
 
g‘Fn


76 
ü—‹
 
ü—‹Fn


77 
d–
 
d–‘eFn


78 
d–CŞËùiÚ
 
d–‘eCŞËùiÚFn


83 
ty³
 
Kubeş›ÁBudO±iÚ
 
	$func
(*
Kubeş›Á
)

87 
	$func
 (
k
 *
Kubeş›Á
è
	$w™hDeçuÉs
() {

88 
k
.
g‘Cl›Á£t
 =ğ
n
 {

89 
k
.
g‘Cl›Á£t
 = 
	`func
(è(
ş›Ás
 *
kub”Ã‹s
.
Cl›Á£t
, 
”r
 
”rÜ
) {

90  
ş›Á
.
	`New
().
	`Cl›Á£t
()

94 
k
.
g‘Cl›Á£tFÜP©h
 =ğ
n
 {

95 
k
.
g‘Cl›Á£tFÜP©h
 = 
	`func
(
kubeCÚfigP©h
 
¡ršg
è(
ş›Ás
 *
kub”Ã‹s
.
Cl›Á£t
, 
”r
 
”rÜ
) {

96  
ş›Á
.
	`New
(ş›Á.
	`W™hKubeCÚfigP©h
(
kubeCÚfigP©h
)).
	`Cl›Á£t
()

100 
k
.
g‘
 =ğ
n
 {

101 
k
.
g‘
 = 
	`func
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme
 
¡ršg
, 
Çme¥aû
 sŒšg, 
İts
 
m‘av1
.
G‘O±iÚs
è(*
cÜev1
.
P”si¡’tVŞumeCÏim
, 
”rÜ
) {

102  
şi
.
	`CÜeV1
().
	`P”si¡’tVŞumeCÏims
(
Çme¥aû
).
	`G‘
(
Çme
, 
İts
)

106 
k
.
li¡
 =ğ
n
 {

107 
k
.
li¡
 = 
	`func
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme¥aû
 
¡ršg
, 
İts
 
m‘av1
.
Li¡O±iÚs
è(*
cÜev1
.
P”si¡’tVŞumeCÏimLi¡
, 
”rÜ
) {

108  
şi
.
	`CÜeV1
().
	`P”si¡’tVŞumeCÏims
(
Çme¥aû
).
	`Li¡
(
İts
)

112 
k
.
d–
 =ğ
n
 {

113 
k
.
d–
 = 
	`func
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme¥aû
 
¡ršg
, 
Çme
 sŒšg, 
d–‘eO±s
 *
m‘av1
.
D–‘eO±iÚs
è
”rÜ
 {

114  
şi
.
	`CÜeV1
().
	`P”si¡’tVŞumeCÏims
(
Çme¥aû
).
	`D–‘e
(
Çme
, 
d–‘eO±s
)

118 
k
.
d–CŞËùiÚ
 =ğ
n
 {

119 
k
.
d–CŞËùiÚ
 = 
	`func
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme¥aû
 
¡ršg
, 
li¡O±s
 
m‘av1
.
Li¡O±iÚs
, 
d–‘eO±s
 *m‘av1.
D–‘eO±iÚs
è
”rÜ
 {

120  
şi
.
	`CÜeV1
().
	`P”si¡’tVŞumeCÏims
(
Çme¥aû
).
	`D–‘eCŞËùiÚ
(
d–‘eO±s
, 
li¡O±s
)

124 
k
.
ü—‹
 =ğ
n
 {

125 
k
.
ü—‹
 = 
	`func
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme¥aû
 
¡ršg
, 
pvc
 *
cÜev1
.
P”si¡’tVŞumeCÏim
è(*cÜev1.P”si¡’tVŞumeCÏim, 
”rÜ
) {

126  
şi
.
	`CÜeV1
().
	`P”si¡’tVŞumeCÏims
(
Çme¥aû
).
	`C»©e
(
pvc
)

129 
	}
}

133 
func
 
	$W™hCl›ÁS‘
(
c
 *
kub”Ã‹s
.
Cl›Á£t
è
Kubeş›ÁBudO±iÚ
 {

134  
	`func
(
k
 *
Kubeş›Á
) {

135 
k
.
ş›Á£t
 = 
c


137 
	}
}

141 
func
 
	$W™hKubeCÚfigP©h
(
·th
 
¡ršg
è
Kubeş›ÁBudO±iÚ
 {

142  
	`func
(
k
 *
Kubeş›Á
) {

143 
k
.
kubeCÚfigP©h
 = 
·th


145 
	}
}

149 
func
 
NewKubeCl›Á
(
İts
 ...
Kubeş›ÁBudO±iÚ
è*
	gKubeş›Á
 {

150 
	gk
 :ğ&
Kubeş›Á
{}

151 
_
, 
	go
 :ğ
¿nge
 
İts
 {

152 
o
(
k
)

154 
k
.
w™hDeçuÉs
()

155  
k


160 
	$func
 (
k
 *
Kubeş›Á
è
	`W™hName¥aû
(
Çme¥aû
 
¡ršg
) *Kubeclient {

161 
k
.
Çme¥aû
 =‚amespace

162  
k


163 
	}
}

165 
	$func
 (
k
 *
Kubeş›Á
è
	`g‘Cl›Á£tFÜP©hOrDœeù
(è(*
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
) {

166 
k
.
kubeCÚfigP©h
 != "" {

167  
k
.
	`g‘Cl›Á£tFÜP©h
(k.
kubeCÚfigP©h
)

169  
k
.
	`g‘Cl›Á£t
()

170 
	}
}

174 
	$func
 (
k
 *
Kubeş›Á
è
	`g‘Cl›Á£tOrCached
(è(*
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
) {

175 
k
.
ş›Á£t
 !ğ
n
 {

176  
k
.
ş›Á£t
, 
n


179 
cs
, 
”r
 :ğ
k
.
	`g‘Cl›Á£tFÜP©hOrDœeù
()

180 
”r
 !ğ
n
 {

181  
n
, 
”rÜs
.
	`W¿pf
(
”r
, "failedo get clientset")

183 
k
.
ş›Á£t
 = 
cs


184  
k
.
ş›Á£t
, 
n


185 
	}
}

189 
	$func
 (
k
 *
Kubeş›Á
è
	`G‘
(
Çme
 
¡ršg
, 
İts
 
m‘av1
.
G‘O±iÚs
è(*
cÜev1
.
P”si¡’tVŞumeCÏim
, 
”rÜ
) {

190 
¡ršgs
.
	`TrimS·û
(
Çme
) == "" {

191  
n
, 
”rÜs
.
	`New
("failedo get…vc: missing…vc‚ame")

193 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›Á£tOrCached
()

194 
”r
 !ğ
n
 {

195  
n
, 
”rÜs
.
	`W¿pf
(
”r
, "çedØg‘…vø{%s}", 
Çme
)

197  
k
.
	`g‘
(
şi
, 
Çme
, k.
Çme¥aû
, 
İts
)

198 
	}
}

202 
	$func
 (
k
 *
Kubeş›Á
è
	`Li¡
(
İts
 
m‘av1
.
Li¡O±iÚs
è(*
cÜev1
.
P”si¡’tVŞumeCÏimLi¡
, 
”rÜ
) {

203 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›Á£tOrCached
()

204 
”r
 !ğ
n
 {

205  
n
, 
”rÜs
.
	`W¿pf
(
”r
, "çedØli¡…vøli¡İtiÚs: '%v'", 
İts
)

207  
k
.
	`li¡
(
şi
, k.
Çme¥aû
, 
İts
)

208 
	}
}

212 
	$func
 (
k
 *
Kubeş›Á
è
	$D–‘e
(
Çme
 
¡ršg
, 
d–‘eO±s
 *
m‘av1
.
D–‘eO±iÚs
è
”rÜ
 {

213 
¡ršgs
.
	`TrimS·û
(
Çme
) == "" {

214  
”rÜs
.
	`New
("failedo delete…vc: missing…vc‚ame")

216 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›Á£tOrCached
()

217 
”r
 !ğ
n
 {

218  
”rÜs
.
	`W¿pf
(
”r
, "çedØd–‘pvø{%s}", 
Çme
)

220  
k
.
	`d–
(
şi
, k.
Çme¥aû
, 
Çme
, 
d–‘eO±s
)

221 
	}
}

224 
	$func
 (
k
 *
Kubeş›Á
è
	`C»©e
(
pvc
 *
cÜev1
.
P”si¡’tVŞumeCÏim
è(*cÜev1.P”si¡’tVŞumeCÏim, 
”rÜ
) {

225 
pvc
 =ğ
n
 {

226  
n
, 
”rÜs
.
	`New
("failedo create…vc:‚il…vc object")

228 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›Á£tOrCached
()

229 
”r
 !ğ
n
 {

230  
n
, 
”rÜs
.
	`W¿pf
(
”r
, "çedØü—‹…vø{%s} iÀÇme¥aû {%s}", 
pvc
.
Name
,…vc.
Name¥aû
)

232  
k
.
	`ü—‹
(
şi
, k.
Çme¥aû
, 
pvc
)

233 
	}
}

237 
	$func
 (
k
 *
Kubeş›Á
è
	`C»©eCŞËùiÚ
(

238 
li¡
 *
cÜev1
.
P”si¡’tVŞumeCÏimLi¡
,

239 è(*
cÜev1
.
P”si¡’tVŞumeCÏimLi¡
, 
”rÜ
) {

240 
li¡
 =ğ
n
 || 
	`Ën
Öi¡.
I‹ms
) == 0 {

241  
n
, 
”rÜs
.
	`New
("failedo create†ist of…vcs:‚il…vc†ist…rovided")

244 
Ãwli¡
 :ğ&
cÜev1
.
P”si¡’tVŞumeCÏimLi¡
{}

245 
_
, 
™em
 :ğ
¿nge
 
li¡
.
I‹ms
 {

246 
™em
 := item

247 
obj
, 
”r
 :ğ
k
.
	`C»©e
(&
™em
)

248 
”r
 !ğ
n
 {

249  
n
, 
”r


252 
Ãwli¡
.
I‹ms
 = 
	`­³nd
Òewli¡.I‹ms, *
obj
)

255  
Ãwli¡
, 
n


256 
	}
}

259 
	$func
 (
k
 *
Kubeş›Á
è
	$D–‘eCŞËùiÚ
(
li¡O±s
 
m‘av1
.
Li¡O±iÚs
, 
d–‘eO±s
 *m‘av1.
D–‘eO±iÚs
è
”rÜ
 {

260 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›Á£tOrCached
()

261 
”r
 !ğ
n
 {

262  
”rÜs
.
	`W¿pf
(
”r
, "failedo deletehe collection of…vcs")

264  
k
.
	`d–CŞËùiÚ
(
şi
, k.
Çme¥aû
, 
li¡O±s
, 
d–‘eO±s
)

265 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/kubernetes_test.go

15 
·ckage
 
v1®pha1


17 
impÜt
 (

20 
”rÜs
 "github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1"

21 
cÜev1
 "k8s.io/api/core/v1"

22 
v1
 "k8s.io/api/core/v1"

23 
m‘av1
 "k8s.io/apimachinery/pkg/apis/meta/v1"

27 
func
 
	$çkeG‘Cl›ÁS‘Ok
(è(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
”r
 
”rÜ
) {

28  &
kub”Ã‹s
.
Cl›Á£t
{}, 
n


29 
	}
}

31 
func
 
	$çkeG‘Cl›ÁS‘FÜP©hOk
(
çkeCÚfigP©h
 
¡ršg
è(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
”r
 
”rÜ
) {

32  &
kub”Ã‹s
.
Cl›Á£t
{}, 
n


33 
	}
}

35 
func
 
	$çkeG‘Cl›ÁS‘FÜP©hE¼
(
çkeCÚfigP©h
 
¡ršg
è(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
”r
 
”rÜ
) {

36  
n
, 
”rÜs
.
	`New
("fakeƒrror")

37 
	}
}

39 
func
 
çkeG‘Ok
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme
, 
Çme¥aû
 
¡ršg
, 
İts
 
m‘av1
.
G‘O±iÚs
è(*
	gcÜev1
.
	gP”si¡’tVŞumeCÏim
, 
	g”rÜ
) {

40  &
	gcÜev1
.
	gP”si¡’tVŞumeCÏim
{}, 
	gn


43 
func
 
çkeLi¡Ok
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme¥aû
 
¡ršg
, 
İts
 
m‘av1
.
Li¡O±iÚs
è(*
	gcÜev1
.
	gP”si¡’tVŞumeCÏimLi¡
, 
	g”rÜ
) {

44  &
	gcÜev1
.
	gP”si¡’tVŞumeCÏimLi¡
{}, 
	gn


47 
func
 
	$çkeD–‘eOk
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme
, 
Çme¥aû
 
¡ršg
, 
İts
 *
m‘av1
.
D–‘eO±iÚs
è
”rÜ
 {

48  
n


49 
	}
}

51 
func
 
çkeLi¡E¼
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme¥aû
 
¡ršg
, 
İts
 
m‘av1
.
Li¡O±iÚs
è(*
	gcÜev1
.
	gP”si¡’tVŞumeCÏimLi¡
, 
	g”rÜ
) {

52  &
	gcÜev1
.
	gP”si¡’tVŞumeCÏimLi¡
{}, 
	g”rÜs
.
New
("someƒrror")

55 
func
 
çkeG‘E¼
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme
, 
Çme¥aû
 
¡ršg
, 
İts
 
m‘av1
.
G‘O±iÚs
è(*
	gcÜev1
.
	gP”si¡’tVŞumeCÏim
, 
	g”rÜ
) {

56  &
	gcÜev1
.
	gP”si¡’tVŞumeCÏim
{}, 
	g”rÜs
.
New
("someƒrror")

59 
func
 
	$çkeD–‘eE¼
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme
, 
Çme¥aû
 
¡ršg
, 
İts
 *
m‘av1
.
D–‘eO±iÚs
è
”rÜ
 {

60  
”rÜs
.
	`New
("someƒrror")

61 
	}
}

63 
func
 
	$çkeS‘Cl›Á£t
(
k
 *
Kubeş›Á
) {

64 
k
.
ş›Á£t
 = &
kub”Ã‹s
.
Cl›Á£t
{}

65 
	}
}

67 
func
 
	$çkeS‘KubeCÚfigP©h
(
k
 *
Kubeş›Á
) {

68 
k
.
kubeCÚfigP©h
 = "fake-path"

69 
	}
}

71 
func
 
	$çkeS‘NCl›Á£t
(
k
 *
Kubeş›Á
) {

72 
k
.
ş›Á£t
 = 
n


73 
	}
}

75 
func
 
	$çkeG‘Cl›ÁS‘N
(è(
ş›Á£t
 *
kub”Ã‹s
.
Cl›Á£t
, 
”r
 
”rÜ
) {

76  
n
,‚il

77 
	}
}

79 
func
 
	$çkeG‘Cl›ÁS‘E¼
(è(
ş›Á£t
 *
kub”Ã‹s
.
Cl›Á£t
, 
”r
 
”rÜ
) {

80  
n
, 
”rÜs
.
	`New
("Someƒrror")

81 
	}
}

83 
func
 
	$çkeCl›ÁS‘
(
k
 *
Kubeş›Á
è{
	}
}

85 
func
 
çkeC»©eFnOk
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme¥aû
 
¡ršg
, 
pvc
 *
cÜev1
.
P”si¡’tVŞumeCÏim
è(*
	gcÜev1
.
	gP”si¡’tVŞumeCÏim
, 
	g”rÜ
) {

86  &
	gcÜev1
.
	gP”si¡’tVŞumeCÏim
{}, 
	gn


89 
func
 
çkeC»©eFnE¼
(
şi
 *
kub”Ã‹s
.
Cl›Á£t
, 
Çme¥aû
 
¡ršg
, 
pvc
 *
cÜev1
.
P”si¡’tVŞumeCÏim
è(*
	gcÜev1
.
	gP”si¡’tVŞumeCÏim
, 
	g”rÜ
) {

90  
	gn
, 
	g”rÜs
.
New
("failedo create PVC")

93 
func
 
	$Te¡W™hDeçuÉO±iÚs
(
t
 *
‹¡šg
.
T
) {

94 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

95 
KubeCl›Á
 *
Kubeş›Á


97 "Wh’‡Î‡»‚": {&
Kubeş›Á
{}},

98 "Wh’ cl›Á£ˆi n": {&
Kubeş›Á
{

99 
ş›Á£t
: 
n
,

100 
g‘Cl›Á£t
: 
çkeG‘Cl›ÁS‘Ok
,

101 
g‘Cl›Á£tFÜP©h
: 
çkeG‘Cl›ÁS‘FÜP©hOk
,

102 
li¡
: 
çkeLi¡Ok
,

103 
g‘
: 
çkeG‘Ok
,

104 
ü—‹
: 
çkeC»©eFnOk
,

105 
d–
: 
çkeD–‘eOk
,

106 
d–CŞËùiÚ
: 
n
,

108 "Wh’†i¡FÀn": {&
Kubeş›Á
{

109 
g‘Cl›Á£t
: 
çkeG‘Cl›ÁS‘Ok
,

110 
li¡
: 
n
,

111 
g‘Cl›Á£tFÜP©h
: 
çkeG‘Cl›ÁS‘FÜP©hE¼
,

112 
g‘
: 
çkeG‘Ok
,

113 
ü—‹
: 
çkeC»©eFnOk
,

114 
d–
: 
çkeD–‘eOk
,

115 
d–CŞËùiÚ
: 
n
,

117 "Wh’ g‘Cl›Á£tFÀn": {&
Kubeş›Á
{

118 
g‘Cl›Á£t
: 
n
,

119 
li¡
: 
çkeLi¡Ok
,

120 
g‘
: 
çkeG‘Ok
,

121 
g‘Cl›Á£tFÜP©h
: 
çkeG‘Cl›ÁS‘FÜP©hOk
,

122 
ü—‹
: 
çkeC»©eFnOk
,

123 
d–
: 
çkeD–‘eOk
,

124 
d–CŞËùiÚ
: 
n
,

126 "Wh’ g‘FÀªd C»©eFÀ¬n": {&
Kubeş›Á
{

127 
g‘Cl›Á£t
: 
çkeG‘Cl›ÁS‘Ok
,

128 
li¡
: 
çkeLi¡Ok
,

129 
g‘Cl›Á£tFÜP©h
: 
çkeG‘Cl›ÁS‘FÜP©hE¼
,

130 
g‘
: 
n
,

131 
ü—‹
: 
n
,

132 
d–
: 
çkeD–‘eOk
,

133 
d–CŞËùiÚ
: 
n
,

136 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

137 
Çme
 :=‚ame

138 
mock
 := mock

139 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

140 
mock
.
KubeCl›Á
.
	`w™hDeçuÉs
()

141 
mock
.
KubeCl›Á
.
g‘Cl›Á£t
 =ğ
n
 {

142 
t
.
	`F©®f
("‹¡ %q faed:ƒx³ùed g‘Cl›Á£ˆnÙØbem±y", 
Çme
)

144 
mock
.
KubeCl›Á
.
g‘Cl›Á£tFÜP©h
 =ğ
n
 {

145 
t
.
	`F©®f
("‹¡ %q faed:ƒx³ùed g‘Cl›Á£ˆnÙØbn", 
Çme
)

147 
mock
.
KubeCl›Á
.
li¡
 =ğ
n
 {

148 
t
.
	`F©®f
("‹¡ %q faed:ƒx³ùed†i¡‚ÙØbem±y", 
Çme
)

150 
mock
.
KubeCl›Á
.
g‘
 =ğ
n
 {

151 
t
.
	`F©®f
("‹¡ %q faed:ƒx³ùed g‘‚ÙØbem±y", 
Çme
)

153 
mock
.
KubeCl›Á
.
ü—‹
 =ğ
n
 {

154 
t
.
	`F©®f
("‹¡ %q faed:ƒx³ùed c»©nÙØbem±y", 
Çme
)

156 
mock
.
KubeCl›Á
.
d–
 =ğ
n
 {

157 
t
.
	`F©®f
("‹¡ %q faed:ƒx³ùed d–‚ÙØbem±y", 
Çme
)

159 
mock
.
KubeCl›Á
.
d–CŞËùiÚ
 =ğ
n
 {

160 
t
.
	`F©®f
("‹¡ %q faed:ƒx³ùed d–CŞËùiÚ‚ÙØbem±y", 
Çme
)

164 
	}
}

166 
func
 
	$Te¡G‘Cl›ÁS‘FÜP©hOrDœeù
(
t
 *
‹¡šg
.
T
) {

167 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

168 
g‘Cl›ÁS‘
 
g‘Cl›Á£tFn


169 
g‘Cl›ÁS‘FÜP©h
 
g‘Cl›Á£tFÜP©hFn


170 
kubeCÚfigP©h
 
¡ršg


171 
isE¼
 
boŞ


174 "Pos™iv1": {
çkeG‘Cl›ÁS‘N
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "çke-·th", 
çl£
},

175 "Pos™iv2": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "", 
çl£
},

176 "Pos™iv3": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "çke-·th", 
çl£
},

177 "Pos™iv4": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "", 
çl£
},

180 "Neg©iv1": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "", 
Œue
},

181 "Neg©iv2": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "çke-·th", 
Œue
},

182 "Neg©iv3": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "çke-·th", 
Œue
},

183 "Neg©iv4": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "", 
Œue
},

186 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

187 
Çme
, 
mock
 :=‚ame, mock

188 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

189 
fc
 :ğ&
Kubeş›Á
{

190 
g‘Cl›Á£t
: 
mock
.
g‘Cl›ÁS‘
,

191 
g‘Cl›Á£tFÜP©h
: 
mock
.
g‘Cl›ÁS‘FÜP©h
,

192 
kubeCÚfigP©h
: 
mock
.kubeConfigPath,

194 
_
, 
”r
 :ğ
fc
.
	`g‘Cl›Á£tFÜP©hOrDœeù
()

195 
mock
.
isE¼
 && 
”r
 =ğ
n
 {

196 
t
.
	`F©®f
("‹¡ %q faed :ƒx³ùedƒ¼Ü‚ÙØbn buˆgÙ %v", 
Çme
, 
”r
)

198 !
mock
.
isE¼
 && 
”r
 !ğ
n
 {

199 
t
.
	`F©®f
("‹¡ %q faed :ƒx³ùedƒ¼Ü bn buˆgÙ %v", 
Çme
, 
”r
)

203 
	}
}

205 
func
 
	$Te¡W™hCl›Á£tBudO±iÚ
(
t
 *
‹¡šg
.
T
) {

206 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

207 
Cl›Á£t
 *
kub”Ã‹s
.Clientset

208 
ex³ùKubeCl›ÁEm±y
 
boŞ


210 "Cl›Á£ˆi em±y": {
n
, 
Œue
},

211 "Cl›Á£ˆi nÙƒm±y": {&
kub”Ã‹s
.
Cl›Á£t
{}, 
çl£
},

214 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

215 
Çme
, 
mock
 :=‚ame, mock

216 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

217 
h
 :ğ
	`W™hCl›ÁS‘
(
mock
.
Cl›Á£t
)

218 
çke
 :ğ&
Kubeş›Á
{}

219 
	`h
(
çke
)

220 
mock
.
ex³ùKubeCl›ÁEm±y
 && 
çke
.
ş›Á£t
 !ğ
n
 {

221 
t
.
	`F©®f
("‹¡ %q faedƒx³ùed fake.ş›Á£ˆtØbem±y", 
Çme
)

223 !
mock
.
ex³ùKubeCl›ÁEm±y
 && 
çke
.
ş›Á£t
 =ğ
n
 {

224 
t
.
	`F©®f
("‹¡ %q faedƒx³ùed fake.ş›Á£ˆnÙØbem±y", 
Çme
)

228 
	}
}

230 
func
 
	$Te¡KubeCl›ÁBudO±iÚ
(
t
 *
‹¡šg
.
T
) {

231 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

232 
İts
 []
Kubeş›ÁBudO±iÚ


233 
ex³ùCl›ÁS‘
 
boŞ


234 
ex³ùedKubeCÚfigP©h
 
boŞ


236 "Pos™iv1": {[]
Kubeş›ÁBudO±iÚ
{
çkeS‘Cl›Á£t
, 
çkeS‘KubeCÚfigP©h
}, 
Œue
,rue},

237 "Pos™iv2": {[]
Kubeş›ÁBudO±iÚ
{
çkeS‘Cl›Á£t
, 
çkeCl›ÁS‘
}, 
Œue
, 
çl£
},

238 "Pos™iv3": {[]
Kubeş›ÁBudO±iÚ
{
çkeS‘Cl›Á£t
, 
çkeCl›ÁS‘
, fakeCl›ÁS‘}, 
Œue
, 
çl£
},

240 "Neg©iv1": {[]
Kubeş›ÁBudO±iÚ
{
çkeS‘NCl›Á£t
, 
çkeS‘KubeCÚfigP©h
}, 
çl£
, 
Œue
},

241 "Neg©iv2": {[]
Kubeş›ÁBudO±iÚ
{
çkeS‘NCl›Á£t
, 
çkeCl›ÁS‘
, 
çkeS‘KubeCÚfigP©h
}, 
çl£
, 
Œue
},

242 "Neg©iv3": {[]
Kubeş›ÁBudO±iÚ
{
çkeS‘NCl›Á£t
, 
çkeCl›ÁS‘
, fakeCl›ÁS‘}, 
çl£
, false},

245 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

246 
Çme
, 
mock
 :=‚ame, mock

247 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

248 
c
 :ğ
	`NewKubeCl›Á
(
mock
.
İts
...)

249 !
mock
.
ex³ùCl›ÁS‘
 && 
c
.
ş›Á£t
 !ğ
n
 {

250 
t
.
	`F©®f
("‹¡ %q faedƒx³ùed fake.ş›Á£ˆtØbem±y", 
Çme
)

252 
mock
.
ex³ùCl›ÁS‘
 && 
c
.
ş›Á£t
 =ğ
n
 {

253 
t
.
	`F©®f
("‹¡ %q faedƒx³ùed fake.ş›Á£ˆnÙØbem±y", 
Çme
)

255 
mock
.
ex³ùedKubeCÚfigP©h
 && 
c
.
kubeCÚfigP©h
 == "" {

256 
t
.
	`F©®f
("‹¡ %q faedƒx³ùed kubeCÚfigP©h‚ÙØbem±y", 
Çme
)

258 !
mock
.
ex³ùedKubeCÚfigP©h
 && 
c
.
kubeCÚfigP©h
 != "" {

259 
t
.
	`F©®f
("‹¡ %q faedƒx³ùed kubeCÚfigP©hØbem±y", 
Çme
)

263 
	}
}

265 
func
 
	$Te¡G‘Cl›ÁOrCached
(
t
 *
‹¡šg
.
T
) {

266 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

267 
g‘Cl›ÁS‘
 
g‘Cl›Á£tFn


268 
g‘Cl›ÁS‘FÜP©h
 
g‘Cl›Á£tFÜP©hFn


269 
kubeCÚfigP©h
 
¡ršg


270 
ex³ùE¼
 
boŞ


273 "Pos™iv1": {
çkeG‘Cl›ÁS‘N
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "çke-·th", 
çl£
},

274 "Pos™iv2": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "", 
çl£
},

275 "Pos™iv3": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "çke-·th", 
çl£
},

276 "Pos™iv4": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "", 
çl£
},

279 "Neg©iv1": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "", 
Œue
},

280 "Neg©iv2": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "çke-·th", 
Œue
},

281 "Neg©iv3": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "çke-·th", 
Œue
},

282 "Neg©iv4": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "", 
Œue
},

285 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

286 
Çme
 :=‚ame

287 
mock
 := mock

288 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

289 
fc
 :ğ&
Kubeş›Á
{

290 
g‘Cl›Á£t
: 
mock
.
g‘Cl›ÁS‘
,

291 
g‘Cl›Á£tFÜP©h
: 
mock
.
g‘Cl›ÁS‘FÜP©h
,

292 
kubeCÚfigP©h
: 
mock
.kubeConfigPath,

294 
_
, 
”r
 :ğ
fc
.
	`g‘Cl›Á£tOrCached
()

295 
mock
.
ex³ùE¼
 && 
”r
 =ğ
n
 {

296 
t
.
	`F©®f
("‹¡ %q faed :ƒx³ùedƒ¼Ü‚ÙØbn buˆgÙ %v", 
Çme
, 
”r
)

298 !
mock
.
ex³ùE¼
 && 
”r
 !ğ
n
 {

299 
t
.
	`F©®f
("‹¡ %q faed :ƒx³ùedƒ¼Ü bn buˆgÙ %v", 
Çme
, 
”r
)

303 
	}
}

305 
func
 
	$Te¡Kub”Ã‹sPVCLi¡
(
t
 *
‹¡šg
.
T
) {

306 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

307 
g‘Cl›Á£t
 
g‘Cl›Á£tFn


308 
g‘Cl›ÁS‘FÜP©h
 
g‘Cl›Á£tFÜP©hFn


309 
kubeCÚfigP©h
 
¡ršg


310 
li¡
 
li¡Fn


311 
ex³ùedE¼
 
boŞ


314 "Pos™iv1": {
çkeG‘Cl›ÁS‘N
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "çke-·th", 
çkeLi¡Ok
, 
çl£
},

315 "Pos™iv2": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "", 
çkeLi¡Ok
, 
çl£
},

316 "Pos™iv3": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "çke-·th", 
çkeLi¡Ok
, 
çl£
},

317 "Pos™iv4": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "", 
çkeLi¡Ok
, 
çl£
},

320 "Neg©iv1": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "", 
çkeLi¡Ok
, 
Œue
},

321 "Neg©iv2": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "çke-·th", 
çkeLi¡Ok
, 
Œue
},

322 "Neg©iv3": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "çke-·th", 
çkeLi¡Ok
, 
Œue
},

323 "Neg©iv4": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "", 
çkeLi¡E¼
, 
Œue
},

326 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

327 
Çme
 :=‚ame

328 
mock
 := mock

329 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

330 
fc
 :ğ&
Kubeş›Á
{

331 
g‘Cl›Á£t
: 
mock
.getClientset,

332 
g‘Cl›Á£tFÜP©h
: 
mock
.
g‘Cl›ÁS‘FÜP©h
,

333 
kubeCÚfigP©h
: 
mock
.kubeConfigPath,

334 
li¡
: 
mock
.list,

336 
_
, 
”r
 :ğ
fc
.
	`Li¡
(
m‘av1
.
Li¡O±iÚs
{})

337 
mock
.
ex³ùedE¼
 && 
”r
 =ğ
n
 {

338 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

340 !
mock
.
ex³ùedE¼
 && 
”r
 !ğ
n
 {

341 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

345 
	}
}

347 
func
 
	$Te¡W™hName¥aûBudO±iÚ
(
t
 *
‹¡šg
.
T
) {

348 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

349 
Çme¥aû
 
¡ršg


356 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

357 
Çme
, 
mock
 :=‚ame, mock

358 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

359 
k
 :ğ
	`NewKubeCl›Á
().
	`W™hName¥aû
(
mock
.
Çme¥aû
)

360 
k
.
Çme¥aû
 !ğ
mock
.namespace {

361 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùed %v gÙ %v", 
Çme
, 
mock
.
Çme¥aû
, 
k
.namespace)

365 
	}
}

367 
func
 
	$Te¡Kub’‘esG‘PVC
(
t
 *
‹¡šg
.
T
) {

368 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

369 
g‘Cl›Á£t
 
g‘Cl›Á£tFn


370 
g‘Cl›ÁS‘FÜP©h
 
g‘Cl›Á£tFÜP©hFn


371 
kubeCÚfigP©h
 
¡ršg


372 
g‘
 
g‘Fn


373 
podName
 
¡ršg


374 
ex³ùE¼
 
boŞ


376 "Te¡ 1": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "", 
çkeG‘Ok
, "pod-1", 
Œue
},

377 "Te¡ 2": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "çke-·th", 
çkeG‘Ok
, "pod-1", 
Œue
},

378 "Te¡ 3": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "", 
çkeG‘Ok
, "pod-2", 
çl£
},

379 "Te¡ 4": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "å", 
çkeG‘E¼
, "pod-3", 
Œue
},

380 "Te¡ 5": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "çk•©h", 
çkeG‘Ok
, "", 
Œue
},

383 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

384 
Çme
 :=‚ame

385 
mock
 := mock

386 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

387 
k
 :ğ&
Kubeş›Á
{

388 
g‘Cl›Á£t
: 
mock
.getClientset,

389 
g‘Cl›Á£tFÜP©h
: 
mock
.
g‘Cl›ÁS‘FÜP©h
,

390 
kubeCÚfigP©h
: 
mock
.kubeConfigPath,

391 
Çme¥aû
: "",

392 
g‘
: 
mock
.get,

394 
_
, 
”r
 :ğ
k
.
	`G‘
(
mock
.
podName
, 
m‘av1
.
G‘O±iÚs
{})

395 
mock
.
ex³ùE¼
 && 
”r
 =ğ
n
 {

396 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

398 !
mock
.
ex³ùE¼
 && 
”r
 !ğ
n
 {

399 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

403 
	}
}

405 
func
 
	$Te¡Kub”Ã‹sD–‘ePVC
(
t
 *
‹¡šg
.
T
) {

406 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

407 
g‘Cl›Á£t
 
g‘Cl›Á£tFn


408 
g‘Cl›ÁS‘FÜP©h
 
g‘Cl›Á£tFÜP©hFn


409 
kubeCÚfigP©h
 
¡ršg


410 
podName
 
¡ršg


411 
d–‘e
 
d–‘eFn


412 
ex³ùE¼
 
boŞ


414 "Te¡ 1": {
çkeG‘Cl›ÁS‘E¼
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "", "pod-1", 
çkeD–‘eOk
, 
Œue
},

415 "Te¡ 2": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "çke-·th2", "pod-2", 
çkeD–‘eOk
, 
çl£
},

416 "Te¡ 3": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "", "pod-3", 
çkeD–‘eE¼
, 
Œue
},

417 "Te¡ 4": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hOk
, "çk•©h", "", 
çkeD–‘eOk
, 
Œue
},

418 "Te¡ 5": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "çke-·th2", "pod1", 
çkeD–‘eOk
, 
Œue
},

419 "Te¡ 6": {
çkeG‘Cl›ÁS‘Ok
, 
çkeG‘Cl›ÁS‘FÜP©hE¼
, "çke-·th2", "pod1", 
çkeD–‘eE¼
, 
Œue
},

422 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

423 
Çme
 :=‚ame

424 
mock
 := mock

425 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

426 
k
 :ğ&
Kubeş›Á
{

427 
g‘Cl›Á£t
: 
mock
.getClientset,

428 
g‘Cl›Á£tFÜP©h
: 
mock
.
g‘Cl›ÁS‘FÜP©h
,

429 
kubeCÚfigP©h
: 
mock
.kubeConfigPath,

430 
Çme¥aû
: "",

431 
d–
: 
mock
.
d–‘e
,

433 
”r
 :ğ
k
.
	`D–‘e
(
mock
.
podName
, &
m‘av1
.
D–‘eO±iÚs
{})

434 
mock
.
ex³ùE¼
 && 
”r
 =ğ
n
 {

435 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

437 !
mock
.
ex³ùE¼
 && 
”r
 !ğ
n
 {

438 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

442 
	}
}

444 
func
 
	$Te¡Kub”Ã‹sPVCC»©e
(
t
 *
‹¡šg
.
T
) {

445 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

446 
g‘Cl›ÁS‘
 
g‘Cl›Á£tFn


447 
g‘Cl›ÁS‘FÜP©h
 
g‘Cl›Á£tFÜP©hFn


448 
kubeCÚfigP©h
 
¡ršg


449 
ü—‹
 
ü—‹Fn


450 
pvc
 *
v1
.
P”si¡’tVŞumeCÏim


451 
ex³ùE¼
 
boŞ


454 
g‘Cl›ÁS‘
: 
çkeG‘Cl›ÁS‘E¼
,

455 
g‘Cl›ÁS‘FÜP©h
: 
çkeG‘Cl›ÁS‘FÜP©hE¼
,

456 
kubeCÚfigP©h
: "",

457 
ü—‹
: 
çkeC»©eFnOk
,

458 
pvc
: &
v1
.
P”si¡’tVŞumeCÏim
{
ObjeùM‘a
: 
m‘av1
.ObjeùM‘a{
Name
: "PVC-1"}},

459 
ex³ùE¼
: 
Œue
,

462 
g‘Cl›ÁS‘
: 
çkeG‘Cl›ÁS‘Ok
,

463 
g‘Cl›ÁS‘FÜP©h
: 
çkeG‘Cl›ÁS‘FÜP©hOk
,

464 
kubeCÚfigP©h
: "",

465 
ü—‹
: 
çkeC»©eFnE¼
,

466 
pvc
: &
v1
.
P”si¡’tVŞumeCÏim
{
ObjeùM‘a
: 
m‘av1
.ObjeùM‘a{
Name
: "PVC-2"}},

467 
ex³ùE¼
: 
Œue
,

470 
g‘Cl›ÁS‘
: 
çkeG‘Cl›ÁS‘Ok
,

471 
g‘Cl›ÁS‘FÜP©h
: 
çkeG‘Cl›ÁS‘FÜP©hOk
,

472 
kubeCÚfigP©h
: "fake-path",

473 
ü—‹
: 
çkeC»©eFnE¼
,

474 
pvc
: 
n
,

475 
ex³ùE¼
: 
Œue
,

478 
g‘Cl›ÁS‘
: 
çkeG‘Cl›ÁS‘E¼
,

479 
g‘Cl›ÁS‘FÜP©h
: 
çkeG‘Cl›ÁS‘FÜP©hOk
,

480 
kubeCÚfigP©h
: "fake-path",

481 
ü—‹
: 
çkeC»©eFnOk
,

482 
pvc
: 
n
,

483 
ex³ùE¼
: 
Œue
,

486 
g‘Cl›ÁS‘
: 
çkeG‘Cl›ÁS‘Ok
,

487 
g‘Cl›ÁS‘FÜP©h
: 
çkeG‘Cl›ÁS‘FÜP©hE¼
,

488 
kubeCÚfigP©h
: "fake-path",

489 
ü—‹
: 
çkeC»©eFnOk
,

490 
pvc
: 
n
,

491 
ex³ùE¼
: 
Œue
,

495 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

496 
Çme
, 
mock
 :=‚ame, mock

497 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

498 
fc
 :ğ&
Kubeş›Á
{

499 
g‘Cl›Á£t
: 
mock
.
g‘Cl›ÁS‘
,

500 
g‘Cl›Á£tFÜP©h
: 
mock
.
g‘Cl›ÁS‘FÜP©h
,

501 
kubeCÚfigP©h
: 
mock
.kubeConfigPath,

502 
ü—‹
: 
mock
.create,

504 
_
, 
”r
 :ğ
fc
.
	`C»©e
(
mock
.
pvc
)

505 
mock
.
ex³ùE¼
 && 
”r
 =ğ
n
 {

506 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

508 !
mock
.
ex³ùE¼
 && 
”r
 !ğ
n
 {

509 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

513 
	}
}

515 
func
 
	$Te¡Kub”Ã‹sPVCC»©eCŞËùiÚ
(
t
 *
‹¡šg
.
T
) {

516 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

517 
g‘Cl›ÁS‘
 
g‘Cl›Á£tFn


518 
ü—‹
 
ü—‹Fn


519 
pvc
 *
v1
.
P”si¡’tVŞumeCÏim


520 
ex³ùE¼
 
boŞ


523 
g‘Cl›ÁS‘
: 
çkeG‘Cl›ÁS‘E¼
,

524 
ü—‹
: 
çkeC»©eFnOk
,

525 
pvc
: &
v1
.
P”si¡’tVŞumeCÏim
{

526 
ObjeùM‘a
: 
m‘av1
.ObjeùM‘a{
G’”©eName
: "PVC-1"},

528 
ex³ùE¼
: 
Œue
,

531 
g‘Cl›ÁS‘
: 
çkeG‘Cl›ÁS‘Ok
,

532 
ü—‹
: 
çkeC»©eFnE¼
,

533 
pvc
: &
v1
.
P”si¡’tVŞumeCÏim
{

534 
ObjeùM‘a
: 
m‘av1
.ObjeùM‘a{
G’”©eName
: "PVC-2"},

536 
ex³ùE¼
: 
Œue
,

539 
g‘Cl›ÁS‘
: 
çkeG‘Cl›ÁS‘Ok
,

540 
ü—‹
: 
çkeC»©eFnOk
,

541 
pvc
: 
n
,

542 
ex³ùE¼
: 
Œue
,

545 
g‘Cl›ÁS‘
: 
çkeG‘Cl›ÁS‘Ok
,

546 
ü—‹
: 
çkeC»©eFnOk
,

547 
pvc
: &
v1
.
P”si¡’tVŞumeCÏim
{

548 
ObjeùM‘a
: 
m‘av1
.ObjeùM‘a{
G’”©eName
: "PVC-4"},

550 
ex³ùE¼
: 
çl£
,

554 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

555 
Çme
, 
mock
 :=‚ame, mock

556 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

557 
fc
 :ğ&
Kubeş›Á
{

558 
g‘Cl›Á£t
: 
mock
.
g‘Cl›ÁS‘
,

559 
ü—‹
: 
mock
.create,

561 
pvşi¡
, 
_
 :ğ
	`Li¡Bud”FromTem¶©e
(
mock
.
pvc
).
	`W™hCouÁ
(10).
	`APILi¡
()

562 
Ãwli¡
, 
”r
 :ğ
fc
.
	`C»©eCŞËùiÚ
(
pvşi¡
)

563 
mock
.
ex³ùE¼
 && 
”r
 =ğ
n
 {

564 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

566 !
mock
.
ex³ùE¼
 && 
”r
 !ğ
n
 {

567 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

569 !
mock
.
ex³ùE¼
 && 
	`Ën
(
Ãwli¡
.
I‹ms
) != 10 {

570 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùed couÁ {%d} gÙ {%d}", 
Çme
, 10, 
	`Ën
(
Ãwli¡
.
I‹ms
))

574 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/persistentvolumeclaim.go

15 
·ckage
 
v1®pha1


17 
impÜt
 (

20 
cÜev1
 "k8s.io/api/core/v1"

26 
ty³
 
PVC
 struct {

27 
objeù
 *
	mcÜev1
.
	mP”si¡’tVŞumeCÏim


33 
ty³
 
PVCLi¡
 struct {

34 
	m™ems
 []*
	mPVC


39 
	$func
 (
p
 *
PVCLi¡
è
	$L’
() {

40  
	`Ën
(
p
.
™ems
)

41 
	}
}

44 
	$func
 (
p
 *
PVCLi¡
è
	`ToAPILi¡
(è*
cÜev1
.
P”si¡’tVŞumeCÏimLi¡
 {

45 
¶i¡
 :ğ&
cÜev1
.
P”si¡’tVŞumeCÏimLi¡
{}

46 
_
, 
pvc
 :ğ
¿nge
 
p
.
™ems
 {

47 
¶i¡
.
I‹ms
 = 
	`­³nd
Õli¡.I‹ms, *
pvc
.
objeù
)

49  
¶i¡


50 
	}
}

52 
ty³
 
pvcBudO±iÚ
 
	$func
(*
PVC
)

55 
func
 
	`NewFÜAPIObjeù
(
obj
 *
cÜev1
.
P”si¡’tVŞumeCÏim
, 
İts
 ...
pvcBudO±iÚ
è*
PVC
 {

56 
p
 :ğ&
PVC
{
objeù
: 
obj
}

57 
_
, 
o
 :ğ
¿nge
 
İts
 {

58 
	`o
(
p
)

60  
p


61 
	}
}

66 
ty³
 
P»diÿ‹
 
	$func
(*
PVC
è
boŞ


69 
	$func
 (
p
 *
PVC
è
	$IsBound
(è
boŞ
 {

70  
p
.
objeù
.
Stus
.
Pha£
 =ğ
cÜev1
.
CÏimBound


71 
	}
}

75 
func
 
	$IsBound
(è
P»diÿ‹
 {

76  
	`func
(
p
 *
PVC
è
boŞ
 {

77  
p
.
	`IsBound
()

79 
	}
}

83 
	$func
 (
p
 *
PVC
è
	$IsN
(è
boŞ
 {

84  
p
.
objeù
 =ğ
n


85 
	}
}

89 
func
 
	$IsN
(è
P»diÿ‹
 {

90  
	`func
(
p
 *
PVC
è
boŞ
 {

91  
p
.
	`IsN
()

93 
	}
}

97 
func
 
	$CÚšsName
(
Çme
 
¡ršg
è
P»diÿ‹
 {

98  
	`func
(
p
 *
PVC
è
boŞ
 {

99  
¡ršgs
.
	`CÚšs
(
p
.
objeù
.
	`G‘Name
(), 
Çme
)

101 
	}
}

104 
ty³
 
	gP»diÿ‹Li¡
 []
P»diÿ‹


109 
	$func
 (
l
 
P»diÿ‹Li¡
è
	$®l
(
p
 *
PVC
è
boŞ
 {

110 
_
, 
´ed
 :ğ
¿nge
 
l
 {

111 !
	`´ed
(
p
) {

112  
çl£


115  
Œue


116 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/persistentvolumeclaim_test.go

15 
·ckage
 
v1®pha1


17 
impÜt
 (

18 
cÜev1
 "k8s.io/api/core/v1"

21 
func
 
çkeAPIPVCLi¡
(
pvcNames
 []
¡ršg
è*
	gcÜev1
.
	gP”si¡’tVŞumeCÏimLi¡
 {

22 
Ën
(
pvcNames
) == 0 {

23  
n


25 
li¡
 :ğ&
cÜev1
.
P”si¡’tVŞumeCÏimLi¡
{}

26 
_
, 
	gÇme
 :ğ
¿nge
 
pvcNames
 {

27 
pvc
 :ğ
cÜev1
.
P”si¡’tVŞumeCÏim
{}

28 
pvc
.
S‘Name
(
Çme
)

29 
li¡
.
I‹ms
 = 
­³nd
Öi¡.I‹ms, 
pvc
)

31  
	gli¡


34 
func
 
çkeAPIPVCLi¡FromNameStusM­
(
pvcs
 
m­
[
¡ršg
]
cÜev1
.
P”si¡’tVŞumeCÏimPha£
è*
	gcÜev1
.
	gP”si¡’tVŞumeCÏimLi¡
 {

35 
Ën
(
pvcs
) == 0 {

36  
n


38 
li¡
 :ğ&
cÜev1
.
P”si¡’tVŞumeCÏimLi¡
{}

39 
k
, 
	gv
 :ğ
¿nge
 
pvcs
 {

40 
pvc
 :ğ
cÜev1
.
P”si¡’tVŞumeCÏim
{}

41 
pvc
.
S‘Name
(
k
)

42 
pvc
.
Stus
.
Pha£
 = 
v


43 
li¡
.
I‹ms
 = 
­³nd
Öi¡.I‹ms, 
pvc
)

45  
	gli¡


	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/service/v1alpha1/build.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

20 
”rÜs
 "github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1"

21 
cÜev1
 "k8s.io/api/core/v1"

22 
m‘av1
 "k8s.io/apimachinery/pkg/apis/meta/v1"

26 
ty³
 
Bud”
 struct {

27 
£rviû
 *
S”viû


28 
	m”rs
 []
	m”rÜ


32 
func
 
NewBud”
(è*
	gBud”
 {

33  &
	gBud”
{
	g£rviû
: &
S”viû
{
objeù
: &
cÜev1
.Service{}}}

37 
	$func
 (
b
 *
Bud”
è
	`W™hName
(
Çme
 
¡ršg
) *Builder {

38 
	`Ën
(
Çme
) == 0 {

39 
b
.
”rs
 = 
	`­³nd
(

40 
b
.
”rs
,

41 
”rÜs
.

42 
	`New
("failedo build service object: missing‚ame"),

44  
b


46 
b
.
£rviû
.
objeù
.
Name
 = 
Çme


47  
b


48 
	}
}

52 
	$func
 (
b
 *
Bud”
è
	`W™hG’”©eName
(
Çme
 
¡ršg
) *Builder {

53 
	`Ën
(
Çme
) == 0 {

54 
b
.
”rs
 = 
	`­³nd
(

55 
b
.
”rs
,

56 
”rÜs
.

57 
	`New
("failedo build service object: missing generateName"),

59  
b


62 
b
.
£rviû
.
objeù
.
G’”©eName
 = 
Çme


63  
b


64 
	}
}

67 
	$func
 (
b
 *
Bud”
è
	`W™hName¥aû
(
Çme¥aû
 
¡ršg
) *Builder {

68 
	`Ën
(
Çme¥aû
) == 0 {

69 
b
.
”rs
 = 
	`­³nd
(

70 
b
.
”rs
,

71 
”rÜs
.

72 
	`New
("failedo build service object: missing‚amespace"),

74  
b


76 
b
.
£rviû
.
objeù
.
Name¥aû
 = 
Çme¥aû


77  
b


78 
	}
}

82 
	$func
 (
b
 *
Bud”
è
	`W™hAÂÙ©iÚs
(
ªnÙ©iÚs
 
m­
[
¡ršg
]string) *Builder {

83 
	`Ën
(
ªnÙ©iÚs
) == 0 {

84 
b
.
”rs
 = 
	`­³nd
(

85 
b
.
”rs
,

86 
”rÜs
.
	`New
("failedo build service object: missing‡nnotations"),

88  
b


91 
b
.
£rviû
.
objeù
.
AÂÙ©iÚs
 =ğ
n
 {

92  
b
.
	`W™hAÂÙ©iÚsNew
(
ªnÙ©iÚs
)

95 
key
, 
v®ue
 :ğ
¿nge
 
ªnÙ©iÚs
 {

96 
b
.
£rviû
.
objeù
.
AÂÙ©iÚs
[
key
] = 
v®ue


98  
b


99 
	}
}

103 
	$func
 (
b
 *
Bud”
è
	`W™hAÂÙ©iÚsNew
(
ªnÙ©iÚs
 
m­
[
¡ršg
]string) *Builder {

104 
	`Ën
(
ªnÙ©iÚs
) == 0 {

105 
b
.
”rs
 = 
	`­³nd
(

106 
b
.
”rs
,

107 
”rÜs
.
	`New
("failedo build service object:‚o‚ew‡nnotations"),

109  
b


113 
ÃwªnÙ©iÚs
 :ğ
m­
[
¡ršg
]string{}

114 
key
, 
v®ue
 :ğ
¿nge
 
ªnÙ©iÚs
 {

115 
ÃwªnÙ©iÚs
[
key
] = 
v®ue


119 
b
.
£rviû
.
objeù
.
AÂÙ©iÚs
 = 
ÃwªnÙ©iÚs


120  
b


121 
	}
}

125 
	$func
 (
b
 *
Bud”
è
	`W™hOwÃrReã»nûNew
(
owÃrReãºû
 []
m‘av1
.
OwÃrReã»nû
) *Builder {

126 
	`Ën
(
owÃrReãºû
) == 0 {

127 
b
.
”rs
 = 
	`­³nd
(

128 
b
.
”rs
,

129 
”rÜs
.
	`New
("failedo build service object:‚o‚ew ownerRefernce"),

131  
b


134 
b
.
£rviû
.
objeù
.
OwÃrReã»nûs
 = 
owÃrReãºû


135  
b


136 
	}
}

140 
	$func
 (
b
 *
Bud”
è
	`W™hLab–s
(
Ïb–s
 
m­
[
¡ršg
]string) *Builder {

141 
	`Ën
(
Ïb–s
) == 0 {

142 
b
.
”rs
 = 
	`­³nd
(

143 
b
.
”rs
,

144 
”rÜs
.
	`New
("failedo build service object: missing†abels"),

146  
b


149 
b
.
£rviû
.
objeù
.
Lab–s
 =ğ
n
 {

150  
b
.
	`W™hLab–sNew
(
Ïb–s
)

153 
key
, 
v®ue
 :ğ
¿nge
 
Ïb–s
 {

154 
b
.
£rviû
.
objeù
.
Lab–s
[
key
] = 
v®ue


156  
b


157 
	}
}

161 
	$func
 (
b
 *
Bud”
è
	`W™hLab–sNew
(
Ïb–s
 
m­
[
¡ršg
]string) *Builder {

162 
	`Ën
(
Ïb–s
) == 0 {

163 
b
.
”rs
 = 
	`­³nd
(

164 
b
.
”rs
,

165 
”rÜs
.
	`New
("failedo build service object:‚o‚ew†abels"),

167  
b


171 
Ãwlbls
 :ğ
m­
[
¡ršg
]string{}

172 
key
, 
v®ue
 :ğ
¿nge
 
Ïb–s
 {

173 
Ãwlbls
[
key
] = 
v®ue


177 
b
.
£rviû
.
objeù
.
Lab–s
 = 
Ãwlbls


178  
b


179 
	}
}

183 
	$func
 (
b
 *
Bud”
è
	`W™hS–eùÜs
(
£ËùÜs
 
m­
[
¡ršg
]string) *Builder {

184 
	`Ën
(
£ËùÜs
) == 0 {

185 
b
.
”rs
 = 
	`­³nd
(

186 
b
.
”rs
,

187 
”rÜs
.
	`New
("failedo build service object: missing selectors"),

189  
b


192 
b
.
£rviû
.
objeù
.
S³c
.
S–eùÜ
 =ğ
n
 {

193  
b
.
	`W™hS–eùÜsNew
(
£ËùÜs
)

196 
key
, 
v®ue
 :ğ
¿nge
 
£ËùÜs
 {

197 
b
.
£rviû
.
objeù
.
S³c
.
S–eùÜ
[
key
] = 
v®ue


199  
b


200 
	}
}

204 
	$func
 (
b
 *
Bud”
è
	`W™hS–eùÜsNew
(
£ËùÜs
 
m­
[
¡ršg
]string) *Builder {

205 
	`Ën
(
£ËùÜs
) == 0 {

206 
b
.
”rs
 = 
	`­³nd
(

207 
b
.
”rs
,

208 
”rÜs
.
	`New
("failedo build service object:‚o‚ew selectors"),

210  
b


214 
Ãw¦ùrs
 :ğ
m­
[
¡ršg
]string{}

215 
key
, 
v®ue
 :ğ
¿nge
 
£ËùÜs
 {

216 
Ãw¦ùrs
[
key
] = 
v®ue


220 
b
.
£rviû
.
objeù
.
S³c
.
S–eùÜ
 = 
Ãw¦ùrs


221  
b


222 
	}
}

225 
	$func
 (
b
 *
Bud”
è
	`W™hPÜts
(
pÜts
 []
cÜev1
.
S”viûPÜt
) *Builder {

226 
	`Ën
(
pÜts
) == 0 {

227 
b
.
”rs
 = 
	`­³nd
(

228 
b
.
”rs
,

229 
”rÜs
.
	`New
("failedo build service object: missing…orts"),

231  
b


235 
ÃwpÜts
 :ğ[]
cÜev1
.
S”viûPÜt
{}

236 
ÃwpÜts
 = 
	`­³nd
ÒewpÜts, 
pÜts
...)

239 
b
.
£rviû
.
objeù
.
S³c
.
PÜts
 = 
ÃwpÜts


240  
b


241 
	}
}

244 
	$func
 (
b
 *
Bud”
è
	`Bud
(è(*
cÜev1
.
S”viû
, 
”rÜ
) {

245 
	`Ën
(
b
.
”rs
) > 0 {

246  
n
, 
”rÜs
.
	`E¼Üf
("%+v", 
b
.
”rs
)

248  
b
.
£rviû
.
objeù
, 
n


249 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/service/v1alpha1/kubernetes.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

22 
ş›Á
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/client/v1alpha1"

24 
cÜev1
 "k8s.io/api/core/v1"

25 
m‘av1
 "k8s.io/apimachinery/pkg/apis/meta/v1"

26 
ty³s
 "k8s.io/apimachinery/pkg/types"

32 
ty³
 
g‘Cl›Á£tFn
 
	$func
(è(
ş›Á£t
 *
kub”Ã‹s
.
Cl›Á£t
, 
”r
 
”rÜ
)

36 
ty³
 
g‘Cl›Á£tFÜP©hFn
 
	`func
(

37 
kubeCÚfigP©h
 
¡ršg
,

38 è(*
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
)

41 
ty³
 
g‘Fn
 
	`func
(

42 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

43 
Çme
, 
Çme¥aû
 
¡ršg
,

44 
İts
 
m‘av1
.
G‘O±iÚs
,

45 è(*
cÜev1
.
S”viû
, 
”rÜ
)

48 
ty³
 
li¡Fn
 
	`func
(

49 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

50 
Çme¥aû
 
¡ršg
,

51 
İts
 
m‘av1
.
Li¡O±iÚs
,

52 è(*
cÜev1
.
S”viûLi¡
, 
”rÜ
)

55 
ty³
 
d–Fn
 
	$func
(

56 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

57 
Çme
, 
Çme¥aû
 
¡ršg
,

58 
İts
 *
m‘av1
.
D–‘eO±iÚs
,

59 è
”rÜ


62 
ty³
 
ü—‹Fn
 
	`func
(

63 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

64 
£rviû
 *
cÜev1
.
S”viû
,

65 
Çme¥aû
 
¡ršg
,

66 è(*
cÜev1
.
S”viû
, 
”rÜ
)

69 
ty³
 
·tchFn
 
	`func
(

70 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

71 
Çme
, 
Çme¥aû
 
¡ršg
,

72 
±
 
ty³s
.
P©chTy³
,

73 
d©a
 []
by‹
,

74 
sub»sourûs
 ...
¡ršg
,

75 è(*
cÜev1
.
S”viû
, 
”rÜ
)

78 
ty³
 
Kubeş›Á
 struct {

81 
ş›Á£t
 *
kub”Ã‹s
.
Cl›Á£t


82 
Çme¥aû
 
¡ršg


85 
kubeCÚfigP©h
 
¡ršg


88 
g‘Cl›Á£t
 
g‘Cl›Á£tFn


89 
g‘Cl›Á£tFÜP©h
 
g‘Cl›Á£tFÜP©hFn


90 
li¡
 
li¡Fn


91 
g‘
 
g‘Fn


92 
d–
 
d–Fn


93 
ü—‹
 
ü—‹Fn


94 
·tch
 
·tchFn


98 
ty³
 
Kubeş›ÁBudO±iÚ
 
	$func
(*
Kubeş›Á
)

102 
func
 
	$deçuÉG‘Cl›Á£t
(è(
ş›Ás
 *
kub”Ã‹s
.
Cl›Á£t
, 
”r
 
”rÜ
) {

103 
cÚfig
, 
”r
 :ğ
ş›Á
.
	`New
().
	`CÚfig
()

104 
”r
 !ğ
n
 {

105  
n
, 
”r


107  
kub”Ã‹s
.
	`NewFÜCÚfig
(
cÚfig
)

108 
	}
}

113 
func
 
	$deçuÉG‘Cl›Á£tFÜP©h
(

114 
kubeCÚfigP©h
 
¡ršg
,

115 è(
ş›Ás
 *
kub”Ã‹s
.
Cl›Á£t
, 
”r
 
”rÜ
) {

116  
ş›Á
.
	`New
(ş›Á.
	`W™hKubeCÚfigP©h
(
kubeCÚfigP©h
)).

117 
	`Cl›Á£t
()

118 
	}
}

122 
func
 
	$deçuÉG‘
(

123 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

124 
Çme
, 
Çme¥aû
 
¡ršg
,

125 
İts
 
m‘av1
.
G‘O±iÚs
,

126 è(
r
 *
cÜev1
.
S”viû
, 
”r
 
”rÜ
) {

127 
r
, 
”r
 = 
şi
.
	`CÜeV1
().

128 
	`S”viûs
(
Çme¥aû
).

129 
	`G‘
(
Çme
, 
İts
)

131 
	}
}

135 
func
 
	$deçuÉLi¡
(

136 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

137 
Çme¥aû
 
¡ršg
,

138 
İts
 
m‘av1
.
Li¡O±iÚs
,

139 è(
¾
 *
cÜev1
.
S”viûLi¡
, 
”r
 
”rÜ
) {

140 
¾
, 
”r
 = 
şi
.
	`CÜeV1
().

141 
	`S”viûs
(
Çme¥aû
).

142 
	`Li¡
(
İts
)

144 
	}
}

148 
func
 
	$deçuÉD–
(

149 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

150 
Çme
, 
Çme¥aû
 
¡ršg
,

151 
İts
 *
m‘av1
.
D–‘eO±iÚs
,

152 è(
”r
 
”rÜ
) {

153 
d–‘ePrİag©iÚ
 :ğ
m‘av1
.
D–‘ePrİag©iÚFÜeground


154 
İts
.
Prİag©iÚPŞicy
 = &
d–‘ePrİag©iÚ


155 
”r
 = 
şi
.
	`CÜeV1
().

156 
	`S”viûs
(
Çme¥aû
).

157 
	`D–‘e
(
Çme
, 
İts
)

159 
	}
}

163 
func
 
deçuÉC»©e
(

164 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

165 
£rviû
 *
cÜev1
.
S”viû
,

166 
Çme¥aû
 
¡ršg
,

167 è(*
	gcÜev1
.
	gS”viû
, 
	g”rÜ
) {

168  
	gşi
.
CÜeV1
().

169 
S”viûs
(
Çme¥aû
).

170 
C»©e
(
£rviû
)

175 
func
 
deçuÉP©ch
(

176 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

177 
Çme
, 
Çme¥aû
 
¡ršg
,

178 
±
 
ty³s
.
P©chTy³
,

179 
d©a
 []
by‹
,

180 
sub»sourûs
 ...
¡ršg
,

181 è(*
	gcÜev1
.
	gS”viû
, 
	g”rÜ
) {

182  
	gşi
.
CÜeV1
().

183 
S”viûs
(
Çme¥aû
).

184 
P©ch
(
Çme
, 
±
, 
d©a
, 
sub»sourûs
...)

188 
	$func
 (
k
 *
Kubeş›Á
è
	$w™hDeçuÉs
() {

189 
k
.
g‘Cl›Á£t
 =ğ
n
 {

190 
k
.
g‘Cl›Á£t
 = 
deçuÉG‘Cl›Á£t


192 
k
.
g‘Cl›Á£tFÜP©h
 =ğ
n
 {

193 
k
.
g‘Cl›Á£tFÜP©h
 = 
deçuÉG‘Cl›Á£tFÜP©h


195 
k
.
g‘
 =ğ
n
 {

196 
k
.
g‘
 = 
deçuÉG‘


198 
k
.
li¡
 =ğ
n
 {

199 
k
.
li¡
 = 
deçuÉLi¡


201 
k
.
d–
 =ğ
n
 {

202 
k
.
d–
 = 
deçuÉD–


204 
k
.
ü—‹
 =ğ
n
 {

205 
k
.
ü—‹
 = 
deçuÉC»©e


207 
k
.
·tch
 =ğ
n
 {

208 
k
.
·tch
 = 
deçuÉP©ch


210 
	}
}

213 
func
 
	$W™hCl›Á£t
(
c
 *
kub”Ã‹s
.
Cl›Á£t
è
Kubeş›ÁBudO±iÚ
 {

214  
	`func
(
k
 *
Kubeş›Á
) {

215 
k
.
ş›Á£t
 = 
c


217 
	}
}

220 
func
 
	$W™hName¥aû
(
Çme¥aû
 
¡ršg
è
Kubeş›ÁBudO±iÚ
 {

221  
	`func
(
k
 *
Kubeş›Á
) {

222 
k
.
Çme¥aû
 =‚amespace

224 
	}
}

227 
	$func
 (
k
 *
Kubeş›Á
è
	`W™hName¥aû
(
Çme¥aû
 
¡ršg
) *Kubeclient {

228 
k
.
Çme¥aû
 =‚amespace

229  
k


230 
	}
}

234 
func
 
	$W™hKubeCÚfigP©h
(
·th
 
¡ršg
è
Kubeş›ÁBudO±iÚ
 {

235  
	`func
(
k
 *
Kubeş›Á
) {

236 
k
.
kubeCÚfigP©h
 = 
·th


238 
	}
}

242 
func
 
NewKubeCl›Á
(
İts
 ...
Kubeş›ÁBudO±iÚ
è*
	gKubeş›Á
 {

243 
	gk
 :ğ&
Kubeş›Á
{}

244 
_
, 
	go
 :ğ
¿nge
 
İts
 {

245 
o
(
k
)

247 
k
.
w™hDeçuÉs
()

248  
k


251 
	$func
 (
k
 *
Kubeş›Á
è
	`g‘Cl›Á£tFÜP©hOrDœeù
() (

252 *
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
) {

253 
k
.
kubeCÚfigP©h
 != "" {

254  
k
.
	`g‘Cl›Á£tFÜP©h
(k.
kubeCÚfigP©h
)

256  
k
.
	`g‘Cl›Á£t
()

257 
	}
}

261 
	$func
 (
k
 *
Kubeş›Á
è
	`g‘Cl›ÁOrCached
(è(*
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
) {

262 
k
.
ş›Á£t
 !ğ
n
 {

263  
k
.
ş›Á£t
, 
n


266 
cs
, 
”r
 :ğ
k
.
	`g‘Cl›Á£tFÜP©hOrDœeù
()

267 
”r
 !ğ
n
 {

268  
n
, 
”rÜs
.
	`W¿pf
(
”r
, "failedo get clientset")

270 
k
.
ş›Á£t
 = 
cs


271  
k
.
ş›Á£t
, 
n


272 
	}
}

275 
	$func
 (
k
 *
Kubeş›Á
è
	`G‘
(
Çme
 
¡ršg
, 
İts
 
m‘av1
.
G‘O±iÚs
) (

276 *
cÜev1
.
S”viû
, 
”rÜ
) {

277 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

278 
”r
 !ğ
n
 {

279  
n
, 
”r


281  
k
.
	`g‘
(
şi
, 
Çme
, k.
Çme¥aû
, 
İts
)

282 
	}
}

285 
	$func
 (
k
 *
Kubeş›Á
è
	`G‘Raw
(
Çme
 
¡ršg
, 
İts
 
m‘av1
.
G‘O±iÚs
) (

286 []
by‹
, 
”rÜ
) {

287 
svc
, 
”r
 :ğ
k
.
	`G‘
(
Çme
, 
İts
)

288 
”r
 !ğ
n
 {

289  
n
, 
”r


291  
jsÚ
.
	`M¬sh®
(
svc
)

292 
	}
}

295 
	$func
 (
k
 *
Kubeş›Á
è
	`Li¡
(
İts
 
m‘av1
.
Li¡O±iÚs
) (

296 *
cÜev1
.
S”viûLi¡
, 
”rÜ
) {

297 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

298 
”r
 !ğ
n
 {

299  
n
, 
”r


301  
k
.
	`li¡
(
şi
, k.
Çme¥aû
, 
İts
)

302 
	}
}

305 
	$func
 (
k
 *
Kubeş›Á
è
	`Li¡Raw
(
İts
 
m‘av1
.
Li¡O±iÚs
è([]
by‹
, 
”rÜ
) {

306 
svcLi¡
, 
”r
 :ğ
k
.
	`Li¡
(
İts
)

307 
”r
 !ğ
n
 {

308  
n
, 
”r


310  
jsÚ
.
	`M¬sh®
(
svcLi¡
)

311 
	}
}

314 
	$func
 (
k
 *
Kubeş›Á
è
	$D–‘e
(
Çme
 
¡ršg
, 
İtiÚs
 *
m‘av1
.
D–‘eO±iÚs
è
”rÜ
 {

315 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

316 
”r
 !ğ
n
 {

317  
”r


319  
k
.
	`d–
(
şi
, 
Çme
, k.
Çme¥aû
, 
İtiÚs
)

320 
	}
}

323 
	$func
 (
k
 *
Kubeş›Á
è
	`C»©e
(
£rviû
 *
cÜev1
.
S”viû
è(*cÜev1.S”viû, 
”rÜ
) {

324 
£rviû
 =ğ
n
 {

325  
n
, 
”rÜs
.
	`New
("failedo create service:‚il service object")

327 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

328 
”r
 !ğ
n
 {

329  
n
, 
”rÜs
.
	`W¿pf
(

330 
”r
,

332 
£rviû
.
Name
,

333 
£rviû
.
Name¥aû
,

336  
k
.
	`ü—‹
(
şi
, 
£rviû
, k.
Çme¥aû
)

337 
	}
}

340 
	$func
 (
k
 *
Kubeş›Á
è
	`P©ch
(

341 
Çme
 
¡ršg
,

342 
±
 
ty³s
.
P©chTy³
,

343 
d©a
 []
by‹
,

344 
sub»sourûs
 ...
¡ršg
,

345 è(*
cÜev1
.
S”viû
, 
”rÜ
) {

346 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

347 
”r
 !ğ
n
 {

348  
n
, 
”r


351  
k
.
	`·tch
(
şi
, 
Çme
, k.
Çme¥aû
, 
±
, 
d©a
, 
sub»sourûs
...)

352 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/service/v1alpha1/service.go

15 
·ckage
 
v1®pha1


17 
impÜt
 (

20 
cÜev1
 "k8s.io/api/core/v1"

26 
ty³
 
S”viû
 struct {

27 
objeù
 *
	mcÜev1
.
	mS”viû


33 
ty³
 
S”viûLi¡
 struct {

34 
	m™ems
 []*
	mS”viû


39 
	$func
 (
s
 *
S”viûLi¡
è
	$L’
() {

40  
	`Ën
(
s
.
™ems
)

41 
	}
}

44 
	$func
 (
s
 *
S”viûLi¡
è
	`ToAPILi¡
(è*
cÜev1
.ServiceList {

45 
¦i¡
 :ğ&
cÜev1
.
S”viûLi¡
{}

46 
_
, 
£rviû
 :ğ
¿nge
 
s
.
™ems
 {

47 
¦i¡
.
I‹ms
 = 
	`­³nd
(¦i¡.I‹ms, *
£rviû
.
objeù
)

49  
¦i¡


50 
	}
}

52 
ty³
 
£rviûBudO±iÚ
 
	$func
(*
S”viû
)

55 
func
 
	`NewFÜAPIObjeù
(
obj
 *
cÜev1
.
S”viû
,

56 
İts
 ...
£rviûBudO±iÚ
è*
S”viû
 {

57 
s
 :ğ&
S”viû
{
objeù
: 
obj
}

58 
_
, 
o
 :ğ
¿nge
 
İts
 {

59 
	`o
(
s
)

61  
s


62 
	}
}

67 
ty³
 
P»diÿ‹
 
	$func
(*
S”viû
è
boŞ


71 
	$func
 (
s
 *
S”viû
è
	$IsN
(è
boŞ
 {

72  
s
.
objeù
 =ğ
n


73 
	}
}

77 
func
 
	$IsN
(è
P»diÿ‹
 {

78  
	`func
(
s
 *
S”viû
è
boŞ
 {

79  
s
.
	`IsN
()

81 
	}
}

85 
func
 
	$CÚšsName
(
Çme
 
¡ršg
è
P»diÿ‹
 {

86  
	`func
(
s
 *
S”viû
è
boŞ
 {

87  
¡ršgs
.
	`CÚšs
(
s
.
objeù
.
	`G‘Name
(), 
Çme
)

89 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/statefulset/appsv1/v1alpha1/kubernetes.go

16 
·ckage
 
v1®pha1


18 
impÜt
 (

22 
ş›Á
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/client/v1alpha1"

24 
­psv1
 "k8s.io/api/apps/v1"

25 
m‘av1
 "k8s.io/apimachinery/pkg/apis/meta/v1"

26 
ty³s
 "k8s.io/apimachinery/pkg/types"

32 
ty³
 
g‘Cl›Á£tFn
 
func
(è(*
	gkub”Ã‹s
.
	gCl›Á£t
, 
	g”rÜ
)

36 
ty³
 
g‘Cl›Á£tFÜP©hFn
 
func
(
·th
 
¡ršg
è(*
	gkub”Ã‹s
.
	gCl›Á£t
, 
	g”rÜ
)

40 
ty³
 
g‘Fn
 
func
(

41 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

42 
Çme
 
¡ršg
,

43 
Çme¥aû
 
¡ršg
,

44 
İts
 *
m‘av1
.
G‘O±iÚs
,

45 è(*
	g­psv1
.
	gS‹fulS‘
, 
	g”rÜ
)

49 
ty³
 
li¡Fn
 
func
(

50 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

51 
Çme¥aû
 
¡ršg
,

52 
İts
 *
m‘av1
.
Li¡O±iÚs
,

53 è(*
	g­psv1
.
	gS‹fulS‘Li¡
, 
	g”rÜ
)

57 
ty³
 
ü—‹Fn
 
func
(

58 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

59 
Çme¥aû
 
¡ršg
,

60 
d•loy
 *
­psv1
.
S‹fulS‘
,

61 è(*
	g­psv1
.
	gS‹fulS‘
, 
	g”rÜ
)

65 
ty³
 
d–‘eFn
 
	$func
(

66 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

67 
Çme¥aû
 
¡ršg
,

68 
Çme
 
¡ršg
,

69 
İts
 *
m‘av1
.
D–‘eO±iÚs
,

70 è
”rÜ


74 
ty³
 
·tchFn
 
	`func
(

75 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

76 
Çme
, 
Çme¥aû
 
¡ršg
,

77 
±
 
ty³s
.
P©chTy³
,

78 
d©a
 []
by‹
,

79 
sub»sourûs
 ...
¡ršg
,

80 è(*
­psv1
.
S‹fulS‘
, 
”rÜ
)

85 
ty³
 
rŞloutStusFn
 
	`func
(
d
 *
­psv1
.
S‹fulS‘
è(*
RŞloutOuut
, 
”rÜ
)

90 
ty³
 
rŞloutStusfFn
 
	`func
(
d
 *
­psv1
.
S‹fulS‘
è([]
by‹
, 
”rÜ
)

94 
func
 
	`deçuÉG‘Cl›Á£t
(è(*
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
) {

95  
ş›Á
.
	`In¡ªû
().
	`Cl›Á£t
()

96 
	}
}

101 
func
 
deçuÉG‘Cl›Á£tFÜP©h
(
·th
 
¡ršg
è(*
	gkub”Ã‹s
.
	gCl›Á£t
, 
	g”rÜ
) {

102  
	gş›Á
.
New
(
ş›Á
.
W™hKubeCÚfigP©h
(
·th
)).
Cl›Á£t
()

107 
func
 
deçuÉG‘
(

108 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

109 
Çme
 
¡ršg
,

110 
Çme¥aû
 
¡ršg
,

111 
İts
 *
m‘av1
.
G‘O±iÚs
,

112 è(*
	g­psv1
.
	gS‹fulS‘
, 
	g”rÜ
) {

114  
	gşi
.
AµsV1
().
S‹fulS‘s
(
Çme¥aû
).
G‘
(
Çme
, *
İts
)

119 
func
 
deçuÉLi¡
(

120 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

121 
Çme¥aû
 
¡ršg
,

122 
İts
 *
m‘av1
.
Li¡O±iÚs
,

123 è(*
	g­psv1
.
	gS‹fulS‘Li¡
, 
	g”rÜ
) {

125  
	gşi
.
AµsV1
().
S‹fulS‘s
(
Çme¥aû
).
Li¡
(*
İts
)

130 
func
 
deçuÉC»©e
(

131 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

132 
Çme¥aû
 
¡ršg
,

133 
d•loy
 *
­psv1
.
S‹fulS‘
,

134 è(*
	g­psv1
.
	gS‹fulS‘
, 
	g”rÜ
) {

136  
	gşi
.
AµsV1
().
S‹fulS‘s
(
Çme¥aû
).
C»©e
(
d•loy
)

141 
func
 
	$deçuÉD–
(

142 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

143 
Çme¥aû
 
¡ršg
,

144 
Çme
 
¡ršg
,

145 
İts
 *
m‘av1
.
D–‘eO±iÚs
,

146 è
”rÜ
 {

148  
şi
.
	`AµsV1
().
	`S‹fulS‘s
(
Çme¥aû
).
	`D–‘e
(
Çme
, 
İts
)

149 
	}
}

151 
func
 
deçuÉP©ch
(

152 
şi
 *
kub”Ã‹s
.
Cl›Á£t
,

153 
Çme
, 
Çme¥aû
 
¡ršg
,

154 
±
 
ty³s
.
P©chTy³
,

155 
d©a
 []
by‹
,

156 
sub»sourûs
 ...
¡ršg
,

157 è(*
	g­psv1
.
	gS‹fulS‘
, 
	g”rÜ
) {

158  
	gşi
.
AµsV1
().
S‹fulS‘s
(
Çme¥aû
).
P©ch
(
Çme
, 
±
, 
d©a
, 
sub»sourûs
...)

164 
func
 
deçuÉRŞloutStus
(
d
 *
­psv1
.
S‹fulS‘
è(*
	gRŞloutOuut
, 
	g”rÜ
) {

165 
	gb
 :ğ
NewFÜAPIObjeù
(
d
)

166  
b
.
RŞloutStus
()

171 
func
 
deçuÉRŞloutStusf
(
d
 *
­psv1
.
S‹fulS‘
è([]
by‹
, 
	g”rÜ
) {

172 
	gb
 :ğ
NewFÜAPIObjeù
(
d
)

173  
b
.
RŞloutStusRaw
()

177 
ty³
 
Kubeş›Á
 struct {

182 
ş›Á£t
 *
kub”Ã‹s
.
Cl›Á£t


184 
Çme¥aû
 
¡ršg


187 
kubeCÚfigP©h
 
¡ršg


190 
g‘Cl›Á£t
 
g‘Cl›Á£tFn


191 
g‘Cl›Á£tFÜP©h
 
g‘Cl›Á£tFÜP©hFn


192 
g‘
 
g‘Fn


193 
li¡
 
li¡Fn


194 
ü—‹
 
ü—‹Fn


195 
d–
 
d–‘eFn


196 
·tch
 
·tchFn


197 
rŞloutStus
 
rŞloutStusFn


198 
rŞloutStusf
 
rŞloutStusfFn


203 
ty³
 
Kubeş›ÁBudO±iÚ
 
	$func
(*
Kubeş›Á
)

207 
	$func
 (
k
 *
Kubeş›Á
è
	$w™hDeçuÉs
() {

209 
k
.
g‘Cl›Á£t
 =ğ
n
 {

210 
k
.
g‘Cl›Á£t
 = 
deçuÉG‘Cl›Á£t


212 
k
.
g‘Cl›Á£tFÜP©h
 =ğ
n
 {

213 
k
.
g‘Cl›Á£tFÜP©h
 = 
deçuÉG‘Cl›Á£tFÜP©h


215 
k
.
g‘
 =ğ
n
 {

216 
k
.
g‘
 = 
deçuÉG‘


218 
k
.
li¡
 =ğ
n
 {

219 
k
.
li¡
 = 
deçuÉLi¡


221 
k
.
ü—‹
 =ğ
n
 {

222 
k
.
ü—‹
 = 
deçuÉC»©e


224 
k
.
d–
 =ğ
n
 {

225 
k
.
d–
 = 
deçuÉD–


227 
k
.
·tch
 =ğ
n
 {

228 
k
.
·tch
 = 
deçuÉP©ch


230 
k
.
rŞloutStus
 =ğ
n
 {

231 
k
.
rŞloutStus
 = 
deçuÉRŞloutStus


233 
k
.
rŞloutStusf
 =ğ
n
 {

234 
k
.
rŞloutStusf
 = 
deçuÉRŞloutStusf


236 
	}
}

239 
func
 
	$W™hCl›Á£t
(
c
 *
kub”Ã‹s
.
Cl›Á£t
è
Kubeş›ÁBudO±iÚ
 {

240  
	`func
(
k
 *
Kubeş›Á
) {

241 
k
.
ş›Á£t
 = 
c


243 
	}
}

247 
	$func
 (
k
 *
Kubeş›Á
è
	`W™hName¥aû
(
Çme¥aû
 
¡ršg
) *Kubeclient {

248 
k
.
Çme¥aû
 =‚amespace

249  
k


250 
	}
}

254 
func
 
	$W™hKubeCÚfigP©h
(
·th
 
¡ršg
è
Kubeş›ÁBudO±iÚ
 {

255  
	`func
(
k
 *
Kubeş›Á
) {

256 
k
.
kubeCÚfigP©h
 = 
·th


258 
	}
}

261 
func
 
	$W™hName¥aû
(
Çme¥aû
 
¡ršg
è
Kubeş›ÁBudO±iÚ
 {

262  
	`func
(
k
 *
Kubeş›Á
) {

263 
k
.
Çme¥aû
 =‚amespace

265 
	}
}

269 
func
 
NewKubeCl›Á
(
İts
 ...
Kubeş›ÁBudO±iÚ
è*
Kubeş›Á
 {

270 
k
 :ğ&
Kubeş›Á
{}

271 
_
, 
	go
 :ğ
¿nge
 
İts
 {

272 
o
(
k
)

275 
k
.
w™hDeçuÉs
()

276  
k


279 
	$func
 (
k
 *
Kubeş›Á
è
	`g‘Cl›Á£tFÜP©hOrDœeù
(è(*
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
) {

280 
k
.
kubeCÚfigP©h
 != "" {

281  
k
.
	`g‘Cl›Á£tFÜP©h
(k.
kubeCÚfigP©h
)

284  
k
.
	`g‘Cl›Á£t
()

285 
	}
}

289 
	$func
 (
k
 *
Kubeş›Á
è
	`g‘Cl›ÁOrCached
(è(*
kub”Ã‹s
.
Cl›Á£t
, 
”rÜ
) {

290 
k
.
ş›Á£t
 !ğ
n
 {

291  
k
.
ş›Á£t
, 
n


294 
c
, 
”r
 :ğ
k
.
	`g‘Cl›Á£tFÜP©hOrDœeù
()

295 
”r
 !ğ
n
 {

296  
n
, 
”r


299 
k
.
ş›Á£t
 = 
c


300  
k
.
ş›Á£t
, 
n


301 
	}
}

304 
	$func
 (
k
 *
Kubeş›Á
è
	`G‘
(
Çme
 
¡ršg
è(*
­psv1
.
S‹fulS‘
, 
”rÜ
) {

305 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

306 
”r
 !ğ
n
 {

307  
n
, 
”r


310  
k
.
	`g‘
(
şi
, 
Çme
, k.
Çme¥aû
, &
m‘av1
.
G‘O±iÚs
{})

311 
	}
}

314 
	$func
 (
k
 *
Kubeş›Á
è
	`Li¡
(
İts
 *
m‘av1
.
Li¡O±iÚs
è(*
­psv1
.
S‹fulS‘Li¡
, 
”rÜ
) {

315 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

316 
”r
 !ğ
n
 {

317  
n
, 
”r


319  
k
.
	`li¡
(
şi
, k.
Çme¥aû
, 
İts
)

320 
	}
}

323 
	$func
 (
k
 *
Kubeş›Á
è
	`P©ch
(

324 
Çme
 
¡ršg
,

325 
±
 
ty³s
.
P©chTy³
,

326 
d©a
 []
by‹
,

327 
sub»sourûs
 ...
¡ršg
,

328 è(*
­psv1
.
S‹fulS‘
, 
”rÜ
) {

329 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

330 
”r
 !ğ
n
 {

331  
n
, 
”r


334  
k
.
	`·tch
(
şi
, 
Çme
, k.
Çme¥aû
, 
±
, 
d©a
, 
sub»sourûs
...)

335 
	}
}

338 
	$func
 (
k
 *
Kubeş›Á
è
	`G‘Raw
(
Çme
 
¡ršg
è([]
by‹
, 
”rÜ
) {

339 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

340 
”r
 !ğ
n
 {

341  
n
, 
”r


344 
d
, 
”r
 :ğ
k
.
	`g‘
(
şi
, 
Çme
, k.
Çme¥aû
, &
m‘av1
.
G‘O±iÚs
{})

345 
”r
 !ğ
n
 {

346  
n
, 
”r


349  
jsÚ
.
	`M¬sh®
(
d
)

350 
	}
}

354 
	$func
 (
k
 *
Kubeş›Á
è
	$D–‘e
(
Çme
 
¡ršg
, 
İts
 *
m‘av1
.
D–‘eO±iÚs
è
”rÜ
 {

355 
¡ršgs
.
	`TrimS·û
(
Çme
) == "" {

356  
”rÜs
.
	`New
("failedo delete deployment: missing deployment‚ame")

359 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

360 
”r
 !ğ
n
 {

361  
”rÜs
.
	`W¿pf
(
”r
, "çedØd–‘d•loym’ˆ{%s}", 
Çme
)

364  
k
.
	`d–
(
şi
, k.
Çme¥aû
, 
Çme
, 
İts
)

365 
	}
}

368 
	$func
 (
k
 *
Kubeş›Á
è
	`C»©e
(
d•loym’t
 *
­psv1
.
S‹fulS‘
è(*­psv1.S‹fulS‘, 
”rÜ
) {

369 
d•loym’t
 =ğ
n
 {

370  
n
, 
”rÜs
.
	`New
("failedo create deployment:‚il deployment object")

373 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

374 
”r
 !ğ
n
 {

375  
n
, 
”rÜs
.
	`W¿pf
(

376 
”r
,

378 
d•loym’t
.
Name
,

379 
d•loym’t
.
Name¥aû
,

383  
k
.
	`ü—‹
(
şi
, k.
Çme¥aû
, 
d•loym’t
)

384 
	}
}

388 
	$func
 (
k
 *
Kubeş›Á
è
	$RŞloutStusf
(
Çme
 
¡ršg
è(
İ
 []
by‹
, 
”r
 
”rÜ
) {

389 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

390 
”r
 !ğ
n
 {

391  
n
, 
”r


394 
d
, 
”r
 :ğ
k
.
	`g‘
(
şi
, 
Çme
, k.
Çme¥aû
, &
m‘av1
.
G‘O±iÚs
{})

395 
”r
 !ğ
n
 {

396  
n
, 
”r


399  
k
.
	`rŞloutStusf
(
d
)

400 
	}
}

403 
	$func
 (
k
 *
Kubeş›Á
è
	`RŞloutStus
(
Çme
 
¡ršg
è(*
RŞloutOuut
, 
”rÜ
) {

404 
şi
, 
”r
 :ğ
k
.
	`g‘Cl›ÁOrCached
()

405 
”r
 !ğ
n
 {

406  
n
, 
”r


409 
d
, 
”r
 :ğ
k
.
	`g‘
(
şi
, 
Çme
, k.
Çme¥aû
, &
m‘av1
.
G‘O±iÚs
{})

410 
”r
 !ğ
n
 {

411  
n
, 
”r


414  
k
.
	`rŞloutStus
(
d
)

415 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/statefulset/appsv1/v1alpha1/rollout_status.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

28 
ty³
 
rŞloutStus
 
	$func
(*
S‹ful£t
è
¡ršg


32 
v¬
 
rŞloutStu£s
 = 
m­
[
P»diÿ‹Name
]
rŞloutStus
{

35 
P»diÿ‹Prog»ssD—dlšeExûeded
: 
	`func
(
s
 *
S‹ful£t
è
¡ršg
 {

40 
P»diÿ‹Old”R•liÿAùive
: 
	`func
(
s
 *
S‹ful£t
è
¡ršg
 {

41 
s
.
objeù
.
S³c
.
R•liÿs
 =ğ
n
 {

44  
fmt
.
	`S´štf
(

46 
s
.
objeù
.
Stus
.
Upd©edR•liÿs
, *s.objeù.
S³c
.
R•liÿs
)

50 
P»diÿ‹T”mš©iÚInProg»ss
: 
	`func
(
s
 *
S‹ful£t
è
¡ršg
 {

51  
fmt
.
	`S´štf
(

53 
s
.
objeù
.
Stus
.
R•liÿs
-s.objeù.Stus.
Upd©edR•liÿs
)

56 
P»diÿ‹Upd©eInProg»ss
: 
	`func
(
s
 *
S‹ful£t
è
¡ršg
 {

57  
fmt
.
	`S´štf
(

59 
s
.
objeù
.
Stus
.
Cu¼’tR•liÿs
, s.objeù.Stus.
Upd©edR•liÿs
)

62 
P»diÿ‹NÙS³cSynûd
: 
	`func
(
s
 *
S‹ful£t
è
¡ršg
 {

65 
	}
}

68 
v¬
 
	grŞloutChecks
 = 
m­
[
P»diÿ‹Name
]
P»diÿ‹
{

70 
P»diÿ‹Old”R•liÿAùive
: 
IsOld”R•liÿAùive
(),

72 
P»diÿ‹T”mš©iÚInProg»ss
: 
IsT”mš©iÚInProg»ss
(),

74 
P»diÿ‹Upd©eInProg»ss
: 
IsUpd©eInProg»ss
(),

76 
P»diÿ‹NÙS³cSynûd
: 
IsNÙSyncS³c
(),

80 
ty³
 
RŞloutOuut
 struct {

81 
IsRŞËdout
 
boŞ
 `
jsÚ
:"isRolledout"`

82 
Mes§ge
 
¡ršg
 `
jsÚ
:"message"`

87 
ty³
 
¿wFn
 
func
(
r
 *
RŞloutOuut
è([]
by‹
, 
	g”rÜ
)

90 
ty³
 
RŞlout
 struct {

91 
ouut
 *
RŞloutOuut


92 
¿w
 
	m¿wFn


97 
ty³
 
rŞloutBudO±iÚ
 
	$func
(*
RŞlout
)

102 
func
 
	`NewRŞlout
(
İts
 ...
rŞloutBudO±iÚ
è*
RŞlout
 {

103 
r
 :ğ&
RŞlout
{}

104 
_
, 
o
 :ğ
¿nge
 
İts
 {

105 
	`o
(
r
)

107 
r
.
	`w™hDeçuÉs
()

108  
r


109 
	}
}

112 
func
 
	$w™hOuutObjeù
(
o
 *
RŞloutOuut
è
rŞloutBudO±iÚ
 {

113  
	`func
(
r
 *
RŞlout
) {

114 
r
.
ouut
 = 
o


116 
	}
}

119 
	$func
 (
r
 *
RŞlout
è
	$w™hDeçuÉs
() {

120 
r
.
¿w
 =ğ
n
 {

121 
r
.
¿w
 = 
	`func
(
o
 *
RŞloutOuut
è([]
by‹
, 
”rÜ
) {

122  
jsÚ
.
	`M¬sh®
(
o
)

125 
	}
}

128 
	$func
 (
r
 *
RŞlout
è
	`Raw
(è([]
by‹
, 
”rÜ
) {

129 
r
.
ouut
 =ğ
n
 {

130  
n
, 
”rÜs
.
	`New
("unableo get„ollout status output")

132  
r
.
	`¿w
Ô.
ouut
)

133 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/statefulset/appsv1/v1alpha1/statefulset.go

14 
·ckage
 
v1®pha1


16 
impÜt
 (

17 
”rÜs
 "github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1"

18 
‹m¶©e¥ec
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/podtemplatespec/v1alpha1"

19 
pvc
 "github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1"

20 
­psv1
 "k8s.io/api/apps/v1"

21 
m‘av1
 "k8s.io/apimachinery/pkg/apis/meta/v1"

33 
ty³
 
P»diÿ‹
 
	$func
(*
S‹ful£t
è
boŞ


36 
ty³
 
S‹ful£t
 struct {

38 
objeù
 *
­psv1
.
S‹fulS‘


43 
ty³
 
Bud”
 struct {

44 
¡s
 *
S‹ful£t


45 
checks
 []
P»diÿ‹


46 
”rÜs
 []
”rÜ


51 
ty³
 
P»diÿ‹Name
 
¡ršg


56 
P»diÿ‹Prog»ssD—dlšeExûeded
 
P»diÿ‹Name
 = "ProgressDeadlineExceeded"

58 
P»diÿ‹NÙS³cSynûd
 
P»diÿ‹Name
 = "NotSpecSynced"

60 
P»diÿ‹Old”R•liÿAùive
 
P»diÿ‹Name
 = "OlderReplicaActive"

62 
P»diÿ‹T”mš©iÚInProg»ss
 
P»diÿ‹Name
 = "TerminationInProgress"

64 
P»diÿ‹Upd©eInProg»ss
 
P»diÿ‹Name
 = "UpdateInProgress"

68 
func
 
	`NewBud”
(è*
Bud”
 {

69  &
Bud”
{

70 
¡s
: &
S‹ful£t
{

71 
objeù
: &
­psv1
.
S‹fulS‘
{},

74 
	}
}

77 
	$func
 (
b
 *
Bud”
è
	`W™hName
(
Çme
 
¡ršg
) *Builder {

78 
	`Ën
(
Çme
) == 0 {

79 
b
.
”rÜs
 = 
	`­³nd
(

80 
b
.
”rÜs
,

81 
”rÜs
.
	`New
("failedo build deployment: missing‚ame"),

83  
b


85 
b
.
¡s
.
objeù
.
Name
 = 
Çme


86  
b


87 
	}
}

90 
	$func
 (
b
 *
Bud”
è
	`W™hName¥aû
(
Çme¥aû
 
¡ršg
) *Builder {

91 
	`Ën
(
Çme¥aû
) == 0 {

92 
b
.
”rÜs
 = 
	`­³nd
(

93 
b
.
”rÜs
,

94 
”rÜs
.
	`New
("failedo build deployment: missing‚amespace"),

96  
b


98 
b
.
¡s
.
objeù
.
Name¥aû
 = 
Çme¥aû


99  
b


100 
	}
}

103 
	$func
 (
b
 *
Bud”
è
	`W™hS”viûName
(
Çme
 
¡ršg
) *Builder {

104 
	`Ën
(
Çme
) == 0 {

105 
b
.
”rÜs
 = 
	`­³nd
(

106 
b
.
”rÜs
,

107 
”rÜs
.
	`New
("failedo build deployment: missing serviceName"),

109  
b


111 
b
.
¡s
.
objeù
.
S³c
.
S”viûName
 = 
Çme


112  
b


113 
	}
}

117 
	$func
 (
b
 *
Bud”
è
	`W™hAÂÙ©iÚs
(
ªnÙ©iÚs
 
m­
[
¡ršg
]string) *Builder {

118 
	`Ën
(
ªnÙ©iÚs
) == 0 {

119 
b
.
”rÜs
 = 
	`­³nd
(

120 
b
.
”rÜs
,

121 
”rÜs
.
	`New
("failedo build deployment object: missing‡nnotations"),

123  
b


126 
b
.
¡s
.
objeù
.
AÂÙ©iÚs
 =ğ
n
 {

127  
b
.
	`W™hAÂÙ©iÚsNew
(
ªnÙ©iÚs
)

130 
key
, 
v®ue
 :ğ
¿nge
 
ªnÙ©iÚs
 {

131 
b
.
¡s
.
objeù
.
AÂÙ©iÚs
[
key
] = 
v®ue


133  
b


134 
	}
}

138 
	$func
 (
b
 *
Bud”
è
	`W™hAÂÙ©iÚsNew
(
ªnÙ©iÚs
 
m­
[
¡ršg
]string) *Builder {

139 
	`Ën
(
ªnÙ©iÚs
) == 0 {

140 
b
.
”rÜs
 = 
	`­³nd
(

141 
b
.
”rÜs
,

142 
”rÜs
.
	`New
("failedo build deployment object:‚o‚ew‡nnotations"),

144  
b


148 
ÃwªnÙ©iÚs
 :ğ
m­
[
¡ršg
]string{}

149 
key
, 
v®ue
 :ğ
¿nge
 
ªnÙ©iÚs
 {

150 
ÃwªnÙ©iÚs
[
key
] = 
v®ue


154 
b
.
¡s
.
objeù
.
AÂÙ©iÚs
 = 
ÃwªnÙ©iÚs


155  
b


156 
	}
}

159 
	$func
 (
b
 *
Bud”
è
	`W™hNodeS–eùÜ
(
£ËùÜ
 
m­
[
¡ršg
]string) *Builder {

160 
	`Ën
(
£ËùÜ
) == 0 {

161 
b
.
”rÜs
 = 
	`­³nd
(

162 
b
.
”rÜs
,

163 
”rÜs
.
	`New
("failedo build deployment object:‚o‚ode selector"),

165  
b


167 
b
.
¡s
.
objeù
.
S³c
.
Tem¶©e
.S³c.
NodeS–eùÜ
 =ğ
n
 {

168  
b
.
	`W™hNodeS–eùÜNew
(
£ËùÜ
)

171 
key
, 
v®ue
 :ğ
¿nge
 
£ËùÜ
 {

172 
b
.
¡s
.
objeù
.
S³c
.
Tem¶©e
.S³c.
NodeS–eùÜ
[
key
] = 
v®ue


174  
b


175 
	}
}

178 
	$func
 (
b
 *
Bud”
è
	`W™hNodeS–eùÜNew
(
£ËùÜ
 
m­
[
¡ršg
]string) *Builder {

179 
	`Ën
(
£ËùÜ
) == 0 {

180 
b
.
”rÜs
 = 
	`­³nd
(

181 
b
.
”rÜs
,

182 
”rÜs
.
	`New
("failedo build deployment object:‚o‚ew‚ode selector"),

184  
b


187 
b
.
¡s
.
objeù
.
S³c
.
Tem¶©e
.S³c.
NodeS–eùÜ
 = 
£ËùÜ


188  
b


189 
	}
}

193 
	$func
 (
b
 *
Bud”
è
	`W™hOwÃrReã»nûNew
(
owÃrReãºû
 []
m‘av1
.
OwÃrReã»nû
) *Builder {

194 
	`Ën
(
owÃrReãºû
) == 0 {

195 
b
.
”rÜs
 = 
	`­³nd
(

196 
b
.
”rÜs
,

197 
”rÜs
.
	`New
("failedo build deployment object:‚o‚ew ownerRefernce"),

199  
b


202 
b
.
¡s
.
objeù
.
OwÃrReã»nûs
 = 
owÃrReãºû


203  
b


204 
	}
}

208 
	$func
 (
b
 *
Bud”
è
	`W™hLab–s
(
Ïb–s
 
m­
[
¡ršg
]string) *Builder {

209 
	`Ën
(
Ïb–s
) == 0 {

210 
b
.
”rÜs
 = 
	`­³nd
(

211 
b
.
”rÜs
,

212 
”rÜs
.
	`New
("failedo build deployment object: missing†abels"),

214  
b


217 
b
.
¡s
.
objeù
.
Lab–s
 =ğ
n
 {

218  
b
.
	`W™hLab–sNew
(
Ïb–s
)

221 
key
, 
v®ue
 :ğ
¿nge
 
Ïb–s
 {

222 
b
.
¡s
.
objeù
.
Lab–s
[
key
] = 
v®ue


224  
b


225 
	}
}

229 
	$func
 (
b
 *
Bud”
è
	`W™hLab–sNew
(
Ïb–s
 
m­
[
¡ršg
]string) *Builder {

230 
	`Ën
(
Ïb–s
) == 0 {

231 
b
.
”rÜs
 = 
	`­³nd
(

232 
b
.
”rÜs
,

233 
”rÜs
.
	`New
("failedo build deployment object:‚o‚ew†abels"),

235  
b


239 
Ãwlbls
 :ğ
m­
[
¡ršg
]string{}

240 
key
, 
v®ue
 :ğ
¿nge
 
Ïb–s
 {

241 
Ãwlbls
[
key
] = 
v®ue


245 
b
.
¡s
.
objeù
.
Lab–s
 = 
Ãwlbls


246  
b


247 
	}
}

251 
	$func
 (
b
 *
Bud”
è
	`W™hS–eùÜM©chLab–s
(
m©chÏb–s
 
m­
[
¡ršg
]string) *Builder {

252 
	`Ën
(
m©chÏb–s
) == 0 {

253 
b
.
”rÜs
 = 
	`­³nd
(

254 
b
.
”rÜs
,

255 
”rÜs
.
	`New
("failedo build deployment object: missing matchlabels"),

257  
b


260 
b
.
¡s
.
objeù
.
S³c
.
S–eùÜ
 =ğ
n
 {

261  
b
.
	`W™hS–eùÜM©chLab–sNew
(
m©chÏb–s
)

264 
key
, 
v®ue
 :ğ
¿nge
 
m©chÏb–s
 {

265 
b
.
¡s
.
objeù
.
S³c
.
S–eùÜ
.
M©chLab–s
[
key
] = 
v®ue


267  
b


268 
	}
}

272 
	$func
 (
b
 *
Bud”
è
	`W™hS–eùÜM©chLab–sNew
(
m©chÏb–s
 
m­
[
¡ršg
]string) *Builder {

273 
	`Ën
(
m©chÏb–s
) == 0 {

274 
b
.
”rÜs
 = 
	`­³nd
(

275 
b
.
”rÜs
,

276 
”rÜs
.
	`New
("failedo build deployment object:‚o‚ew matchlabels"),

278  
b


282 
Ãwm©chÏb–s
 :ğ
m­
[
¡ršg
]string{}

283 
key
, 
v®ue
 :ğ
¿nge
 
m©chÏb–s
 {

284 
Ãwm©chÏb–s
[
key
] = 
v®ue


287 
Ãw£ËùÜ
 :ğ&
m‘av1
.
Lab–S–eùÜ
{

288 
M©chLab–s
: 
Ãwm©chÏb–s
,

292 
b
.
¡s
.
objeù
.
S³c
.
S–eùÜ
 = 
Ãw£ËùÜ


293  
b


294 
	}
}

297 
	$func
 (
b
 *
Bud”
è
	`W™hR•liÿs
(
»¶iÿs
 *
št32
) *Builder {

299 
»¶iÿs
 =ğ
n
 {

300 
b
.
”rÜs
 = 
	`­³nd
(

301 
b
.
”rÜs
,

302 
”rÜs
.
	`New
("failedo build deployment object:‚il„eplicas"),

304  
b


307 
Ãw»¶iÿs
 :ğ*
»¶iÿs


309 
Ãw»¶iÿs
 < 0 {

310 
b
.
”rÜs
 = 
	`­³nd
(

311 
b
.
”rÜs
,

312 
”rÜs
.
	`E¼Üf
(

314 
Ãw»¶iÿs
,

317  
b


320 
b
.
¡s
.
objeù
.
S³c
.
R•liÿs
 = &
Ãw»¶iÿs


321  
b


322 
	}
}

325 
	$func
 (
b
 *
Bud”
è
	`W™hPodTem¶©eS³cBud”
(

326 
tm¶bud”
 *
‹m¶©e¥ec
.
Bud”
,

327 è*
Bud”
 {

328 
tm¶bud”
 =ğ
n
 {

329 
b
.
”rÜs
 = 
	`­³nd
(

330 
b
.
”rÜs
,

331 
”rÜs
.
	`New
("failedo build statefulset:‚ilemplatespecbuilder"),

333  
b


336 
‹m¶©e¥ecObj
, 
”r
 :ğ
tm¶bud”
.
	`Bud
()

338 
”r
 !ğ
n
 {

339 
b
.
”rÜs
 = 
	`­³nd
(

340 
b
.
”rÜs
,

341 
”rÜs
.
	`W¿p
(

342 
”r
,

346  
b


349 
b
.
¡s
.
objeù
.
S³c
.
Tem¶©e
 = *
‹m¶©e¥ecObj
.
Objeù


350  
b


351 
	}
}

354 
	$func
 (
b
 *
Bud”
è
	`W™hSŒ©egyTy³
(

355 
¡¿‹gyty³
 
­psv1
.
S‹fulS‘Upd©eSŒ©egyTy³
,

356 è*
Bud”
 {

357 
	`Ën
(
¡¿‹gyty³
) == 0 {

358 
b
.
”rÜs
 = 
	`­³nd
(

359 
b
.
”rÜs
,

360 
”rÜs
.
	`New
("failedo build deployment object: missing strategytype"),

362  
b


365 
b
.
¡s
.
objeù
.
S³c
.
Upd©eSŒ©egy
.
Ty³
 = 
¡¿‹gyty³


366  
b


367 
	}
}

371 
	$func
 (
b
 *
Bud”
è
	`W™hPVC
(

372 
pvcBud”Li¡
 ...*
pvc
.
Bud”
,

373 è*
Bud”
 {

374 
pvcBud”Li¡
 =ğ
n
 {

375 
b
.
”rÜs
 = 
	`­³nd
(

376 
b
.
”rÜs
,

377 
”rÜs
.
	`New
("failedo build statefulset:‚il volumeBuilderList"),

379  
b


381 
_
, 
pvcBud”
 :ğ
¿nge
 
pvcBud”Li¡
 {

382 
vŞ
, 
”r
 :ğ
pvcBud”
.
	`Bud
()

383 
”r
 !ğ
n
 {

384 
b
.
”rÜs
 = 
	`­³nd
(

385 
b
.
”rÜs
,

386 
”rÜs
.
	`W¿p
(
”r
, "failedo build statefulset"),

388  
b


390 
ÃwvŞ
 :ğ*
vŞ


391 
b
.
¡s
.
objeù
.
S³c
.
VŞumeCÏimTem¶©es
 = 
	`­³nd
(

392 
b
.
¡s
.
objeù
.
S³c
.
VŞumeCÏimTem¶©es
,

393 
ÃwvŞ
,

396  
b


397 
	}
}

399 
ty³
 
¡sBudO±iÚ
 
	$func
(*
S‹ful£t
)

403 
func
 
	`NewFÜAPIObjeù
(

404 
obj
 *
­psv1
.
S‹fulS‘
,

405 
İts
 ...
¡sBudO±iÚ
,

406 è*
S‹ful£t
 {

407 
d
 :ğ&
S‹ful£t
{
objeù
: 
obj
}

408 
_
, 
o
 :ğ
¿nge
 
İts
 {

409 
	`o
(
d
)

411  
d


412 
	}
}

415 
	$func
 (
b
 *
Bud”
è
	`Bud
(è(*
­psv1
.
S‹fulS‘
, 
”rÜ
) {

416 
”r
 :ğ
b
.
	`v®id©e
()

418 
”r
 !ğ
n
 {

419  
n
, 
”rÜs
.
	`W¿pf
(
”r
,

421 
b
.
¡s
.
objeù
.
Name
)

423  
b
.
¡s
.
objeù
, 
n


424 
	}
}

426 
	$func
 (
b
 *
Bud”
è
	$v®id©e
(è
”rÜ
 {

427 
	`Ën
(
b
.
”rÜs
) != 0 {

428  
”rÜs
.
	`E¼Üf
(

430 
b
.
”rÜs
,

433  
n


434 
	}
}

438 
	$func
 (
s
 *
S‹ful£t
è
	$IsRŞlout
(è(
P»diÿ‹Name
, 
boŞ
) {

439 
pk
, 
p
 :ğ
¿nge
 
rŞloutChecks
 {

440 
	`p
(
s
) {

441  
pk
, 
çl£


444  "", 
Œue


445 
	}
}

448 
	$func
 (
s
 *
S‹ful£t
è
	`FaedRŞlout
(
Çme
 
P»diÿ‹Name
è*
RŞloutOuut
 {

449  &
RŞloutOuut
{

450 
Mes§ge
: 
rŞloutStu£s
[
Çme
](
s
),

451 
IsRŞËdout
: 
çl£
,

453 
	}
}

456 
	$func
 (
s
 *
S‹ful£t
è
	`SucûssRŞlout
(è*
RŞloutOuut
 {

457  &
RŞloutOuut
{

458 
Mes§ge
: "deployment successfully„olled out",

459 
IsRŞËdout
: 
Œue
,

461 
	}
}

464 
	$func
 (
s
 *
S‹ful£t
è
	$RŞloutStus
(è(
İ
 *
RŞloutOuut
, 
”r
 
”rÜ
) {

465 
pk
, 
ok
 :ğ
s
.
	`IsRŞlout
()

466 
ok
 {

467  
s
.
	`SucûssRŞlout
(), 
n


469  
s
.
	`FaedRŞlout
(
pk
), 
n


470 
	}
}

474 
	$func
 (
s
 *
S‹ful£t
è
	$RŞloutStusRaw
(è(
İ
 []
by‹
, 
”r
 
”rÜ
) {

475 
mes§ge
, 
”r
 :ğ
s
.
	`RŞloutStus
()

476 
”r
 !ğ
n
 {

477  
n
, 
”r


479  
	`NewRŞlout
(

480 
	`w™hOuutObjeù
(
mes§ge
)).

481 
	`Raw
()

482 
	}
}

486 
	$func
 (
b
 *
Bud”
è
	`AddCheck
(
p
 
P»diÿ‹
) *Builder {

487 
b
.
checks
 = 
	`­³nd
(b.checks, 
p
)

488  
b


489 
	}
}

493 
	$func
 (
b
 *
Bud”
è
	`AddChecks
(
p
 []
P»diÿ‹
) *Builder {

494 
_
, 
check
 :ğ
¿nge
 
p
 {

495 
b
.
	`AddCheck
(
check
)

497  
b


498 
	}
}

503 
func
 
	$IsOld”R•liÿAùive
(è
P»diÿ‹
 {

504  
	`func
(
s
 *
S‹ful£t
è
boŞ
 {

505  
s
.
	`IsOld”R•liÿAùive
()

507 
	}
}

512 
	$func
 (
s
 *
S‹ful£t
è
	$IsOld”R•liÿAùive
(è
boŞ
 {

513  
s
.
objeù
.
S³c
.
R•liÿs
 !ğ
n
 &&

514 
s
.
objeù
.
Stus
.
Upd©edR•liÿs
 < *s.objeù.
S³c
.
R•liÿs


515 
	}
}

522 
func
 
	$IsT”mš©iÚInProg»ss
(è
P»diÿ‹
 {

523  
	`func
(
s
 *
S‹ful£t
è
boŞ
 {

524  
s
.
	`IsT”mš©iÚInProg»ss
()

526 
	}
}

533 
	$func
 (
s
 *
S‹ful£t
è
	$IsT”mš©iÚInProg»ss
(è
boŞ
 {

534  
s
.
objeù
.
Stus
.
R•liÿs
 > s.objeù.Stus.
Upd©edR•liÿs


535 
	}
}

540 
func
 
	$IsUpd©eInProg»ss
(è
P»diÿ‹
 {

541  
	`func
(
s
 *
S‹ful£t
è
boŞ
 {

542  
s
.
	`IsUpd©eInProg»ss
()

544 
	}
}

549 
	$func
 (
s
 *
S‹ful£t
è
	$IsUpd©eInProg»ss
(è
boŞ
 {

550  
s
.
objeù
.
Stus
.
Cu¼’tR•liÿs
 < s.objeù.Stus.
Upd©edR•liÿs


551 
	}
}

556 
func
 
	$IsNÙSyncS³c
(è
P»diÿ‹
 {

557  
	`func
(
s
 *
S‹ful£t
è
boŞ
 {

558  
s
.
	`IsNÙSyncS³c
()

560 
	}
}

565 
	$func
 (
s
 *
S‹ful£t
è
	$IsNÙSyncS³c
(è
boŞ
 {

566  
s
.
objeù
.
G’”©iÚ
 > s.objeù.
Stus
.
Ob£rvedG’”©iÚ


567 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/statefulset/appsv1/v1alpha1/statefulset_test.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

22 
­psv1
 "k8s.io/api/apps/v1"

25 
func
 
	$Te¡Bud”W™hName
(
t
 *
‹¡šg
.
T
) {

26 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

27 
Çme
 
¡ršg


28 
bud”
 *
Bud”


29 
ex³ùE¼
 
boŞ


32 
Çme
: "PVC1",

33 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

34 
objeù
: &
­psv1
.
S‹fulS‘
{},

36 
ex³ùE¼
: 
çl£
,

39 
Çme
: "",

40 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

41 
objeù
: &
­psv1
.
S‹fulS‘
{},

43 
ex³ùE¼
: 
Œue
,

46 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

47 
Çme
, 
mock
 :=‚ame, mock

48 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

49 
b
 :ğ
mock
.
bud”
.
	`W™hName
(mock.
Çme
)

50 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

51 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

53 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

54 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

58 
	}
}

60 
func
 
	$Te¡Bud”W™hName¥aû
(
t
 *
‹¡šg
.
T
) {

61 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

62 
Çme¥aû
 
¡ršg


63 
bud”
 *
Bud”


64 
ex³ùE¼
 
boŞ


67 
Çme¥aû
: "PVC1",

68 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

69 
objeù
: &
­psv1
.
S‹fulS‘
{},

71 
ex³ùE¼
: 
çl£
,

74 
Çme¥aû
: "",

75 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

76 
objeù
: &
­psv1
.
S‹fulS‘
{},

78 
ex³ùE¼
: 
Œue
,

81 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

82 
Çme
, 
mock
 :=‚ame, mock

83 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

84 
b
 :ğ
mock
.
bud”
.
	`W™hName¥aû
(mock.
Çme¥aû
)

85 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

86 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

88 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

89 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

93 
	}
}

95 
func
 
	$Te¡BudW™hAÂÙ©iÚs
(
t
 *
‹¡šg
.
T
) {

96 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

97 
ªnÙ©iÚs
 
m­
[
¡ršg
]string

98 
bud”
 *
Bud”


99 
ex³ùE¼
 
boŞ


102 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

104 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

105 
objeù
: &
­psv1
.
S‹fulS‘
{},

107 
ex³ùE¼
: 
çl£
,

110 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{},

111 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

112 
objeù
: &
­psv1
.
S‹fulS‘
{},

114 
ex³ùE¼
: 
Œue
,

117 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

118 
Çme
, 
mock
 :=‚ame, mock

119 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

120 
b
 :ğ
mock
.
bud”
.
	`W™hAÂÙ©iÚs
(mock.
ªnÙ©iÚs
)

121 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

122 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

124 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

125 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

129 
	}
}

131 
func
 
	$Te¡BudW™hAÂÙ©iÚsNew
(
t
 *
‹¡šg
.
T
) {

132 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

133 
ªnÙ©iÚs
 
m­
[
¡ršg
]string

134 
bud”
 *
Bud”


135 
ex³ùE¼
 
boŞ


138 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

140 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

141 
objeù
: &
­psv1
.
S‹fulS‘
{},

143 
ex³ùE¼
: 
çl£
,

146 
ªnÙ©iÚs
: 
m­
[
¡ršg
]string{},

147 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

148 
objeù
: &
­psv1
.
S‹fulS‘
{},

150 
ex³ùE¼
: 
Œue
,

153 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

154 
Çme
, 
mock
 :=‚ame, mock

155 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

156 
b
 :ğ
mock
.
bud”
.
	`W™hAÂÙ©iÚsNew
(mock.
ªnÙ©iÚs
)

157 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

158 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

160 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

161 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

165 
	}
}

167 
func
 
	$Te¡BudW™hLab–s
(
t
 *
‹¡šg
.
T
) {

168 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

169 
Ïb–s
 
m­
[
¡ršg
]string

170 
bud”
 *
Bud”


171 
ex³ùE¼
 
boŞ


174 
Ïb–s
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

176 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

177 
objeù
: &
­psv1
.
S‹fulS‘
{},

179 
ex³ùE¼
: 
çl£
,

182 
Ïb–s
: 
m­
[
¡ršg
]string{},

183 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

184 
objeù
: &
­psv1
.
S‹fulS‘
{},

186 
ex³ùE¼
: 
Œue
,

189 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

190 
Çme
, 
mock
 :=‚ame, mock

191 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

192 
b
 :ğ
mock
.
bud”
.
	`W™hLab–s
(mock.
Ïb–s
)

193 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

194 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

196 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

197 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

201 
	}
}

203 
func
 
	$Te¡BudW™hLab–sNew
(
t
 *
‹¡šg
.
T
) {

204 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

205 
Ïb–s
 
m­
[
¡ršg
]string

206 
bud”
 *
Bud”


207 
ex³ùE¼
 
boŞ


210 
Ïb–s
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

212 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

213 
objeù
: &
­psv1
.
S‹fulS‘
{},

215 
ex³ùE¼
: 
çl£
,

218 
Ïb–s
: 
m­
[
¡ršg
]string{},

219 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

220 
objeù
: &
­psv1
.
S‹fulS‘
{},

222 
ex³ùE¼
: 
Œue
,

225 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

226 
Çme
, 
mock
 :=‚ame, mock

227 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

228 
b
 :ğ
mock
.
bud”
.
	`W™hLab–sNew
(mock.
Ïb–s
)

229 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

230 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

232 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

233 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

237 
	}
}

239 
func
 
	$Te¡BudW™hS–eùÜM©chLab–s
(
t
 *
‹¡šg
.
T
) {

240 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

241 
m©chLab–s
 
m­
[
¡ršg
]string

242 
bud”
 *
Bud”


243 
ex³ùE¼
 
boŞ


246 
m©chLab–s
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

248 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

249 
objeù
: &
­psv1
.
S‹fulS‘
{},

251 
ex³ùE¼
: 
çl£
,

254 
m©chLab–s
: 
m­
[
¡ršg
]string{},

255 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

256 
objeù
: &
­psv1
.
S‹fulS‘
{},

258 
ex³ùE¼
: 
Œue
,

261 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

262 
Çme
, 
mock
 :=‚ame, mock

263 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

264 
b
 :ğ
mock
.
bud”
.
	`W™hS–eùÜM©chLab–s
(mock.
m©chLab–s
)

265 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

266 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

268 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

269 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

273 
	}
}

275 
func
 
	$Te¡BudW™hS–eùÜM©chLab–sNew
(
t
 *
‹¡šg
.
T
) {

276 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

277 
m©chLab–s
 
m­
[
¡ršg
]string

278 
bud”
 *
Bud”


279 
ex³ùE¼
 
boŞ


282 
m©chLab–s
: 
m­
[
¡ršg
]string{"persistent-volume": "PV",

284 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

285 
objeù
: &
­psv1
.
S‹fulS‘
{},

287 
ex³ùE¼
: 
çl£
,

290 
m©chLab–s
: 
m­
[
¡ršg
]string{},

291 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

292 
objeù
: &
­psv1
.
S‹fulS‘
{},

294 
ex³ùE¼
: 
Œue
,

297 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

298 
Çme
, 
mock
 :=‚ame, mock

299 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

300 
b
 :ğ
mock
.
bud”
.
	`W™hS–eùÜM©chLab–sNew
(mock.
m©chLab–s
)

301 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

302 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

304 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

305 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

309 
	}
}

311 
func
 
	$Te¡Bud”W™hR•liÿs
(
t
 *
‹¡šg
.
T
) {

312 
§m¶”•liÿs
 :ğ
	`št32
(3)

313 
šv®id»¶iÿs
 :ğ
	`št32
(-1)

314 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

315 
»¶iÿs
 *
št32


316 
bud”
 *
Bud”


317 
ex³ùE¼
 
boŞ


320 
»¶iÿs
: &
§m¶”•liÿs
,

321 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

322 
objeù
: &
­psv1
.
S‹fulS‘
{},

324 
ex³ùE¼
: 
çl£
,

327 
»¶iÿs
: 
n
,

328 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

329 
objeù
: &
­psv1
.
S‹fulS‘
{},

331 
ex³ùE¼
: 
Œue
,

334 
»¶iÿs
: &
šv®id»¶iÿs
,

335 
bud”
: &
Bud”
{
¡s
: &
S‹ful£t
{

336 
objeù
: &
­psv1
.
S‹fulS‘
{},

338 
ex³ùE¼
: 
Œue
,

341 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

342 
Çme
, 
mock
 :=‚ame, mock

343 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

344 
b
 :ğ
mock
.
bud”
.
	`W™hR•liÿs
(mock.
»¶iÿs
)

345 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) == 0 {

346 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

348 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rÜs
) > 0 {

349 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

353 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/volume/v1alpha1/build.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

20 
”rÜs
 "github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1"

21 
cÜev1
 "k8s.io/api/core/v1"

25 
ty³
 
Bud”
 struct {

26 
vŞume
 *
VŞume


27 
	m”rs
 []
	m”rÜ


31 
func
 
NewBud”
(è*
	gBud”
 {

32  &
	gBud”
{
	gvŞume
: &
VŞume
{
objeù
: &
cÜev1
.Volume{}}}

36 
	$func
 (
b
 *
Bud”
è
	`W™hName
(
Çme
 
¡ršg
) *Builder {

37 
	`Ën
(
Çme
) == 0 {

38 
b
.
”rs
 = 
	`­³nd
(

39 
b
.
”rs
,

40 
”rÜs
.
	`New
("failedo build Volume object: missing Volume‚ame"),

42  
b


44 
b
.
vŞume
.
objeù
.
Name
 = 
Çme


45  
b


46 
	}
}

50 
	$func
 (
b
 *
Bud”
è
	`W™hHo¡DœeùÜy
(
·th
 
¡ršg
) *Builder {

51 
	`Ën
(
·th
) == 0 {

52 
b
.
”rs
 = 
	`­³nd
(

53 
b
.
”rs
,

54 
”rÜs
.
	`New
("failedo build volume object: missing volume…ath"),

56  
b


58 
vŞumeSourû
 :ğ
cÜev1
.
VŞumeSourû
{

59 
Ho¡P©h
: &
cÜev1
.
Ho¡P©hVŞumeSourû
{

60 
P©h
: 
·th
,

64 
b
.
vŞume
.
objeù
.
VŞumeSourû
 = 
vŞumeSourû


65  
b


66 
	}
}

70 
	$func
 (
b
 *
Bud”
è
	`W™hHo¡P©hAndTy³
(

71 
dœ·th
 
¡ršg
,

72 
dœty³
 *
cÜev1
.
Ho¡P©hTy³
,

73 è*
Bud”
 {

74 
dœty³
 =ğ
n
 {

75 
b
.
”rs
 = 
	`­³nd
(

76 
b
.
”rs
,

77 
”rÜs
.
	`New
("failedo build volume object:‚il volumeype"),

79  
b


81 
	`Ën
(
dœ·th
) == 0 {

82 
b
.
”rs
 = 
	`­³nd
(

83 
b
.
”rs
,

84 
”rÜs
.
	`New
("failedo build volume object: missing volume…ath"),

86  
b


88 
Ãwdœty³
 :ğ*
dœty³


89 
vŞumeSourû
 :ğ
cÜev1
.
VŞumeSourû
{

90 
Ho¡P©h
: &
cÜev1
.
Ho¡P©hVŞumeSourû
{

91 
P©h
: 
dœ·th
,

92 
Ty³
: &
Ãwdœty³
,

96 
b
.
vŞume
.
objeù
.
VŞumeSourû
 = 
vŞumeSourû


97  
b


98 
	}
}

101 
	$func
 (
b
 *
Bud”
è
	`W™hPVCSourû
(
pvcName
 
¡ršg
) *Builder {

102 
	`Ën
(
pvcName
) == 0 {

103 
b
.
”rs
 = 
	`­³nd
(

104 
b
.
”rs
,

105 
”rÜs
.
	`New
("failedo build volume object: missing…vc‚ame"),

107  
b


109 
vŞumeSourû
 :ğ
cÜev1
.
VŞumeSourû
{

110 
P”si¡’tVŞumeCÏim
: &
cÜev1
.
P”si¡’tVŞumeCÏimVŞumeSourû
{

111 
CÏimName
: 
pvcName
,

114 
b
.
vŞume
.
objeù
.
VŞumeSourû
 = 
vŞumeSourû


115  
b


116 
	}
}

119 
	$func
 (
b
 *
Bud”
è
	`W™hEm±yDœ
(
dœ
 *
cÜev1
.
Em±yDœVŞumeSourû
) *Builder {

120 
dœ
 =ğ
n
 {

121 
b
.
”rs
 = 
	`­³nd
(

122 
b
.
”rs
,

123 
”rÜs
.
	`New
("failedo build volume object:‚il dir"),

125  
b


128 
Ãwdœ
 :ğ*
dœ


129 
b
.
vŞume
.
objeù
.
Em±yDœ
 = &
Ãwdœ


130  
b


131 
	}
}

134 
	$func
 (
b
 *
Bud”
è
	`Bud
(è(*
cÜev1
.
VŞume
, 
”rÜ
) {

135 
	`Ën
(
b
.
”rs
) > 0 {

136  
n
, 
”rÜs
.
	`E¼Üf
("%+v", 
b
.
”rs
)

138  
b
.
vŞume
.
objeù
, 
n


139 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/volume/v1alpha1/build_test.go

17 
·ckage
 
v1®pha1


19 
impÜt
 (

23 
cÜev1
 "k8s.io/api/core/v1"

26 
func
 
	$Te¡Bud”W™hName
(
t
 *
‹¡šg
.
T
) {

27 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

28 
Çme
 
¡ršg


29 
bud”
 *
Bud”


30 
ex³ùE¼
 
boŞ


33 
Çme
: "vol1",

34 
bud”
: &
Bud”
{
vŞume
: &
VŞume
{

35 
objeù
: &
cÜev1
.
VŞume
{},

37 
ex³ùE¼
: 
çl£
,

40 
Çme
: "",

41 
bud”
: &
Bud”
{
vŞume
: &
VŞume
{

42 
objeù
: &
cÜev1
.
VŞume
{},

44 
ex³ùE¼
: 
Œue
,

47 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

48 
Çme
, 
mock
 :=‚ame, mock

49 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

50 
b
 :ğ
mock
.
bud”
.
	`W™hName
(mock.
Çme
)

51 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

52 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

54 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

55 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

59 
	}
}

61 
func
 
	$Te¡BudW™hHo¡DœeùÜy
(
t
 *
‹¡šg
.
T
) {

62 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

63 
·th
 
¡ršg


64 
bud”
 *
Bud”


65 
ex³ùE¼
 
boŞ


68 
·th
: "/var/openebs/local",

69 
bud”
: &
Bud”
{
vŞume
: &
VŞume
{

70 
objeù
: &
cÜev1
.
VŞume
{},

72 
ex³ùE¼
: 
çl£
,

75 
·th
: "",

76 
bud”
: &
Bud”
{
vŞume
: &
VŞume
{

77 
objeù
: &
cÜev1
.
VŞume
{},

79 
ex³ùE¼
: 
Œue
,

82 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

83 
Çme
, 
mock
 :=‚ame, mock

84 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

85 
b
 :ğ
mock
.
bud”
.
	`W™hHo¡DœeùÜy
(mock.
·th
)

86 
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

87 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

89 !
mock
.
ex³ùE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

90 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

94 
	}
}

96 
func
 
	$Te¡BudHo¡P©hVŞume
(
t
 *
‹¡šg
.
T
) {

98 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

99 
Çme
 
¡ršg


100 
·th
 
¡ršg


101 
ex³ùedVŞ
 *
cÜev1
.
VŞume


102 
ex³ùedE¼
 
boŞ


105 
Çme
: "PV1",

106 
·th
: "/var/openebs/local/PV1",

107 
ex³ùedVŞ
: &
cÜev1
.
VŞume
{

108 
Name
: "PV1",

109 
VŞumeSourû
: 
cÜev1
.VolumeSource{

110 
Ho¡P©h
: &
cÜev1
.
Ho¡P©hVŞumeSourû
{

111 
P©h
: "/var/openebs/local/PV1",

115 
ex³ùedE¼
: 
çl£
,

118 
Çme
: "",

119 
·th
: "",

120 
ex³ùedVŞ
: 
n
,

121 
ex³ùedE¼
: 
Œue
,

124 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

125 
Çme
, 
mock
 :=‚ame, mock

126 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

127 
vŞObj
, 
”r
 :ğ
	`NewBud”
().

128 
	`W™hName
(
mock
.
Çme
).

129 
	`W™hHo¡DœeùÜy
(
mock
.
·th
).

130 
	`Bud
()

131 
mock
.
ex³ùedE¼
 && 
”r
 =ğ
n
 {

132 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

134 !
mock
.
ex³ùedE¼
 && 
”r
 !ğ
n
 {

135 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

137 !
»æeù
.
	`D“pEqu®
(
vŞObj
, 
mock
.
ex³ùedVŞ
) {

138 
t
.
	`F©®f
("Te¡ %q faed: vŞummism©ch", 
Çme
)

142 
	}
}

144 
func
 
	$Te¡Bu”W™hdHo¡P©hªdTy³
(
t
 *
‹¡šg
.
T
) {

145 
§m¶edœty³
 :ğ
cÜev1
.
Ho¡P©hDœeùÜyOrC»©e


146 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

147 
·th
 
¡ršg


148 
dœty³
 *
cÜev1
.
Ho¡P©hTy³


149 
ex³ùedE¼
 
boŞ


152 
·th
: "/var/openebs/local/PV1",

153 
dœty³
: &
§m¶edœty³
,

154 
ex³ùedE¼
: 
çl£
,

157 
·th
: "/var/openebs/local/PV1",

158 
dœty³
: 
n
,

159 
ex³ùedE¼
: 
Œue
,

162 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

163 
Çme
, 
mock
 :=‚ame, mock

164 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

165 
b
 :ğ
	`NewBud”
().

166 
	`W™hHo¡P©hAndTy³
(
mock
.
·th
, mock.
dœty³
)

167 
mock
.
ex³ùedE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

168 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

170 !
mock
.
ex³ùedE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

171 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

175 
	}
}

177 
func
 
	$Te¡Bu”W™hEm±yDœ
(
t
 *
‹¡šg
.
T
) {

178 
‹¡s
 :ğ
m­
[
¡ršg
]struct {

179 
·th
 
¡ršg


180 
em±ydœ
 *
cÜev1
.
Em±yDœVŞumeSourû


181 
ex³ùedE¼
 
boŞ


184 
·th
: "/var/openebs/local/PV1",

185 
em±ydœ
: &
cÜev1
.
Em±yDœVŞumeSourû
{},

186 
ex³ùedE¼
: 
çl£
,

189 
·th
: "/var/openebs/local/PV1",

190 
em±ydœ
: 
n
,

191 
ex³ùedE¼
: 
Œue
,

194 
Çme
, 
mock
 :ğ
¿nge
 
‹¡s
 {

195 
Çme
, 
mock
 :=‚ame, mock

196 
t
.
	`Run
(
Çme
, 
	`func
Ñ *
‹¡šg
.
T
) {

197 
b
 :ğ
	`NewBud”
().

198 
	`W™hEm±yDœ
(
mock
.
em±ydœ
)

199 
mock
.
ex³ùedE¼
 && 
	`Ën
(
b
.
”rs
) == 0 {

200 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼Ü‚ÙØbn", 
Çme
)

202 !
mock
.
ex³ùedE¼
 && 
	`Ën
(
b
.
”rs
) > 0 {

203 
t
.
	`F©®f
("Te¡ %q faed:ƒx³ùedƒ¼ÜØbn", 
Çme
)

207 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/volume/v1alpha1/volume.go

15 
·ckage
 
v1®pha1


17 
impÜt
 (

18 
cÜev1
 "k8s.io/api/core/v1"

24 
ty³
 
VŞume
 struct {

25 
objeù
 *
	mcÜev1
.
	mVŞume


28 
ty³
 
vŞumeBudO±iÚ
 
	$func
(*
VŞume
)

31 
func
 
	`NewFÜAPIObjeù
(
obj
 *
cÜev1
.
VŞume
, 
İts
 ...
vŞumeBudO±iÚ
) *Volume {

32 
v
 :ğ&
VŞume
{
objeù
: 
obj
}

33 
_
, 
o
 :ğ
¿nge
 
İts
 {

34 
	`o
(
v
)

36  
v


37 
	}
}

42 
ty³
 
P»diÿ‹
 
	$func
(*
VŞume
è
boŞ


46 
	$func
 (
v
 *
VŞume
è
	$IsN
(è
boŞ
 {

47  
v
.
objeù
 =ğ
n


48 
	}
}

52 
func
 
	$IsN
(è
P»diÿ‹
 {

53  
	`func
(
v
 *
VŞume
è
boŞ
 {

54  
v
.
	`IsN
()

56 
	}
}

59 
ty³
 
P»diÿ‹Li¡
 []
P»diÿ‹


64 
	$func
 (
l
 
P»diÿ‹Li¡
è
	$®l
(
v
 *
VŞume
è
boŞ
 {

65 
_
, 
´ed
 :ğ
¿nge
 
l
 {

66 !
	`´ed
(
v
) {

67  
çl£


70  
Œue


71 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/tools.go

3 
·ckage
 
toŞs


5 
impÜt
 (

6 
_
 "sigs.k8s.io/controller-tools/pkg/crd/generator"

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/vendor/cloud.google.com/go/compute/metadata/metadata.go

20 
·ckage
 
m‘ad©a


22 
impÜt
 (

39 
	gm‘ad©aIP
 = "169.254.169.254"

46 
m‘ad©aHo¡Env
 = "GCE_METADATA_HOST"

48 
u£rAg’t
 = "gcloud-golang/0.1"

51 
ty³
 
ÿchedV®ue
 struct {

52 
k
 
¡ršg


53 
Œim
 
boŞ


54 
mu
 
sync
.
Mu‹x


55 
v
 
¡ršg


58 
v¬
 (

59 
´ojID
 = &
ÿchedV®ue
{
k
: "´ojeù/´ojeù-id", 
Œim
: 
Œue
}

60 
´ojNum
 = &
ÿchedV®ue
{
k
: "´ojeù/num”ic-´ojeù-id", 
Œim
: 
Œue
}

61 
š¡ID
 = &
ÿchedV®ue
{
k
: "š¡ªû/id", 
Œim
: 
Œue
}

64 
v¬
 (

65 
deçuÉCl›Á
 = &
Cl›Á
{
hc
: &
h‰p
.Client{

66 
T¿n¥Üt
: &
h‰p
.Transport{

67 
DŸl
: (&
Ãt
.
DŸËr
{

68 
Timeout
: 2 * 
time
.
SecÚd
,

69 
K“pAlive
: 30 * 
time
.
SecÚd
,

70 }).
DŸl
,

71 
Re¥Ú£H—d”Timeout
: 2 * 
time
.
SecÚd
,

74 
subsüibeCl›Á
 = &
Cl›Á
{
hc
: &
h‰p
.Client{

75 
T¿n¥Üt
: &
h‰p
.Transport{

76 
DŸl
: (&
Ãt
.
DŸËr
{

77 
Timeout
: 2 * 
time
.
SecÚd
,

78 
K“pAlive
: 30 * 
time
.
SecÚd
,

79 }).
DŸl
,

90 
ty³
 
NÙDefšedE¼Ü
 
¡ršg


92 
	$func
 (
suffix
 
NÙDefšedE¼Ü
è
	$E¼Ü
(è
¡ršg
 {

93  
fmt
.
	`S´štf
("m‘ad©a: GCE m‘ad©¨%q‚Ù defšed", 
	`¡ršg
(
suffix
))

94 
	}
}

96 
	$func
 (
c
 *
ÿchedV®ue
è
	$g‘
(
ş
 *
Cl›Á
è(
v
 
¡ršg
, 
”r
 
”rÜ
) {

97 
deãr
 
c
.
mu
.
	`UÆock
()

98 
c
.
mu
.
	`Lock
()

99 
c
.
v
 != "" {

100  
c
.
v
, 
n


102 
c
.
Œim
 {

103 
v
, 
”r
 = 
ş
.
	`g‘Trimmed
(
c
.
k
)

105 
v
, 
”r
 = 
ş
.
	`G‘
(
c
.
k
)

107 
”r
 =ğ
n
 {

108 
c
.
v
 = v

111 
	}
}

113 
	$v¬
 (

114 
ÚGCEOnû
 
sync
.
Onû


115 
ÚGCE
 
boŞ


119 
func
 
	$OnGCE
(è
boŞ
 {

120 
ÚGCEOnû
.
	`Do
(
š™OnGCE
)

121  
ÚGCE


122 
	}
}

124 
func
 
	$š™OnGCE
() {

125 
ÚGCE
 = 
	`‹¡OnGCE
()

126 
	}
}

128 
func
 
	$‹¡OnGCE
(è
boŞ
 {

130 
os
.
	`G‘’v
(
m‘ad©aHo¡Env
) != "" {

131  
Œue


134 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hCªûl
(cÚ‹xt.
	`Background
())

135 
deãr
 
	`ÿnûl
()

137 
»sc
 :ğ
	`make
(
chª
 
boŞ
, 2)

141 
go
 
	`func
() {

142 
»q
, 
_
 :ğ
h‰p
.
	`NewReque¡
("GET", "h‰p://"+
m‘ad©aIP
, 
n
)

143 
»q
.
H—d”
.
	`S‘
("U£r-Ag’t", 
u£rAg’t
)

144 
»s
, 
”r
 :ğ
deçuÉCl›Á
.
hc
.
	`Do
(
»q
.
	`W™hCÚ‹xt
(
ùx
))

145 
”r
 !ğ
n
 {

146 
»sc
 <- 
çl£


149 
deãr
 
»s
.
Body
.
	`Clo£
()

150 
»sc
 <- 
»s
.
H—d”
.
	`G‘
("Metadata-Flavor") == "Google"

153 
go
 
	`func
() {

154 
addrs
, 
”r
 :ğ
Ãt
.
	`LookupHo¡
("metadata.google.internal")

155 
”r
 !ğ
n
 || 
	`Ën
(
addrs
) == 0 {

156 
»sc
 <- 
çl£


159 
»sc
 <- 
	`¡rsCÚšs
(
addrs
, 
m‘ad©aIP
)

162 
ŒyH¬d”
 :ğ
	`sy¡emInfoSugge¡sGCE
()

163 
ŒyH¬d”
 {

164 
»s
 :ğ<-
»sc


165 
»s
 {

167  
Œue


173 
tim”
 :ğ
time
.
	`NewTim”
(5 *ime.
SecÚd
)

174 
deãr
 
tim”
.
	`Stİ
()

175 
£Ëù
 {

176 
»s
 = <-
»sc
:

177  
»s


178 <-
tim”
.
C
:

180  
çl£


192  <-
»sc


193 
	}
}

199 
func
 
	$sy¡emInfoSugge¡sGCE
(è
boŞ
 {

200 
ruÁime
.
GOOS
 != "linux" {

202  
çl£


204 
¦u½
, 
_
 :ğ
iout
.
	`R—dFe
("/sys/class/dmi/id/product_name")

205 
Çme
 :ğ
¡ršgs
.
	`TrimS·û
(
	`¡ršg
(
¦u½
))

206  
Çme
 == "Google" ||‚ame == "Google Compute Engine"

207 
	}
}

211 
func
 
Subsüibe
(
suffix
 
¡ršg
, 
â
 
	$func
(
v
 
¡ršg
, 
ok
 
boŞ
è
”rÜ
)ƒrror {

212  
subsüibeCl›Á
.
	`Subsüibe
(
suffix
, 
â
)

213 
	}
}

216 
func
 
	$G‘
(
suffix
 
¡ršg
è(¡ršg, 
”rÜ
è{  
deçuÉCl›Á
.
	`G‘
(suffixè
	}
}

219 
func
 
	$ProjeùID
(è(
¡ršg
, 
”rÜ
è{  
deçuÉCl›Á
.
	`ProjeùID
(è
	}
}

222 
func
 
	$Num”icProjeùID
(è(
¡ršg
, 
”rÜ
è{  
deçuÉCl›Á
.
	`Num”icProjeùID
(è
	}
}

225 
func
 
	$IÁ”ÇlIP
(è(
¡ršg
, 
”rÜ
è{  
deçuÉCl›Á
.
	`IÁ”ÇlIP
(è
	}
}

228 
func
 
	$Ex‹º®IP
(è(
¡ršg
, 
”rÜ
è{  
deçuÉCl›Á
.
	`Ex‹º®IP
(è
	}
}

232 
func
 
	$Ho¡Çme
(è(
¡ršg
, 
”rÜ
è{  
deçuÉCl›Á
.
	`Ho¡Çme
(è
	}
}

236 
func
 
In¡ªûTags
(è([]
	g¡ršg
, 
	g”rÜ
è{  
	gdeçuÉCl›Á
.InstanceTags() }

239 
func
 
	$In¡ªûID
(è(
¡ršg
, 
”rÜ
è{  
deçuÉCl›Á
.
	`In¡ªûID
(è
	}
}

242 
func
 
	$In¡ªûName
(è(
¡ršg
, 
”rÜ
è{  
deçuÉCl›Á
.
	`In¡ªûName
(è
	}
}

245 
func
 
	$ZÚe
(è(
¡ršg
, 
”rÜ
è{  
deçuÉCl›Á
.
	`ZÚe
(è
	}
}

248 
func
 
In¡ªûA‰ribu‹s
(è([]
	g¡ršg
, 
	g”rÜ
è{  
	gdeçuÉCl›Á
.InstanceAttributes() }

251 
func
 
ProjeùA‰ribu‹s
(è([]
	g¡ršg
, 
	g”rÜ
è{  
	gdeçuÉCl›Á
.ProjectAttributes() }

254 
func
 
	$In¡ªûA‰ribu‹V®ue
(
©Œ
 
¡ršg
è(¡ršg, 
”rÜ
) {

255  
deçuÉCl›Á
.
	`In¡ªûA‰ribu‹V®ue
(
©Œ
)

256 
	}
}

259 
func
 
	$ProjeùA‰ribu‹V®ue
(
©Œ
 
¡ršg
è(¡ršg, 
”rÜ
) {

260  
deçuÉCl›Á
.
	`ProjeùA‰ribu‹V®ue
(
©Œ
)

261 
	}
}

264 
func
 
Scİes
(
£rviûAccouÁ
 
¡ršg
è([]
	g¡ršg
, 
	g”rÜ
è{  
	gdeçuÉCl›Á
.Scopes(serviceAccount) }

266 
func
 
	$¡rsCÚšs
(
ss
 []
¡ršg
, 
s
 sŒšgè
boŞ
 {

267 
_
, 
v
 :ğ
¿nge
 
ss
 {

268 
v
 =ğ
s
 {

269  
Œue


272  
çl£


273 
	}
}

276 
ty³
 
Cl›Á
 struct {

277 
hc
 *
h‰p
.
Cl›Á


282 
func
 
NewCl›Á
(
c
 *
h‰p
.
Cl›Á
) *Client {

283  &
Cl›Á
{
hc
: 
c
}

288 
	$func
 (
c
 *
Cl›Á
è
	$g‘ETag
(
suffix
 
¡ršg
è(
v®ue
, 
‘ag
 sŒšg, 
”r
 
”rÜ
) {

294 
ho¡
 :ğ
os
.
	`G‘’v
(
m‘ad©aHo¡Env
)

295 
ho¡
 == "" {

301 
ho¡
 = 
m‘ad©aIP


303 
u
 :ğ"h‰p://" + 
ho¡
 + "/compu‹M‘ad©a/v1/" + 
suffix


304 
»q
, 
_
 :ğ
h‰p
.
	`NewReque¡
("GET", 
u
, 
n
)

305 
»q
.
H—d”
.
	`S‘
("Metadata-Flavor", "Google")

306 
»q
.
H—d”
.
	`S‘
("U£r-Ag’t", 
u£rAg’t
)

307 
»s
, 
”r
 :ğ
c
.
hc
.
	`Do
(
»q
)

308 
”r
 !ğ
n
 {

309  "", "", 
”r


311 
deãr
 
»s
.
Body
.
	`Clo£
()

312 
»s
.
StusCode
 =ğ
h‰p
.
StusNÙFound
 {

313  "", "", 
	`NÙDefšedE¼Ü
(
suffix
)

315 
®l
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»s
.
Body
)

316 
”r
 !ğ
n
 {

317  "", "", 
”r


319 
»s
.
StusCode
 != 200 {

320  "", "", &
E¼Ü
{
Code
: 
»s
.
StusCode
, 
Mes§ge
: 
	`¡ršg
(
®l
)}

322  
	`¡ršg
(
®l
), 
»s
.
H—d”
.
	`G‘
("Eg"), 
n


323 
	}
}

333 
	$func
 (
c
 *
Cl›Á
è
	$G‘
(
suffix
 
¡ršg
è(¡ršg, 
”rÜ
) {

334 
v®
, 
_
, 
”r
 :ğ
c
.
	`g‘ETag
(
suffix
)

335  
v®
, 
”r


336 
	}
}

338 
	$func
 (
c
 *
Cl›Á
è
	$g‘Trimmed
(
suffix
 
¡ršg
è(
s
 sŒšg, 
”r
 
”rÜ
) {

339 
s
, 
”r
 = 
c
.
	`G‘
(
suffix
)

340 
s
 = 
¡ršgs
.
	`TrimS·û
(s)

342 
	}
}

344 
	$func
 (
c
 *
Cl›Á
è
	`lšes
(
suffix
 
¡ršg
è([]¡ršg, 
”rÜ
) {

345 
j
, 
”r
 :ğ
c
.
	`G‘
(
suffix
)

346 
”r
 !ğ
n
 {

347  
n
, 
”r


349 
s
 :ğ
¡ršgs
.
	`S¶™
(¡ršgs.
	`TrimS·û
(
j
), "\n")

350 
i
 :ğ
¿nge
 
s
 {

351 
s
[
i
] = 
¡ršgs
.
	`TrimS·û
(s[i])

353  
s
, 
n


354 
	}
}

357 
	$func
 (
c
 *
Cl›Á
è
	$ProjeùID
(è(
¡ršg
, 
”rÜ
è{  
´ojID
.
	`g‘
(
c
è
	}
}

360 
	$func
 (
c
 *
Cl›Á
è
	$Num”icProjeùID
(è(
¡ršg
, 
”rÜ
è{  
´ojNum
.
	`g‘
(
c
è
	}
}

363 
	$func
 (
c
 *
Cl›Á
è
	$In¡ªûID
(è(
¡ršg
, 
”rÜ
è{  
š¡ID
.
	`g‘
(
c
è
	}
}

366 
	$func
 (
c
 *
Cl›Á
è
	$IÁ”ÇlIP
(è(
¡ršg
, 
”rÜ
) {

367  
c
.
	`g‘Trimmed
("instance/network-interfaces/0/ip")

368 
	}
}

371 
	$func
 (
c
 *
Cl›Á
è
	$Ex‹º®IP
(è(
¡ršg
, 
”rÜ
) {

372  
c
.
	`g‘Trimmed
("instance/network-interfaces/0/access-configs/0/external-ip")

373 
	}
}

377 
	$func
 (
c
 *
Cl›Á
è
	$Ho¡Çme
(è(
¡ršg
, 
”rÜ
) {

378  
c
.
	`g‘Trimmed
("instance/hostname")

379 
	}
}

383 
	$func
 (
c
 *
Cl›Á
è
	`In¡ªûTags
(è([]
¡ršg
, 
”rÜ
) {

384 
v¬
 
s
 []
¡ršg


385 
j
, 
”r
 :ğ
c
.
	`G‘
("instance/tags")

386 
”r
 !ğ
n
 {

387  
n
, 
”r


389 
”r
 :ğ
jsÚ
.
	`NewDecod”
(
¡ršgs
.
	`NewR—d”
(
j
)).
	`Decode
(&
s
);ƒ¼ !ğ
n
 {

390  
n
, 
”r


392  
s
, 
n


393 
	}
}

396 
	$func
 (
c
 *
Cl›Á
è
	$In¡ªûName
(è(
¡ršg
, 
”rÜ
) {

397 
ho¡
, 
”r
 :ğ
c
.
	`Ho¡Çme
()

398 
”r
 !ğ
n
 {

399  "", 
”r


401  
¡ršgs
.
	`S¶™
(
ho¡
, ".")[0], 
n


402 
	}
}

405 
	$func
 (
c
 *
Cl›Á
è
	$ZÚe
(è(
¡ršg
, 
”rÜ
) {

406 
zÚe
, 
”r
 :ğ
c
.
	`g‘Trimmed
("instance/zone")

408 
”r
 !ğ
n
 {

409  "", 
”r


411  
zÚe
[
¡ršgs
.
	`La¡Index
(zÚe, "/")+1:], 
n


412 
	}
}

417 
	$func
 (
c
 *
Cl›Á
è
	`In¡ªûA‰ribu‹s
(è([]
¡ršg
, 
”rÜ
è{  c.
	`lšes
("š¡ªû/©Œibu‹s/"è
	}
}

422 
	$func
 (
c
 *
Cl›Á
è
	`ProjeùA‰ribu‹s
(è([]
¡ršg
, 
”rÜ
è{  c.
	`lšes
("´ojeù/©Œibu‹s/"è
	}
}

432 
	$func
 (
c
 *
Cl›Á
è
	$In¡ªûA‰ribu‹V®ue
(
©Œ
 
¡ršg
è(¡ršg, 
”rÜ
) {

433  
c
.
	`G‘
("š¡ªû/©Œibu‹s/" + 
©Œ
)

434 
	}
}

444 
	$func
 (
c
 *
Cl›Á
è
	$ProjeùA‰ribu‹V®ue
(
©Œ
 
¡ršg
è(¡ršg, 
”rÜ
) {

445  
c
.
	`G‘
("´ojeù/©Œibu‹s/" + 
©Œ
)

446 
	}
}

451 
	$func
 (
c
 *
Cl›Á
è
	`Scİes
(
£rviûAccouÁ
 
¡ršg
è([]¡ršg, 
”rÜ
) {

452 
£rviûAccouÁ
 == "" {

453 
£rviûAccouÁ
 = "default"

455  
c
.
	`lšes
("š¡ªû/£rviû-accouÁs/" + 
£rviûAccouÁ
 + "/scopes")

456 
	}
}

467 
	$func
 (
c
 *
Cl›Á
è
	`Subsüibe
(
suffix
 
¡ršg
, 
â
 
	$func
(
v
 
¡ršg
, 
ok
 
boŞ
è
”rÜ
)ƒrror {

468 cÚ¡ 
çedSubsüibeSË•
 = 
time
.
SecÚd
 * 5

471 
v®
, 
Ï¡ETag
, 
”r
 :ğ
c
.
	`g‘ETag
(
suffix
)

472 
”r
 !ğ
n
 {

473  
”r


476 
”r
 :ğ
	`â
(
v®
, 
Œue
);ƒ¼ !ğ
n
 {

477  
”r


480 
ok
 :ğ
Œue


481 
¡ršgs
.
	`CÚšsRuÃ
(
suffix
, '?') {

482 
suffix
 += "&wait_for_change=true&last_etag="

484 
suffix
 += "?wait_for_change=true&last_etag="

487 
v®
, 
‘ag
, 
”r
 :ğ
c
.
	`g‘ETag
(
suffix
 + 
u¾
.
	`Qu”yEsÿ³
(
Ï¡ETag
))

488 
”r
 !ğ
n
 {

489 
_
, 
d–‘ed
 :ğ
”r
.(
NÙDefšedE¼Ü
); !deleted {

490 
time
.
	`SË•
(
çedSubsüibeSË•
)

493 
ok
 = 
çl£


495 
Ï¡ETag
 = 
‘ag


497 
”r
 :ğ
	`â
(
v®
, 
ok
);ƒ¼ !ğ
n
 || !ok {

498  
”r


501 
	}
}

504 
ty³
 
E¼Ü
 struct {

506 
Code
 

508 
Mes§ge
 
	m¡ršg


511 
	$func
 (
e
 *
E¼Ü
è
	$E¼Ü
(è
¡ršg
 {

512  
fmt
.
	`S´štf
("compu‹: Reûived %d `%s`", 
e
.
Code
,ƒ.
Mes§ge
)

513 
	}
}

	@/home/golearn/src/github.com/utkarshmani1997/jiva-operator/version/version.go

1 
·ckage
 
v”siÚ


3 
v¬
 (

4 
V”siÚ
 = "0.0.1"

	@
1
.
1
/usr/include
49
4977
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/cmd/manager/main.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/addtoscheme_openebs_v1alpha1.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/apis.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/group.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1/doc.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1/jivavolume_types.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1/register.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1/zz_generated.deepcopy.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/apis/openebs/v1alpha1/zz_generated.openapi.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/controller/add_jivavolume.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/controller/controller.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/controller/jivavolume/jivavolume_controller.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/env/v1alpha1/env.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/env/v1alpha1/env_test.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1/errors.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1/errors_test.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/errors/v1alpha1/types.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/jiva/jiva.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/client/v1alpha1/client.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/client/v1alpha1/client_test.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/container/v1alpha1/container.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/container/v1alpha1/container_test.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/deployment/appsv1/v1alpha1/deployment.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/deployment/appsv1/v1alpha1/deployment_test.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/deployment/appsv1/v1alpha1/kubernetes.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/deployment/appsv1/v1alpha1/rollout_status.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/podtemplatespec/v1alpha1/podtemplatespec.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/podtemplatespec/v1alpha1/podtemplatespec_test.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/build.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/build_test.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/buildlist.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/buildlist_test.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/kubernetes.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/kubernetes_test.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/persistentvolumeclaim.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/pvc/v1alpha1/persistentvolumeclaim_test.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/service/v1alpha1/build.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/service/v1alpha1/kubernetes.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/service/v1alpha1/service.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/statefulset/appsv1/v1alpha1/kubernetes.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/statefulset/appsv1/v1alpha1/rollout_status.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/statefulset/appsv1/v1alpha1/statefulset.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/statefulset/appsv1/v1alpha1/statefulset_test.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/volume/v1alpha1/build.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/volume/v1alpha1/build_test.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/pkg/kubernetes/volume/v1alpha1/volume.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/tools.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/vendor/cloud.google.com/go/compute/metadata/metadata.go
/home/golearn/src/github.com/utkarshmani1997/jiva-operator/version/version.go
